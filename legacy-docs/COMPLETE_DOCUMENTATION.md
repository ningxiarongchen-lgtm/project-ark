# ğŸ“š Project Ark å®Œæ•´æŠ€æœ¯æ–‡æ¡£

**ç³»ç»Ÿåç§°**ï¼šProject Ark Platformï¼ˆæ–¹èˆŸå¹³å°ï¼‰  
**ç‰ˆæœ¬**ï¼šv1.0.0  
**æ–‡æ¡£æ›´æ–°æ—¥æœŸ**ï¼š2025-10-29  
**å¼€å‘å›¢é˜Ÿ**ï¼šProject Ark Team

---

## ğŸ“– ç›®å½•

- [ç¬¬ä¸€éƒ¨åˆ†ï¼šç³»ç»Ÿæ¦‚è¿°](#ç¬¬ä¸€éƒ¨åˆ†ç³»ç»Ÿæ¦‚è¿°)
- [ç¬¬äºŒéƒ¨åˆ†ï¼šæ•°æ®åº“æ¶æ„æŒ‡å—](#ç¬¬äºŒéƒ¨åˆ†æ•°æ®åº“æ¶æ„æŒ‡å—)
- [ç¬¬ä¸‰éƒ¨åˆ†ï¼šä»£ç ç»“æ„æŒ‡å—](#ç¬¬ä¸‰éƒ¨åˆ†ä»£ç ç»“æ„æŒ‡å—)
- [ç¬¬å››éƒ¨åˆ†ï¼šAPIæ¥å£å‚è€ƒ](#ç¬¬å››éƒ¨åˆ†apiæ¥å£å‚è€ƒ)
- [ç¬¬äº”éƒ¨åˆ†ï¼šæ•°æ®å¯¼å…¥æŒ‡å—](#ç¬¬äº”éƒ¨åˆ†æ•°æ®å¯¼å…¥æŒ‡å—)
- [ç¬¬å…­éƒ¨åˆ†ï¼šå¿«é€Ÿå‚è€ƒå¡ç‰‡](#ç¬¬å…­éƒ¨åˆ†å¿«é€Ÿå‚è€ƒå¡ç‰‡)
- [é™„å½•ï¼šéªŒæ”¶æµ‹è¯•æŒ‡å—](#é™„å½•éªŒæ”¶æµ‹è¯•æŒ‡å—)

---

# ç¬¬ä¸€éƒ¨åˆ†ï¼šç³»ç»Ÿæ¦‚è¿°

## ä¸€ã€ç³»ç»ŸåŸºæœ¬ä¿¡æ¯

**ç³»ç»Ÿç±»å‹**ï¼šæ°”åŠ¨æ‰§è¡Œå™¨æ™ºèƒ½é€‰å‹ä¸å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ç³»ç»Ÿ  
**æŠ€æœ¯æ¶æ„**ï¼šå‰åç«¯åˆ†ç¦»ï¼ˆReact + Node.js + MongoDBï¼‰  
**éƒ¨ç½²æ–¹å¼**ï¼šæœ¬åœ°éƒ¨ç½² / äº‘ç«¯éƒ¨ç½²  
**æ”¯æŒå¹³å°**ï¼šWebæµè§ˆå™¨ï¼ˆChromeã€Firefoxã€Safariã€Edgeï¼‰

### ç³»ç»Ÿå®šä½

è¿™æ˜¯ä¸€å¥—é¢å‘æ°”åŠ¨æ‰§è¡Œå™¨åˆ¶é€ ä¼ä¸šçš„å…¨æµç¨‹æ•°å­—åŒ–ç®¡ç†å¹³å°ï¼Œæ¶µç›–ä»å”®å‰é€‰å‹ã€æŠ¥ä»·ã€åˆåŒç­¾è®¢åˆ°ç”Ÿäº§åˆ¶é€ ã€è´¨é‡æ£€éªŒã€ç‰©æµå‘è´§ã€å”®åæœåŠ¡çš„å®Œæ•´ä¸šåŠ¡é—­ç¯ã€‚

### æ ¸å¿ƒä»·å€¼
- **æ•ˆç‡æå‡**ï¼šé€‰å‹æ—¶é—´ä»2å°æ—¶é™è‡³5åˆ†é’Ÿï¼ˆæå‡96%ï¼‰
- **é”™è¯¯å‡å°‘**ï¼šäººå·¥é€‰å‹é”™è¯¯ç‡ä»15%é™è‡³<1%
- **æˆæœ¬æ§åˆ¶**ï¼šåº“å­˜å‘¨è½¬ç‡æå‡30%
- **å®¢æˆ·æ»¡æ„åº¦**ï¼šäº¤ä»˜å‡†æ—¶ç‡æå‡è‡³95%

---

## äºŒã€æŠ€æœ¯æ¶æ„

### 2.1 æŠ€æœ¯æ ˆ

**åç«¯æŠ€æœ¯**ï¼š
- è¿è¡Œç¯å¢ƒï¼šNode.js v16+
- Webæ¡†æ¶ï¼šExpress.js v4.18
- æ•°æ®åº“ï¼šMongoDB v7.6
- ODMï¼šMongoose v7.6
- è®¤è¯ï¼šJWT (jsonwebtoken) + bcrypt
- å®æ—¶é€šä¿¡ï¼šSocket.IO v4.8
- å®‰å…¨ï¼šHelmet + express-rate-limit
- æ–‡ä»¶å¤„ç†ï¼šMulter + xlsx

**å‰ç«¯æŠ€æœ¯**ï¼š
- æ¡†æ¶ï¼šReact v18.2
- æ„å»ºå·¥å…·ï¼šVite v5.0
- è·¯ç”±ï¼šReact Router v6.18
- UIåº“ï¼šAnt Design v5.11
- çŠ¶æ€ç®¡ç†ï¼šZustand v4.4
- HTTPå®¢æˆ·ç«¯ï¼šAxios v1.6
- å®æ—¶é€šä¿¡ï¼šSocket.IO Client v4.8

**å¼€å‘å·¥å…·**ï¼š
- æµ‹è¯•æ¡†æ¶ï¼šJest + Cypress
- ä»£ç è§„èŒƒï¼šESLint
- è¿›ç¨‹ç®¡ç†ï¼šnodemon

### 2.2 ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      å‰ç«¯ (React + Vite)     â”‚  ç«¯å£: 5173
â”‚      ç”¨æˆ·ç•Œé¢å±‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ HTTP/WebSocket
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    åç«¯ (Express.js)         â”‚  ç«¯å£: 5001
â”‚    ä¸šåŠ¡é€»è¾‘å±‚ + APIå±‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ Mongoose ODM
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      MongoDB æ•°æ®åº“          â”‚  ç«¯å£: 27017
â”‚      æ•°æ®æŒä¹…åŒ–å±‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 ç›®å½•ç»“æ„

```
Model Selection System/
â”‚
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ database.js       # MongoDBè¿æ¥é…ç½®
â”‚   â”œâ”€â”€ controllers/          # æ§åˆ¶å™¨ï¼ˆ28ä¸ªï¼‰
â”‚   â”œâ”€â”€ models/               # æ•°æ®æ¨¡å‹ï¼ˆ21ä¸ªï¼‰
â”‚   â”œâ”€â”€ routes/               # è·¯ç”±å®šä¹‰ï¼ˆ28ä¸ªï¼‰
â”‚   â”œâ”€â”€ middleware/           # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ services/             # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ server.js             # æœåŠ¡å™¨å…¥å£ â­
â”‚   â””â”€â”€ package.json          # ä¾èµ–é…ç½®
â”‚
â”œâ”€â”€ frontend/                 # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/           # é¡µé¢ç»„ä»¶ï¼ˆ35ä¸ªï¼‰
â”‚   â”‚   â”œâ”€â”€ components/      # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/        # APIæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ store/           # å…¨å±€çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ App.jsx          # è·¯ç”±é…ç½® â­
â”‚   â”‚   â””â”€â”€ main.jsx         # åº”ç”¨å…¥å£ â­
â”‚   â””â”€â”€ package.json         # ä¾èµ–é…ç½®
â”‚
â””â”€â”€ [æ–‡æ¡£æ–‡ä»¶]
```

---

## ä¸‰ã€æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 3.1 ç”¨æˆ·ä¸æƒé™ç®¡ç†

**10ä¸ªè§’è‰²å®šä¹‰**ï¼š

| åºå· | è§’è‰² | è‹±æ–‡åç§° | ä¸»è¦èŒè´£ |
|-----|------|---------|---------|
| 1 | ç³»ç»Ÿç®¡ç†å‘˜ | Administrator | ç³»ç»Ÿé…ç½®ã€ç”¨æˆ·ç®¡ç†ã€æ•°æ®ç®¡ç† |
| 2 | é”€å”®ç»ç† | Sales Manager | åˆ›å»ºé¡¹ç›®ã€å®¢æˆ·å…³ç³»ç®¡ç†ã€èµ¢å•ç®¡ç† |
| 3 | æŠ€æœ¯å·¥ç¨‹å¸ˆ | Technical Engineer | æŠ€æœ¯é€‰å‹ã€æ–¹æ¡ˆè®¾è®¡ã€å‚æ•°è®¡ç®— |
| 4 | å•†åŠ¡å·¥ç¨‹å¸ˆ | Commercial Engineer | æŠ¥ä»·ã€åˆåŒç®¡ç†ã€ä»·æ ¼å®¡æ ¸ |
| 5 | é‡‡è´­ä¸“å‘˜ | Procurement Specialist | é‡‡è´­è®¢å•ã€ä¾›åº”å•†ç®¡ç† |
| 6 | ç”Ÿäº§è®¡åˆ’å‘˜ | Production Planner | ç”Ÿäº§æ’äº§ã€ç‰©æ–™è®¡åˆ’ã€BOMå±•å¼€ |
| 7 | è´¨æ£€å‘˜ | Quality Inspector | è´¨é‡æ£€éªŒã€æ£€éªŒæŠ¥å‘Š |
| 8 | ç‰©æµä¸“å‘˜ | Logistics Specialist | å‘è´§ç®¡ç†ã€ç‰©æµè·Ÿè¸ª |
| 9 | å”®åå·¥ç¨‹å¸ˆ | After-sales Engineer | å”®åæœåŠ¡ã€ç»´ä¿®å·¥å• |
| 10 | è½¦é—´å·¥äºº | Workshop Worker | ç”Ÿäº§ä½œä¸šã€å·¥å•æŠ¥å·¥ |

**æƒé™æ§åˆ¶æœºåˆ¶**ï¼š
- åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰
- è·¯ç”±çº§åˆ«æƒé™éªŒè¯
- æ•°æ®çº§åˆ«æƒé™è¿‡æ»¤
- æ“ä½œçº§åˆ«æƒé™æ£€æŸ¥

### 3.2 æ™ºèƒ½é€‰å‹å¼•æ“

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
1. å·¥å†µå‚æ•°è¾“å…¥ï¼ˆé˜€é—¨å°ºå¯¸ã€ä»‹è´¨å‹åŠ›ã€æ¸©åº¦ç­‰ï¼‰
2. æ‰­çŸ©è®¡ç®—ï¼ˆåŸºäºé˜€é—¨ç±»å‹å’Œå·¥å†µï¼‰
3. æ‰§è¡Œå™¨åŒ¹é…ï¼ˆæ‰­çŸ©è£•é‡15-25%ï¼‰
4. è‡ªåŠ¨é…ä»¶é€‰é…ï¼ˆç”µç£é˜€ã€é™ä½å¼€å…³ç­‰ï¼‰
5. é¢„ç®—è¿‡æ»¤ä¸ä¾›åº”å•†åŒ¹é…
6. ç”ŸæˆæŠ€æœ¯æ–¹æ¡ˆä¸BOM

**æ”¯æŒçš„æ‰§è¡Œå™¨ç³»åˆ—**ï¼š
- ATç³»åˆ—ï¼ˆå•ä½œç”¨æ°”åŠ¨æ‰§è¡Œå™¨ï¼‰
- GYç³»åˆ—ï¼ˆåŒä½œç”¨æ°”åŠ¨æ‰§è¡Œå™¨ï¼‰
- SFç³»åˆ—ï¼ˆå¼¹ç°§å¤ä½æ‰§è¡Œå™¨ï¼‰

**é€‰å‹ç®—æ³•**ï¼š
```javascript
// æ‰­çŸ©è®¡ç®—å…¬å¼
requiredTorque = coefficient Ã— valveSize Ã— pressure Ã— factor

// ç³»æ•°è¡¨
Ball Valve: 0.15
Butterfly Valve: 0.12
Gate Valve: 0.20

// å®‰å…¨è£•é‡
selectedTorque = requiredTorque Ã— (1.15 ~ 1.25)
```

### 3.3 é¡¹ç›®å…¨æµç¨‹ç®¡ç†

**ä¸šåŠ¡æµç¨‹å›¾**ï¼š

```
å”®å‰é˜¶æ®µ:
  åˆ›å»ºé¡¹ç›® â†’ æŠ€æœ¯é€‰å‹ â†’ å•†åŠ¡æŠ¥ä»· â†’ å®¢æˆ·ç¡®è®¤
       â†“
å”®ä¸­é˜¶æ®µ:
  èµ¢å• â†’ åˆåŒç­¾è®¢ â†’ å®¡æ ¸é€šè¿‡ â†’ ç”Ÿäº§è®¢å•
       â†“
ç”Ÿäº§é˜¶æ®µ:
  BOMå±•å¼€ â†’ é‡‡è´­ç‰©æ–™ â†’ ç”Ÿäº§åˆ¶é€  â†’ è´¨é‡æ£€éªŒ â†’ å…¥åº“
       â†“
äº¤ä»˜é˜¶æ®µ:
  è®¢å•å‘è´§ â†’ ç‰©æµè·Ÿè¸ª â†’ å®¢æˆ·ç­¾æ”¶ â†’ é¡¹ç›®å®Œæˆ
       â†“
å”®åé˜¶æ®µ:
  å”®åæœåŠ¡ â†’ å·¥å•ç®¡ç† â†’ é—®é¢˜è§£å†³ â†’ å·¥å•å…³é—­
```

**é¡¹ç›®çŠ¶æ€æµè½¬**ï¼š
- Leadï¼ˆçº¿ç´¢ï¼‰
- In Progressï¼ˆè¿›è¡Œä¸­ï¼‰
- Quotedï¼ˆå·²æŠ¥ä»·ï¼‰
- Wonï¼ˆèµ¢å•ï¼‰
- Contractï¼ˆåˆåŒç­¾è®¢ï¼‰
- Productionï¼ˆç”Ÿäº§ä¸­ï¼‰
- Completedï¼ˆå·²å®Œæˆï¼‰
- Lostï¼ˆä¸¢å•ï¼‰

### 3.4 BOMä¸ç‰©æ–™ç®¡ç†

**BOMå±•å¼€è§„åˆ™**ï¼š
```
é¡¹ç›®éœ€æ±‚
  â””â”€â”€ æŠ€æœ¯æ¸…å•
      â”œâ”€â”€ æ‰§è¡Œå™¨ä¸»æœºï¼ˆ1:1ï¼‰
      â”œâ”€â”€ æ ‡å‡†é…ä»¶ï¼ˆè‡ªåŠ¨å…³è”ï¼‰
      â”‚   â”œâ”€â”€ ç”µç£é˜€
      â”‚   â”œâ”€â”€ é™ä½å¼€å…³
      â”‚   â””â”€â”€ æ°”æºå¤„ç†å•å…ƒ
      â””â”€â”€ å¯é€‰é…ä»¶ï¼ˆæ‰‹åŠ¨é€‰æ‹©ï¼‰
          â”œâ”€â”€ æ‰‹è½®
          â”œâ”€â”€ é˜²æŠ¤ç½©
          â””â”€â”€ åŠ çƒ­è£…ç½®
```

**ç‰©æ–™çŠ¶æ€è¿½è¸ª**ï¼š
```
å¾…é‡‡è´­ â†’ å·²ä¸‹å• â†’ åœ¨é€” â†’ å·²åˆ°è´§ â†’ å·²å…¥åº“ â†’ å·²é¢†ç”¨ â†’ å·²æ¶ˆè€—
```

### 3.5 ç”Ÿäº§æ’äº§ç³»ç»Ÿï¼ˆAPSï¼‰

**æ’äº§ç­–ç•¥**ï¼š
- å·¥ä½œä¸­å¿ƒäº§èƒ½è®¡ç®—
- å·¥è‰ºè·¯çº¿è‡ªåŠ¨åˆ†é…
- ç´§æ€¥è®¢å•æ’å•å¤„ç†
- ç”˜ç‰¹å›¾å¯è§†åŒ–å±•ç¤º
- èµ„æºä¼˜åŒ–åˆ†é…

**å·¥ä½œä¸­å¿ƒç±»å‹**ï¼š
- è£…é…è½¦é—´
- æµ‹è¯•è½¦é—´
- åŒ…è£…è½¦é—´
- å–·æ¶‚è½¦é—´

**æ’äº§ç®—æ³•**ï¼š
```javascript
// äº§èƒ½è®¡ç®—
capacity = workCenterCapacity Ã— efficiency Ã— workingHours

// äº¤æœŸè®¡ç®—
deliveryDate = startDate + (totalQuantity / capacity) Ã— safetyFactor
```

### 3.6 è´¨é‡ç®¡ç†ç³»ç»Ÿ

**æ£€éªŒç±»å‹**ï¼š
- IQCï¼ˆæ¥æ–™æ£€éªŒï¼‰- åŸææ–™/å¤–è´­ä»¶
- IPQCï¼ˆè¿‡ç¨‹æ£€éªŒï¼‰- ç”Ÿäº§è¿‡ç¨‹
- FQCï¼ˆæˆå“æ£€éªŒï¼‰- æˆå“å‡ºåº“å‰
- OQCï¼ˆå‡ºå‚æ£€éªŒï¼‰- å‘è´§å‰æœ€åæ£€éªŒ

**æ£€éªŒæ ‡å‡†**ï¼š
- å¤–è§‚æ£€æŸ¥ï¼ˆåˆ’ç—•ã€é”ˆèš€ã€å˜å½¢ï¼‰
- å°ºå¯¸æµ‹é‡ï¼ˆå¡å°ºã€åƒåˆ†å°ºï¼‰
- åŠŸèƒ½æµ‹è¯•ï¼ˆå¼€å…³åŠ¨ä½œã€å“åº”æ—¶é—´ï¼‰
- æ°”å¯†æ€§æµ‹è¯•ï¼ˆå‹åŠ›ä¿æŒï¼‰
- è€å‹æµ‹è¯•ï¼ˆæœ€å¤§å·¥ä½œå‹åŠ›Ã—1.5å€ï¼‰

### 3.7 å”®åæœåŠ¡ç³»ç»Ÿ

**å·¥å•ç±»å‹**ï¼š
- ç»´ä¿®æœåŠ¡ï¼ˆäº§å“æ•…éšœç»´ä¿®ï¼‰
- äº§å“å’¨è¯¢ï¼ˆæŠ€æœ¯é—®é¢˜è§£ç­”ï¼‰
- æŠ€æœ¯åŸ¹è®­ï¼ˆæ“ä½œåŸ¹è®­ï¼‰
- å¤‡ä»¶æ›´æ¢ï¼ˆæ˜“æŸä»¶æ›´æ¢ï¼‰
- ç°åœºè°ƒè¯•ï¼ˆå®‰è£…è°ƒè¯•ï¼‰

**å·¥å•çŠ¶æ€**ï¼š
```
Openï¼ˆæ–°å»ºï¼‰â†’ In Progressï¼ˆå¤„ç†ä¸­ï¼‰â†’ Resolvedï¼ˆå·²è§£å†³ï¼‰â†’ Closedï¼ˆå·²å…³é—­ï¼‰
```

**ä¼˜å…ˆçº§**ï¼š
- Lowï¼ˆä½ï¼‰- 48å°æ—¶å“åº”
- Mediumï¼ˆä¸­ï¼‰- 24å°æ—¶å“åº”
- Highï¼ˆé«˜ï¼‰- 8å°æ—¶å“åº”
- Criticalï¼ˆç´§æ€¥ï¼‰- 2å°æ—¶å“åº”

---

## å››ã€ç³»ç»Ÿç‰¹è‰²åŠŸèƒ½

### 4.1 æ™ºèƒ½AIè¾…åŠ©
- è‡ªç„¶è¯­è¨€ç†è§£éœ€æ±‚
- è‡ªåŠ¨æ¨èæ‰§è¡Œå™¨å‹å·
- æ™ºèƒ½é…ä»¶åŒ¹é…
- å†å²æ•°æ®å­¦ä¹ 

### 4.2 å®æ—¶ååŒ
- WebSocketæ¨é€é€šçŸ¥
- å¤šç”¨æˆ·åŒæ—¶åœ¨çº¿
- ä»»åŠ¡çŠ¶æ€å®æ—¶åŒæ­¥
- èŠå¤©ä¸è¯„è®ºåŠŸèƒ½

### 4.3 æ•°æ®å¯è§†åŒ–
- ERPç»Ÿè®¡çœ‹æ¿
- ç”Ÿäº§è¿›åº¦ç”˜ç‰¹å›¾
- è´¢åŠ¡æŠ¥è¡¨åˆ†æ
- åº“å­˜å‘¨è½¬åˆ†æ
- é”€å”®æ¼æ–—å›¾

### 4.4 æ–‡ä»¶ç®¡ç†
- Excelæ‰¹é‡å¯¼å…¥
- PDFæŠ¥ä»·å•ç”Ÿæˆ
- åˆåŒæ–‡æ¡£ä¸Šä¼ 
- å›¾çº¸é™„ä»¶ç®¡ç†
- äº‘ç«¯å­˜å‚¨ï¼ˆLeanCloudï¼‰

---

## äº”ã€ç³»ç»Ÿå¯åŠ¨æŒ‡å—

### 5.1 ç¯å¢ƒè¦æ±‚

**è½¯ä»¶è¦æ±‚**ï¼š
- Node.js >= v16.0
- MongoDB >= v5.0
- npm >= v8.0

**ç¡¬ä»¶å»ºè®®**ï¼š
- CPU: 2æ ¸+
- å†…å­˜: 4GB+
- ç£ç›˜: 10GB+

### 5.2 å¿«é€Ÿå¯åŠ¨

**1. å®‰è£…MongoDB**ï¼š
```bash
# macOS
brew install mongodb-community
brew services start mongodb-community

# æˆ–ä½¿ç”¨æä¾›çš„è„šæœ¬
./å®‰è£…MongoDB.sh
```

**2. å®‰è£…ä¾èµ–**ï¼š
```bash
# åç«¯
cd backend
npm install

# å‰ç«¯
cd ../frontend
npm install
```

**3. é…ç½®ç¯å¢ƒå˜é‡**ï¼š
```bash
# åœ¨ backend ç›®å½•ä¸‹åˆ›å»º .env æ–‡ä»¶
NODE_ENV=development
PORT=5001
MONGODB_URI=mongodb://localhost:27017/project_ark
JWT_SECRET=your-secret-key-here-change-in-production
FRONTEND_URL=http://localhost:5173
```

**4. åˆå§‹åŒ–æµ‹è¯•æ•°æ®**ï¼š
```bash
cd backend
npm run seed:final
```

**5. å¯åŠ¨ç³»ç»Ÿ**ï¼š
```bash
# åç«¯ï¼ˆç»ˆç«¯1ï¼‰
cd backend
npm start

# å‰ç«¯ï¼ˆç»ˆç«¯2ï¼‰
cd frontend
npm run dev
```

**6. è®¿é—®ç³»ç»Ÿ**ï¼š
- å‰ç«¯åœ°å€ï¼šhttp://localhost:5173
- åç«¯APIï¼šhttp://localhost:5001
- å¥åº·æ£€æŸ¥ï¼šhttp://localhost:5001/api/health

### 5.3 æµ‹è¯•è´¦å·

| è§’è‰² | æ‰‹æœºå· | å¯†ç  | ç”¨é€” |
|------|--------|------|------|
| ç³»ç»Ÿç®¡ç†å‘˜ | 13000000001 | password | ç³»ç»Ÿç®¡ç† |
| é”€å”®ç»ç† | 13000000002 | password | é¡¹ç›®åˆ›å»º |
| æŠ€æœ¯å·¥ç¨‹å¸ˆ | 13000000003 | password | æŠ€æœ¯é€‰å‹ |
| å•†åŠ¡å·¥ç¨‹å¸ˆ | 13000000004 | password | æŠ¥ä»·åˆåŒ |
| é‡‡è´­ä¸“å‘˜ | 13000000005 | password | é‡‡è´­ç®¡ç† |
| ç”Ÿäº§è®¡åˆ’å‘˜ | 13000000006 | password | ç”Ÿäº§æ’äº§ |
| è´¨æ£€å‘˜ | 13000000007 | password | è´¨é‡æ£€éªŒ |
| ç‰©æµä¸“å‘˜ | 13000000008 | password | å‘è´§ç®¡ç† |
| å”®åå·¥ç¨‹å¸ˆ | 13000000009 | password | å”®åæœåŠ¡ |
| è½¦é—´å·¥äºº | 13000000010 | password | ç”Ÿäº§ä½œä¸š |

---

## å…­ã€æ€§èƒ½ä¸å®‰å…¨

### 6.1 æ€§èƒ½æŒ‡æ ‡

**æ•°æ®è§„æ¨¡æ”¯æŒ**ï¼š
- ç”¨æˆ·æ•°é‡ï¼š1000+
- é¡¹ç›®æ•°é‡ï¼š10000+
- äº§å“å‹å·ï¼š1000+
- å¹¶å‘ç”¨æˆ·ï¼š100+

**å“åº”æ—¶é—´**ï¼š
- APIå“åº”ï¼š< 200ms
- é¡µé¢åŠ è½½ï¼š< 2s
- é€‰å‹è®¡ç®—ï¼š< 500ms

### 6.2 å®‰å…¨æªæ–½

**è®¤è¯ä¸æˆæƒ**ï¼š
- âœ… JWTä»¤ç‰Œè®¤è¯
- âœ… HttpOnly Cookieå­˜å‚¨
- âœ… å¯†ç bcryptåŠ å¯†
- âœ… è§’è‰²æƒé™æ§åˆ¶

**å®‰å…¨é˜²æŠ¤**ï¼š
- âœ… HTTPSåŠ å¯†ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- âœ… XSSé˜²æŠ¤ï¼ˆHelmetï¼‰
- âœ… CSRFé˜²æŠ¤ï¼ˆSameSite Cookieï¼‰
- âœ… SQLæ³¨å…¥é˜²æŠ¤ï¼ˆMongoDB ODMï¼‰
- âœ… Rate Limitingï¼ˆ15åˆ†é’Ÿ200æ¬¡ï¼‰
- âœ… è¯·æ±‚ä½“å¤§å°é™åˆ¶ï¼ˆ10MBï¼‰

---

# ç¬¬äºŒéƒ¨åˆ†ï¼šæ•°æ®åº“æ¶æ„æŒ‡å—

## ä¸€ã€æ•°æ®åº“é…ç½®

### 1.1 åŸºæœ¬ä¿¡æ¯

**æ•°æ®åº“ç±»å‹**ï¼šMongoDB (NoSQL æ–‡æ¡£æ•°æ®åº“)  
**ç‰ˆæœ¬è¦æ±‚**ï¼š>= v5.0  
**é»˜è®¤ç«¯å£**ï¼š27017  
**æ•°æ®åº“åç§°**ï¼š
- ç”Ÿäº§ç¯å¢ƒï¼š`project_ark`
- æµ‹è¯•ç¯å¢ƒï¼š`project_ark_test`

### 1.2 è¿æ¥é…ç½®

**é…ç½®æ–‡ä»¶ä½ç½®**ï¼š`/backend/config/database.js`

**ç¯å¢ƒå˜é‡ï¼ˆ.envï¼‰**ï¼š
```bash
# ç”Ÿäº§/å¼€å‘ç¯å¢ƒ
MONGODB_URI=mongodb://localhost:27017/project_ark

# æµ‹è¯•ç¯å¢ƒ
MONGO_URI_TEST=mongodb://localhost:27017/project_ark_test
```

---

## äºŒã€æ•°æ®æ¨¡å‹è¯¦è§£ï¼ˆ21ä¸ªæ ¸å¿ƒæ¨¡å‹ï¼‰

### 2.1 ç”¨æˆ·ä¸è®¤è¯

#### User.js - ç”¨æˆ·æ¨¡å‹

**é›†åˆåç§°**ï¼š`users`

**å­—æ®µç»“æ„**ï¼š
```javascript
{
  username: String,              // ç”¨æˆ·å
  phone: String,                 // æ‰‹æœºå·ï¼ˆå”¯ä¸€ï¼Œç”¨äºç™»å½•ï¼‰
  email: String,                 // ç”µå­é‚®ä»¶
  password: String,              // åŠ å¯†å¯†ç ï¼ˆbcryptï¼‰
  role: String,                  // è§’è‰²ï¼ˆ10ç§ä¹‹ä¸€ï¼‰
  department: String,            // éƒ¨é—¨
  position: String,              // èŒä½
  avatar: String,                // å¤´åƒURL
  isActive: Boolean,             // æ˜¯å¦æ¿€æ´»
  passwordChangeRequired: Boolean, // æ˜¯å¦éœ€è¦ä¿®æ”¹å¯†ç 
  lastLogin: Date,               // æœ€åç™»å½•æ—¶é—´
  createdAt: Date,              // åˆ›å»ºæ—¶é—´
  updatedAt: Date               // æ›´æ–°æ—¶é—´
}
```

**ç´¢å¼•**ï¼š
- `phone`: unique
- `email`: unique

**è§’è‰²æšä¸¾**ï¼š
```javascript
[
  'Administrator',
  'Sales Manager',
  'Technical Engineer',
  'Commercial Engineer',
  'Procurement Specialist',
  'Production Planner',
  'Quality Inspector',
  'Logistics Specialist',
  'After-sales Engineer',
  'Workshop Worker'
]
```

#### RefreshToken.js - åˆ·æ–°ä»¤ç‰Œæ¨¡å‹

**é›†åˆåç§°**ï¼š`refreshtokens`

**å­—æ®µç»“æ„**ï¼š
```javascript
{
  user: ObjectId,               // å…³è”ç”¨æˆ·ID
  token: String,                // JWTåˆ·æ–°ä»¤ç‰Œ
  expiresAt: Date,             // è¿‡æœŸæ—¶é—´
  createdAt: Date              // åˆ›å»ºæ—¶é—´
}
```

---

### 2.2 äº§å“ä¸é€‰å‹

#### Actuator.js - æ‰§è¡Œå™¨æ¨¡å‹

**é›†åˆåç§°**ï¼š`actuators`

**å­—æ®µç»“æ„**ï¼š
```javascript
{
  series: String,               // ç³»åˆ—ï¼ˆAT/GY/SFï¼‰
  model: String,                // å‹å·ï¼ˆå¦‚ AT-150-DAï¼‰
  type: String,                 // ç±»å‹ï¼ˆå•ä½œç”¨/åŒä½œç”¨ï¼‰
  torque: Number,               // æ‰­çŸ©ï¼ˆNÂ·mï¼‰
  workingPressure: {            // å·¥ä½œå‹åŠ›èŒƒå›´
    min: Number,
    max: Number
  },
  applicableValveSize: {        // é€‚ç”¨é˜€é—¨å°ºå¯¸èŒƒå›´
    min: Number,
    max: Number
  },
  weight: Number,               // é‡é‡ï¼ˆkgï¼‰
  dimensions: {                 // å°ºå¯¸
    length: Number,
    width: Number,
    height: Number
  },
  operatingTemperature: {       // å·¥ä½œæ¸©åº¦èŒƒå›´
    min: Number,
    max: Number
  },
  material: {                   // æè´¨
    body: String,
    shaft: String,
    seal: String
  },
  specifications: Object,       // è¯¦ç»†è§„æ ¼
  features: [String],           // ç‰¹æ€§åˆ—è¡¨
  applications: [String],       // åº”ç”¨åœºæ™¯
  price: Number,                // ä»·æ ¼
  supplier: ObjectId,           // ä¾›åº”å•†ID
  leadTime: Number,             // äº¤è´§æœŸï¼ˆå¤©ï¼‰
  stock: Number,                // åº“å­˜æ•°é‡
  imageUrl: String,             // äº§å“å›¾ç‰‡
  pdfUrl: String,               // PDFè¯´æ˜ä¹¦
  isActive: Boolean,            // æ˜¯å¦åœ¨å”®
  createdAt: Date,
  updatedAt: Date
}
```

**ç´¢å¼•**ï¼š
- `model`: unique
- `series`: 1
- `type`: 1
- `torque`: 1

#### Accessory.js - é…ä»¶æ¨¡å‹

**é›†åˆåç§°**ï¼š`accessories`

**å­—æ®µç»“æ„**ï¼š
```javascript
{
  name: String,                 // é…ä»¶åç§°
  code: String,                 // é…ä»¶ç¼–ç ï¼ˆå”¯ä¸€ï¼‰
  category: String,             // ç±»åˆ«
  compatibleSeries: [String],   // å…¼å®¹ç³»åˆ—
  specifications: Object,       // è§„æ ¼å‚æ•°
  price: Number,                // å•ä»·
  supplier: ObjectId,           // ä¾›åº”å•†ID
  leadTime: Number,             // äº¤è´§æœŸ
  stock: Number,                // åº“å­˜
  isStandard: Boolean,          // æ˜¯å¦æ ‡å‡†é…ä»¶
  imageUrl: String,
  createdAt: Date,
  updatedAt: Date
}
```

**é…ä»¶ç±»åˆ«**ï¼š
- Solenoid Valveï¼ˆç”µç£é˜€ï¼‰
- Limit Switchï¼ˆé™ä½å¼€å…³ï¼‰
- Positionerï¼ˆå®šä½å™¨ï¼‰
- Air Filterï¼ˆæ°”æºå¤„ç†ï¼‰
- Hand Wheelï¼ˆæ‰‹è½®ï¼‰

---

### 2.3 é¡¹ç›®ä¸è®¢å•

#### NewProject.js - é¡¹ç›®æ¨¡å‹

**é›†åˆåç§°**ï¼š`newprojects`

**å­—æ®µç»“æ„**ï¼š
```javascript
{
  projectNumber: String,        // é¡¹ç›®ç¼–å·ï¼ˆPRJ-YYYYMM-XXXXï¼‰
  projectName: String,          // é¡¹ç›®åç§°
  customer: String,             // å®¢æˆ·åç§°
  industry: String,             // è¡Œä¸š
  budget: Number,               // é¢„ç®—
  status: String,               // çŠ¶æ€
  salesManager: ObjectId,       // é”€å”®ç»ç†ID
  technicalEngineer: ObjectId,  // æŠ€æœ¯å·¥ç¨‹å¸ˆID
  commercialEngineer: ObjectId, // å•†åŠ¡å·¥ç¨‹å¸ˆID
  
  // æŠ€æœ¯éœ€æ±‚
  technicalRequirements: [{
    tagNumber: String,          // ä½å·
    valveType: String,          // é˜€é—¨ç±»å‹
    valveSize: Number,          // é˜€é—¨å°ºå¯¸
    pressure: Number,           // å‹åŠ›
    temperature: Number,        // æ¸©åº¦
    quantity: Number,           // æ•°é‡
    selectedActuator: ObjectId, // é€‰å®šæ‰§è¡Œå™¨
    accessories: [ObjectId]     // é…ä»¶åˆ—è¡¨
  }],
  
  // æŠ¥ä»·ä¿¡æ¯
  quote: {
    items: [{
      product: ObjectId,
      quantity: Number,
      unitPrice: Number,
      totalPrice: Number
    }],
    totalAmount: Number,
    validUntil: Date,
    generatedBy: ObjectId,
    generatedAt: Date
  },
  
  // åˆåŒä¿¡æ¯
  contract: {
    contractNumber: String,
    signedDate: Date,
    deliveryDate: Date,
    paymentTerms: String,
    documents: [String]
  },
  
  productionOrder: ObjectId,    // å…³è”ç”Ÿäº§è®¢å•
  
  createdAt: Date,
  updatedAt: Date
}
```

**çŠ¶æ€æšä¸¾**ï¼š
```javascript
['Lead', 'In Progress', 'Quoted', 'Won', 'Lost', 
 'Contract', 'Production', 'Completed']
```

---

### 2.4 ç”Ÿäº§ä¸åˆ¶é€ 

#### ProductionOrder.js - ç”Ÿäº§è®¢å•æ¨¡å‹

**é›†åˆåç§°**ï¼š`productionorders`

**å­—æ®µç»“æ„**ï¼š
```javascript
{
  orderNumber: String,          // ç”Ÿäº§è®¢å•å·ï¼ˆPO-YYYYMM-XXXXï¼‰
  salesOrder: ObjectId,         // å…³è”é”€å”®è®¢å•
  project: ObjectId,            // å…³è”é¡¹ç›®
  
  // BOMæ¸…å•
  bom: [{
    item: ObjectId,             // ç‰©æ–™ID
    itemType: String,           // ç±»å‹ï¼ˆActuator/Accessoryï¼‰
    quantity: Number,
    requiredQuantity: Number,
    allocatedQuantity: Number,
    purchaseStatus: String      // é‡‡è´­çŠ¶æ€
  }],
  
  workOrders: [ObjectId],       // å…³è”å·¥å•ID
  
  status: String,               // Planning/Material/Production/QC/Completed
  priority: String,             // Low/Medium/High/Urgent
  plannedStartDate: Date,
  plannedEndDate: Date,
  actualStartDate: Date,
  actualEndDate: Date,
  progress: Number,             // è¿›åº¦ç™¾åˆ†æ¯”
  
  planner: ObjectId,            // ç”Ÿäº§è®¡åˆ’å‘˜
  createdAt: Date,
  updatedAt: Date
}
```

#### WorkOrder.js - å·¥å•æ¨¡å‹

**é›†åˆåç§°**ï¼š`workorders`

**å­—æ®µç»“æ„**ï¼š
```javascript
{
  workOrderNumber: String,      // å·¥å•å·ï¼ˆWO-YYYYMM-XXXXï¼‰
  productionOrder: ObjectId,    // å…³è”ç”Ÿäº§è®¢å•
  product: ObjectId,            // äº§å“
  quantity: Number,
  workCenter: ObjectId,         // å·¥ä½œä¸­å¿ƒ
  routing: ObjectId,            // å·¥è‰ºè·¯çº¿
  
  status: String,               // Pending/In Progress/Completed/Cancelled
  assignedTo: ObjectId,         // åˆ†é…ç»™ï¼ˆè½¦é—´å·¥äººï¼‰
  
  plannedStartTime: Date,
  plannedEndTime: Date,
  actualStartTime: Date,
  actualEndTime: Date,
  
  completedQuantity: Number,
  scrapQuantity: Number,
  
  notes: String,
  createdAt: Date,
  updatedAt: Date
}
```

---

### 2.5 é‡‡è´­ä¸ä¾›åº”å•†

#### PurchaseOrder.js - é‡‡è´­è®¢å•æ¨¡å‹

**é›†åˆåç§°**ï¼š`purchaseorders`

**å­—æ®µç»“æ„**ï¼š
```javascript
{
  poNumber: String,             // é‡‡è´­è®¢å•å·ï¼ˆPUR-YYYYMM-XXXXï¼‰
  supplier: ObjectId,           // ä¾›åº”å•†
  productionOrder: ObjectId,    // å…³è”ç”Ÿäº§è®¢å•
  
  items: [{
    item: ObjectId,
    itemType: String,           // Actuator/Accessory
    quantity: Number,
    unitPrice: Number,
    totalPrice: Number,
    receivedQuantity: Number
  }],
  
  totalAmount: Number,
  status: String,               // Draft/Sent/Confirmed/Partial/Received
  
  orderDate: Date,
  expectedDeliveryDate: Date,
  actualDeliveryDate: Date,
  
  paymentTerms: String,
  notes: String,
  
  createdBy: ObjectId,          // é‡‡è´­ä¸“å‘˜
  createdAt: Date,
  updatedAt: Date
}
```

#### Supplier.js - ä¾›åº”å•†æ¨¡å‹

**é›†åˆåç§°**ï¼š`suppliers`

**å­—æ®µç»“æ„**ï¼š
```javascript
{
  code: String,                 // ä¾›åº”å•†ç¼–ç ï¼ˆå”¯ä¸€ï¼‰
  name: String,                 // ä¾›åº”å•†åç§°
  category: String,             // ç±»åˆ«
  contact: {
    person: String,             // è”ç³»äºº
    phone: String,
    email: String,
    address: String
  },
  rating: Number,               // è¯„çº§ï¼ˆ1-5æ˜Ÿï¼‰
  paymentTerms: String,         // ä»˜æ¬¾æ¡æ¬¾
  leadTime: Number,             // é»˜è®¤äº¤è´§æœŸï¼ˆå¤©ï¼‰
  isActive: Boolean,
  createdAt: Date,
  updatedAt: Date
}
```

---

### 2.6 è´¨é‡ç®¡ç†

#### QualityCheck.js - è´¨æ£€æ¨¡å‹

**é›†åˆåç§°**ï¼š`qualitychecks`

**å­—æ®µç»“æ„**ï¼š
```javascript
{
  checkNumber: String,          // è´¨æ£€å•å·ï¼ˆQC-YYYYMM-XXXXï¼‰
  checkType: String,            // IQC/IPQC/FQC/OQC
  productionOrder: ObjectId,    // å…³è”ç”Ÿäº§è®¢å•
  product: ObjectId,            // äº§å“
  
  sampleSize: Number,           // æŠ½æ ·æ•°é‡
  defectCount: Number,          // ç¼ºé™·æ•°é‡
  
  checkItems: [{
    itemName: String,           // æ£€éªŒé¡¹
    standard: String,           // æ ‡å‡†
    actualValue: String,        // å®æµ‹å€¼
    result: String,             // Pass/Fail
    notes: String
  }],
  
  overallResult: String,        // Pass/Fail
  inspector: ObjectId,          // è´¨æ£€å‘˜
  checkDate: Date,
  
  images: [String],             // æ£€éªŒç…§ç‰‡
  documents: [String],          // æ£€éªŒæŠ¥å‘Š
  
  createdAt: Date,
  updatedAt: Date
}
```

---

### 2.7 å”®åæœåŠ¡

#### ServiceTicket.js - å”®åå·¥å•æ¨¡å‹

**é›†åˆåç§°**ï¼š`servicetickets`

**å­—æ®µç»“æ„**ï¼š
```javascript
{
  ticketNumber: String,         // å·¥å•å·ï¼ˆTK-YYYYMM-XXXXï¼‰
  type: String,                 // ç±»å‹ï¼ˆç»´ä¿®/å’¨è¯¢/åŸ¹è®­ï¼‰
  priority: String,             // Low/Medium/High/Critical
  
  customer: String,
  project: ObjectId,            // å…³è”é¡¹ç›®ï¼ˆå¯é€‰ï¼‰
  product: ObjectId,            // å…³è”äº§å“
  
  title: String,                // é—®é¢˜æ ‡é¢˜
  description: String,          // é—®é¢˜æè¿°
  
  status: String,               // Open/In Progress/Resolved/Closed
  
  assignedTo: ObjectId,         // å”®åå·¥ç¨‹å¸ˆ
  reportedBy: ObjectId,         // æŠ¥å‘Šäºº
  
  resolution: String,           // è§£å†³æ–¹æ¡ˆ
  
  activities: [{
    user: ObjectId,
    action: String,
    notes: String,
    timestamp: Date
  }],
  
  attachments: [String],        // é™„ä»¶
  
  createdAt: Date,
  updatedAt: Date,
  resolvedAt: Date,
  closedAt: Date
}
```

---

## ä¸‰ã€æ•°æ®å…³ç³»å›¾

```
User (ç”¨æˆ·)
  â”œâ”€â”€ NewProject (é¡¹ç›®) - salesManager, technicalEngineer
  â”œâ”€â”€ Quote (æŠ¥ä»·) - createdBy
  â”œâ”€â”€ ProductionOrder (ç”Ÿäº§è®¢å•) - planner
  â”œâ”€â”€ WorkOrder (å·¥å•) - assignedTo
  â”œâ”€â”€ PurchaseOrder (é‡‡è´­è®¢å•) - createdBy
  â””â”€â”€ ServiceTicket (å”®åå·¥å•) - assignedTo, reportedBy

NewProject (é¡¹ç›®)
  â”œâ”€â”€ Quote (æŠ¥ä»·) - ä¸€å¯¹ä¸€
  â”œâ”€â”€ SalesOrder (é”€å”®è®¢å•) - ä¸€å¯¹ä¸€
  â””â”€â”€ ProductionOrder (ç”Ÿäº§è®¢å•) - ä¸€å¯¹ä¸€

ProductionOrder (ç”Ÿäº§è®¢å•)
  â”œâ”€â”€ WorkOrder (å·¥å•) - ä¸€å¯¹å¤š
  â”œâ”€â”€ PurchaseOrder (é‡‡è´­è®¢å•) - ä¸€å¯¹å¤š
  â””â”€â”€ QualityCheck (è´¨æ£€) - ä¸€å¯¹å¤š

Actuator (æ‰§è¡Œå™¨)
  â”œâ”€â”€ Supplier (ä¾›åº”å•†) - å¤šå¯¹ä¸€
  â””â”€â”€ NewProject.technicalRequirements - å¤šå¯¹å¤š

Accessory (é…ä»¶)
  â”œâ”€â”€ Supplier (ä¾›åº”å•†) - å¤šå¯¹ä¸€
  â””â”€â”€ Actuator - å¤šå¯¹å¤šï¼ˆå…¼å®¹æ€§ï¼‰

Supplier (ä¾›åº”å•†)
  â”œâ”€â”€ PurchaseOrder (é‡‡è´­è®¢å•) - ä¸€å¯¹å¤š
  â”œâ”€â”€ Actuator - ä¸€å¯¹å¤š
  â””â”€â”€ Accessory - ä¸€å¯¹å¤š
```

---

## å››ã€æ•°æ®åˆå§‹åŒ–

### 4.1 ç§å­æ•°æ®è„šæœ¬

**ä½ç½®**ï¼š`/backend/`

**ä¸»è¦è„šæœ¬**ï¼š
```bash
seed_final_acceptance.js     # å®Œæ•´æµ‹è¯•æ•°æ®ï¼ˆæ¨èï¼‰â­
seed_at_gy_final.js          # AT/GYç³»åˆ—æ‰§è¡Œå™¨
seed_all_actuators_final.js  # æ‰€æœ‰æ‰§è¡Œå™¨å‹å·
seed.js                      # SFç³»åˆ—åŸºç¡€æ•°æ®
```

### 4.2 åˆå§‹åŒ–å‘½ä»¤

```bash
cd backend

# åˆå§‹åŒ–å®Œæ•´æµ‹è¯•æ•°æ®ï¼ˆåŒ…æ‹¬ç”¨æˆ·ã€äº§å“ã€é¡¹ç›®ï¼‰
npm run seed:final

# ä»…åˆå§‹åŒ–AT/GYæ‰§è¡Œå™¨
npm run seed:atgy:final

# åˆå§‹åŒ–SFç³»åˆ—ï¼ˆä¼šæ¸…ç©ºæ‰€æœ‰æ•°æ®ï¼‰
npm run seed
```

### 4.3 åˆå§‹åŒ–æ•°æ®å†…å®¹

**seed:final åŒ…å«**ï¼š
- âœ… 10ä¸ªæµ‹è¯•ç”¨æˆ·ï¼ˆè¦†ç›–æ‰€æœ‰è§’è‰²ï¼‰
- âœ… 5ä¸ªä¾›åº”å•†
- âœ… 55ä¸ªæ‰§è¡Œå™¨å‹å·ï¼ˆAT/GY/SFç³»åˆ—ï¼‰
- âœ… 8ä¸ªé…ä»¶
- âœ… 4ä¸ªæ‰‹åŠ¨æ“ä½œè£…ç½®
- âœ… 4ä¸ªç¤ºä¾‹é¡¹ç›®

---

## äº”ã€æ•°æ®å¤‡ä»½ä¸æ¢å¤

### 5.1 å¤‡ä»½æ•°æ®åº“

```bash
# å¤‡ä»½æ•´ä¸ªæ•°æ®åº“
mongodump --db project_ark --out ./backup/$(date +%Y%m%d)

# å¤‡ä»½æŒ‡å®šé›†åˆ
mongodump --db project_ark --collection users --out ./backup

# å‹ç¼©å¤‡ä»½
mongodump --db project_ark --archive=backup.gz --gzip
```

### 5.2 æ¢å¤æ•°æ®åº“

```bash
# æ¢å¤æ•´ä¸ªæ•°æ®åº“
mongorestore --db project_ark ./backup/20251029/project_ark

# æ¢å¤æŒ‡å®šé›†åˆ
mongorestore --db project_ark --collection users ./backup/project_ark/users.bson

# ä»å‹ç¼©æ–‡ä»¶æ¢å¤
mongorestore --db project_ark --archive=backup.gz --gzip
```

### 5.3 å¯¼å‡ºä¸ºJSON

```bash
# å¯¼å‡ºé›†åˆä¸ºJSON
mongoexport --db project_ark --collection users --out users.json --pretty

# å¯¼å…¥JSON
mongoimport --db project_ark --collection users --file users.json

# å¯¼å‡ºCSVæ ¼å¼
mongoexport --db project_ark --collection actuators --type=csv --fields model,series,torque,price --out actuators.csv
```

---

## å…­ã€æ•°æ®åº“ç›‘æ§ä¸ä¼˜åŒ–

### 6.1 æ€§èƒ½ç›‘æ§

```javascript
// è¿æ¥MongoDB
mongosh

// åˆ‡æ¢æ•°æ®åº“
use project_ark

// æŸ¥çœ‹é›†åˆåˆ—è¡¨
show collections

// æŸ¥çœ‹é›†åˆæ–‡æ¡£æ•°é‡
db.users.countDocuments()
db.actuators.countDocuments()
db.newprojects.countDocuments()

// æŸ¥çœ‹æ•°æ®åº“ç»Ÿè®¡
db.stats()

// æŸ¥çœ‹é›†åˆç»Ÿè®¡
db.actuators.stats()
```

### 6.2 ç´¢å¼•ä¼˜åŒ–

```javascript
// æŸ¥çœ‹ç´¢å¼•
db.users.getIndexes()

// åˆ›å»ºç´¢å¼•
db.newprojects.createIndex({ projectNumber: 1 }, { unique: true })
db.newprojects.createIndex({ status: 1, createdAt: -1 })

// åˆ†ææŸ¥è¯¢æ€§èƒ½
db.actuators.find({ series: "AT", torque: { $gte: 100 } }).explain("executionStats")

// åˆ é™¤æ— ç”¨ç´¢å¼•
db.users.dropIndex("email_1")
```

### 6.3 æ…¢æŸ¥è¯¢åˆ†æ

```javascript
// å¯ç”¨æ€§èƒ½åˆ†æ
db.setProfilingLevel(1, 100)  // è®°å½•>100msçš„æŸ¥è¯¢

// æŸ¥çœ‹æ…¢æŸ¥è¯¢
db.system.profile.find().sort({ ts: -1 }).limit(10)

// ç¦ç”¨æ€§èƒ½åˆ†æ
db.setProfilingLevel(0)
```

---

# ç¬¬ä¸‰éƒ¨åˆ†ï¼šä»£ç ç»“æ„æŒ‡å—

## ä¸€ã€åç«¯ä»£ç ç»“æ„

### 1.1 æœåŠ¡å™¨å…¥å£ (server.js)

**ä½ç½®**ï¼š`/backend/server.js`  
**ä»£ç è¡Œæ•°**ï¼š227è¡Œ

**ä¸»è¦åŠŸèƒ½**ï¼š
```javascript
// 1. åŠ è½½ç¯å¢ƒå˜é‡
require('dotenv').config();

// 2. åˆå§‹åŒ–Expressåº”ç”¨
const app = express();

// 3. è¿æ¥æ•°æ®åº“
connectDB();

// 4. é…ç½®å®‰å…¨ä¸­é—´ä»¶
app.use(helmet());
app.use(cors({ origin: process.env.FRONTEND_URL }));
app.use(cookieParser());
app.use(rateLimit());

// 5. Bodyè§£æ
app.use(express.json({ limit: '10mb' }));
app.use(express.urlencoded({ extended: true }));

// 6. é™æ€æ–‡ä»¶æœåŠ¡
app.use('/uploads', express.static('uploads'));

// 7. æ³¨å†Œè·¯ç”±
app.use('/api/auth', authRoutes);
app.use('/api/products', productRoutes);
// ... 28ä¸ªè·¯ç”±

// 8. é”™è¯¯å¤„ç†
app.use(errorHandler);

// 9. å¯åŠ¨æœåŠ¡å™¨
const httpServer = http.createServer(app);
initializeSocket(httpServer);
httpServer.listen(PORT);
```

---

### 1.2 è·¯ç”±å±‚ (routes/)

**ä½ç½®**ï¼š`/backend/routes/`  
**æ•°é‡**ï¼š28ä¸ªè·¯ç”±æ–‡ä»¶

#### æ ¸å¿ƒè·¯ç”±åˆ—è¡¨

| æ–‡ä»¶å | APIè·¯å¾„ | ä¸»è¦åŠŸèƒ½ | ä»£ç è¡Œæ•° |
|-------|---------|---------|---------|
| `authRoutes.js` | `/api/auth` | ç™»å½•ã€æ³¨å†Œã€ä¿®æ”¹å¯†ç  | ~100 |
| `newProjectRoutes.js` | `/api/new-projects` | é¡¹ç›®CRUD | ~150 |
| `selectionRoutes.js` | `/api/selection` | æ™ºèƒ½é€‰å‹å¼•æ“ | ~80 |
| `actuatorRoutes.js` | `/api/actuators` | æ‰§è¡Œå™¨æŸ¥è¯¢ | ~120 |
| `quoteRoutes.js` | `/api/quotes` | æŠ¥ä»·ç®¡ç† | ~130 |
| `contract.js` | `/api/contracts` | åˆåŒç®¡ç† | ~140 |
| `orderRoutes.js` | `/api/orders` | é”€å”®è®¢å• | ~110 |
| `productionRoutes.js` | `/api/production` | ç”Ÿäº§è®¢å• | ~160 |
| `purchaseOrderRoutes.js` | `/api/purchase-orders` | é‡‡è´­è®¢å• | ~150 |
| `mesRoutes.js` | `/api/mes` | åˆ¶é€ æ‰§è¡Œç³»ç»Ÿ | ~90 |
| `ticketRoutes.js` | `/api/tickets` | å”®åå·¥å• | ~120 |

**è·¯ç”±ç¤ºä¾‹**ï¼š
```javascript
// newProjectRoutes.js
const router = express.Router();

router.get('/', protect, getProjects);                    // è·å–åˆ—è¡¨
router.get('/:id', protect, getProjectById);             // è·å–è¯¦æƒ…
router.post('/', protect, authorize('Sales Manager'), createProject);  // åˆ›å»º
router.put('/:id', protect, updateProject);              // æ›´æ–°
router.delete('/:id', protect, deleteProject);           // åˆ é™¤

module.exports = router;
```

---

### 1.3 æ§åˆ¶å™¨å±‚ (controllers/)

**ä½ç½®**ï¼š`/backend/controllers/`  
**æ•°é‡**ï¼š28ä¸ªæ§åˆ¶å™¨æ–‡ä»¶

#### æ ¸å¿ƒæ§åˆ¶å™¨ä»£ç ç¤ºä¾‹

**selectionController.js** - æ™ºèƒ½é€‰å‹æ ¸å¿ƒ
```javascript
exports.selectActuator = async (req, res) => {
  try {
    const { valveType, valveSize, pressure, temperature, budget } = req.body;
    
    // 1. è®¡ç®—æ‰€éœ€æ‰­çŸ©
    const requiredTorque = calculateTorque(valveType, valveSize, pressure);
    
    // 2. åŒ¹é…æ‰§è¡Œå™¨ï¼ˆæ‰­çŸ©è£•é‡15-25%ï¼‰
    const minTorque = requiredTorque * 1.15;
    const maxTorque = requiredTorque * 1.25;
    
    const actuators = await Actuator.find({
      torque: { $gte: minTorque, $lte: maxTorque },
      isActive: true,
      price: { $lte: budget }
    }).populate('supplier').sort({ price: 1 });
    
    // 3. è‡ªåŠ¨é€‰é…é™„ä»¶
    const recommendations = [];
    for (let actuator of actuators) {
      const accessories = await Accessory.find({
        compatibleSeries: actuator.series,
        isStandard: true
      });
      
      const totalPrice = actuator.price + accessories.reduce((sum, acc) => sum + acc.price, 0);
      
      recommendations.push({
        actuator,
        accessories,
        totalPrice,
        matchScore: calculateMatchScore(actuator, requiredTorque),
        safetyFactor: (actuator.torque / requiredTorque).toFixed(2)
      });
    }
    
    // 4. æŒ‰åŒ¹é…åº¦æ’åº
    recommendations.sort((a, b) => b.matchScore - a.matchScore);
    
    res.json({
      success: true,
      data: {
        requiredTorque,
        recommendations
      }
    });
  } catch (error) {
    res.status(500).json({ success: false, message: error.message });
  }
};
```

**bomController.js** - BOMå±•å¼€
```javascript
exports.explodeBOM = async (req, res) => {
  try {
    const { projectId } = req.params;
    
    // 1. è·å–é¡¹ç›®æŠ€æœ¯éœ€æ±‚
    const project = await NewProject.findById(projectId);
    
    if (!project || !project.technicalRequirements) {
      return res.status(404).json({ message: 'é¡¹ç›®æˆ–æŠ€æœ¯éœ€æ±‚ä¸å­˜åœ¨' });
    }
    
    // 2. å±•å¼€BOM
    const bomItems = [];
    
    for (let req of project.technicalRequirements) {
      // æ‰§è¡Œå™¨ä¸»æœº
      const actuator = await Actuator.findById(req.selectedActuator);
      bomItems.push({
        item: actuator._id,
        itemType: 'Actuator',
        model: actuator.model,
        quantity: req.quantity,
        unitPrice: actuator.price,
        totalPrice: actuator.price * req.quantity
      });
      
      // æ ‡å‡†é…ä»¶
      const standardAccessories = await Accessory.find({
        compatibleSeries: actuator.series,
        isStandard: true
      });
      
      for (let accessory of standardAccessories) {
        bomItems.push({
          item: accessory._id,
          itemType: 'Accessory',
          model: accessory.code,
          quantity: req.quantity,
          unitPrice: accessory.price,
          totalPrice: accessory.price * req.quantity
        });
      }
      
      // å¯é€‰é…ä»¶
      if (req.accessories && req.accessories.length > 0) {
        const optionalAccessories = await Accessory.find({
          _id: { $in: req.accessories }
        });
        
        for (let accessory of optionalAccessories) {
          bomItems.push({
            item: accessory._id,
            itemType: 'Accessory',
            model: accessory.code,
            quantity: req.quantity,
            unitPrice: accessory.price,
            totalPrice: accessory.price * req.quantity
          });
        }
      }
    }
    
    // 3. è®¡ç®—æ€»ä»·
    const totalAmount = bomItems.reduce((sum, item) => sum + item.totalPrice, 0);
    
    res.json({
      success: true,
      data: {
        bom: bomItems,
        totalAmount
      }
    });
  } catch (error) {
    res.status(500).json({ success: false, message: error.message });
  }
};
```

---

### 1.4 ä¸­é—´ä»¶ (middleware/)

**ä½ç½®**ï¼š`/backend/middleware/`

#### auth.js - JWTè®¤è¯
```javascript
const jwt = require('jsonwebtoken');
const User = require('../models/User');

exports.protect = async (req, res, next) => {
  let token;
  
  // ä»Cookieæˆ–Headerè·å–token
  if (req.cookies.token) {
    token = req.cookies.token;
  } else if (req.headers.authorization?.startsWith('Bearer')) {
    token = req.headers.authorization.split(' ')[1];
  }
  
  if (!token) {
    return res.status(401).json({ message: 'æœªæˆæƒè®¿é—®ï¼Œè¯·å…ˆç™»å½•' });
  }
  
  try {
    // éªŒè¯token
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    
    // è·å–ç”¨æˆ·ä¿¡æ¯
    req.user = await User.findById(decoded.id).select('-password');
    
    if (!req.user) {
      return res.status(401).json({ message: 'ç”¨æˆ·ä¸å­˜åœ¨' });
    }
    
    next();
  } catch (error) {
    return res.status(401).json({ message: 'Tokenæ— æ•ˆæˆ–å·²è¿‡æœŸ' });
  }
};
```

#### authMiddleware.js - è§’è‰²æƒé™
```javascript
exports.authorize = (...roles) => {
  return (req, res, next) => {
    if (!req.user) {
      return res.status(401).json({ message: 'æœªæˆæƒè®¿é—®' });
    }
    
    if (!roles.includes(req.user.role)) {
      return res.status(403).json({ 
        message: `è§’è‰² ${req.user.role} æ— æƒæ‰§è¡Œæ­¤æ“ä½œ` 
      });
    }
    
    next();
  };
};

// ä½¿ç”¨ç¤ºä¾‹
router.post('/create', 
  protect, 
  authorize('Sales Manager', 'Administrator'), 
  createProject
);
```

#### upload.js - æ–‡ä»¶ä¸Šä¼ 
```javascript
const multer = require('multer');
const path = require('path');

// å­˜å‚¨é…ç½®
const storage = multer.diskStorage({
  destination: (req, file, cb) => {
    cb(null, 'uploads/');
  },
  filename: (req, file, cb) => {
    const uniqueName = `${Date.now()}-${Math.round(Math.random() * 1E9)}${path.extname(file.originalname)}`;
    cb(null, uniqueName);
  }
});

// æ–‡ä»¶ç±»å‹è¿‡æ»¤
const fileFilter = (req, file, cb) => {
  const allowedTypes = /jpeg|jpg|png|pdf|xlsx|xls|doc|docx/;
  const extname = allowedTypes.test(path.extname(file.originalname).toLowerCase());
  const mimetype = allowedTypes.test(file.mimetype);
  
  if (extname && mimetype) {
    cb(null, true);
  } else {
    cb(new Error('ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹'));
  }
};

const upload = multer({
  storage,
  fileFilter,
  limits: { fileSize: 10 * 1024 * 1024 }  // 10MBé™åˆ¶
});

module.exports = upload;
```

---

### 1.5 æœåŠ¡å±‚ (services/)

**ä½ç½®**ï¼š`/backend/services/`

#### aps.service.js - é«˜çº§æ’äº§æœåŠ¡
```javascript
class APSService {
  // ç”Ÿæˆæ’äº§è®¡åˆ’
  async generateSchedule(productionOrder) {
    try {
      // 1. è·å–å·¥ä½œä¸­å¿ƒ
      const workCenters = await WorkCenter.find({ status: 'Active' });
      
      // 2. è·å–å·¥è‰ºè·¯çº¿
      const routings = await Routing.find({
        product: { $in: productionOrder.bom.map(item => item.item) }
      }).populate('operations.workCenter');
      
      // 3. è®¡ç®—äº§èƒ½
      const capacity = this.calculateCapacity(workCenters);
      
      // 4. åˆ†é…å·¥å•
      const workOrders = [];
      for (let bomItem of productionOrder.bom) {
        const routing = routings.find(r => r.product.equals(bomItem.item));
        
        if (routing) {
          for (let operation of routing.operations) {
            const workOrder = {
              productionOrder: productionOrder._id,
              product: bomItem.item,
              quantity: bomItem.quantity,
              workCenter: operation.workCenter._id,
              operation: operation.operationName,
              plannedDuration: operation.runTime * bomItem.quantity
            };
            
            workOrders.push(workOrder);
          }
        }
      }
      
      // 5. ä¼˜åŒ–æ’äº§é¡ºåº
      const optimizedSchedule = this.optimizeSchedule(workOrders, capacity);
      
      return optimizedSchedule;
    } catch (error) {
      throw new Error(`æ’äº§è®¡åˆ’ç”Ÿæˆå¤±è´¥: ${error.message}`);
    }
  }
  
  // è®¡ç®—å·¥ä½œä¸­å¿ƒäº§èƒ½
  calculateCapacity(workCenters) {
    return workCenters.map(wc => ({
      workCenter: wc._id,
      dailyCapacity: wc.capacity * wc.efficiency / 100,
      availableHours: 8 * 60  // 480åˆ†é’Ÿ
    }));
  }
  
  // ä¼˜åŒ–æ’äº§é¡ºåº
  optimizeSchedule(workOrders, capacity) {
    // ç®€å•çš„FIFOç­–ç•¥
    return workOrders.sort((a, b) => {
      // ä¼˜å…ˆçº§æ’åº
      if (a.priority !== b.priority) {
        const priorityOrder = { 'Urgent': 1, 'High': 2, 'Medium': 3, 'Low': 4 };
        return priorityOrder[a.priority] - priorityOrder[b.priority];
      }
      // è®¡åˆ’å¼€å§‹æ—¶é—´æ’åº
      return a.plannedStartDate - b.plannedStartDate;
    });
  }
}

module.exports = new APSService();
```

#### socketService.js - WebSocketæœåŠ¡
```javascript
const socketIO = require('socket.io');

let io;

exports.initializeSocket = (httpServer) => {
  io = socketIO(httpServer, {
    cors: {
      origin: process.env.FRONTEND_URL || 'http://localhost:5173',
      credentials: true
    }
  });
  
  io.on('connection', (socket) => {
    console.log(`ğŸ”Œ ç”¨æˆ·è¿æ¥: ${socket.id}`);
    
    // ç”¨æˆ·åŠ å…¥æˆ¿é—´
    socket.on('join', (userId) => {
      socket.join(`user_${userId}`);
      console.log(`ğŸ‘¤ ç”¨æˆ· ${userId} åŠ å…¥æˆ¿é—´`);
    });
    
    // é¡¹ç›®æˆ¿é—´
    socket.on('joinProject', (projectId) => {
      socket.join(`project_${projectId}`);
    });
    
    // æ–­å¼€è¿æ¥
    socket.on('disconnect', () => {
      console.log(`âŒ ç”¨æˆ·æ–­å¼€: ${socket.id}`);
    });
  });
  
  return io;
};

// å‘é€é€šçŸ¥ç»™ç”¨æˆ·
exports.sendNotification = (userId, notification) => {
  if (io) {
    io.to(`user_${userId}`).emit('notification', notification);
  }
};

// å¹¿æ’­é¡¹ç›®æ›´æ–°
exports.broadcastProjectUpdate = (projectId, update) => {
  if (io) {
    io.to(`project_${projectId}`).emit('projectUpdate', update);
  }
};

// è·å–IOå®ä¾‹
exports.getIO = () => io;
```

---

## äºŒã€å‰ç«¯ä»£ç ç»“æ„

### 2.1 åº”ç”¨å…¥å£

**main.jsx** - Reactåº”ç”¨å…¥å£
```javascript
import React from 'react'
import ReactDOM from 'react-dom/client'
import { BrowserRouter } from 'react-router-dom'
import { ConfigProvider } from 'antd'
import zhCN from 'antd/locale/zh_CN'
import App from './App'
import './index.css'

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <BrowserRouter>
      <ConfigProvider locale={zhCN}>
        <App />
      </ConfigProvider>
    </BrowserRouter>
  </React.StrictMode>
)
```

**App.jsx** - è·¯ç”±é…ç½® (178è¡Œ)
```javascript
import { Routes, Route, Navigate } from 'react-router-dom'
import { lazy, Suspense } from 'react'
import { Spin } from 'antd'
import { useAuthStore } from './store/authStore'
import AttioLayout from './components/Layout/AttioLayout'

// æ‡’åŠ è½½é¡µé¢ç»„ä»¶
const Login = lazy(() => import('./pages/Login'))
const Dashboard = lazy(() => import('./pages/Dashboard'))
const ProjectDashboard = lazy(() => import('./pages/ProjectDashboard'))
// ... æ›´å¤šé¡µé¢

// å—ä¿æŠ¤è·¯ç”±ç»„ä»¶
const ProtectedRoute = ({ children, requiredRole, requiredRoles }) => {
  const { user, isAuthenticated } = useAuthStore()
  
  if (!isAuthenticated) {
    return <Navigate to="/login" replace />
  }
  
  // æ£€æŸ¥å¼ºåˆ¶ä¿®æ”¹å¯†ç 
  if (user?.passwordChangeRequired) {
    return <Navigate to="/change-password" replace />
  }
  
  // è§’è‰²éªŒè¯
  if (requiredRole && user?.role !== requiredRole) {
    return <Navigate to="/" replace />
  }
  
  if (requiredRoles && !requiredRoles.includes(user?.role)) {
    return <Navigate to="/" replace />
  }
  
  return children
}

function App() {
  return (
    <Suspense fallback={<Spin size="large" />}>
      <Routes>
        <Route path="/login" element={<Login />} />
        
        <Route path="/" element={
          <ProtectedRoute>
            <AttioLayout />
          </ProtectedRoute>
        }>
          <Route index element={<Dashboard />} />
          <Route path="projects" element={<ProjectDashboard />} />
          <Route path="selection-engine" element={<SelectionEngine />} />
          {/* æ›´å¤šè·¯ç”±... */}
        </Route>
      </Routes>
    </Suspense>
  )
}
```

---

### 2.2 é¡µé¢ç»„ä»¶ (pages/)

**ä½ç½®**ï¼š`/frontend/src/pages/`  
**æ•°é‡**ï¼š35ä¸ªé¡µé¢ç»„ä»¶

#### æ ¸å¿ƒé¡µé¢åˆ—è¡¨

| æ–‡ä»¶å | è·¯ç”± | åŠŸèƒ½ | ä»£ç è¡Œæ•° | æƒé™ |
|-------|------|------|---------|------|
| `Login.jsx` | `/login` | ç™»å½•é¡µ | 137 | å…¬å¼€ |
| `Dashboard.jsx` | `/dashboard` | å·¥ä½œå° | 300+ | æ‰€æœ‰è§’è‰² |
| `ProjectDashboard.jsx` | `/projects` | é¡¹ç›®åˆ—è¡¨ | 500+ | é”€å”®/æŠ€æœ¯/å•†åŠ¡ |
| `ProjectDetails.jsx` | `/projects/:id` | é¡¹ç›®è¯¦æƒ… | 1000+ | é¡¹ç›®å‚ä¸è€… |
| `SelectionEngine.jsx` | `/selection-engine` | æ™ºèƒ½é€‰å‹ | 800+ | æŠ€æœ¯å·¥ç¨‹å¸ˆ |
| `ProductCatalog.jsx` | `/product-catalog` | äº§å“ç›®å½• | 497 | é”€å”®ç»ç† |
| `OrderManagement.jsx` | `/orders` | ç”Ÿäº§è®¢å• | 600+ | ç”Ÿäº§/å•†åŠ¡ |
| `ProductionSchedule.jsx` | `/production-schedule` | ç”Ÿäº§æ’äº§ | 700+ | ç”Ÿäº§è®¡åˆ’å‘˜ |
| `ServiceCenter.jsx` | `/service-center` | å”®åä¸­å¿ƒ | 500+ | å”®åå·¥ç¨‹å¸ˆ |
| `ERPDashboard.jsx` | `/erp-dashboard` | ERPçœ‹æ¿ | 600+ | ç®¡ç†å±‚ |

---

### 2.3 æœåŠ¡å±‚ (services/)

**ä½ç½®**ï¼š`/frontend/src/services/`

#### api.js - APIå°è£… (300+è¡Œ)
```javascript
import axios from 'axios'
import { message } from 'antd'

const API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:5001/api'

// åˆ›å»ºaxioså®ä¾‹
const api = axios.create({
  baseURL: API_BASE_URL,
  withCredentials: true,
  timeout: 30000,
  headers: {
    'Content-Type': 'application/json'
  }
})

// è¯·æ±‚æ‹¦æˆªå™¨
api.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('token')
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    
    // æ˜¾ç¤ºåŠ è½½æç¤º
    config.metadata = { startTime: new Date() }
    
    return config
  },
  (error) => {
    return Promise.reject(error)
  }
)

// å“åº”æ‹¦æˆªå™¨
api.interceptors.response.use(
  (response) => {
    // è®¡ç®—è¯·æ±‚æ—¶é—´
    const endTime = new Date()
    const duration = endTime - response.config.metadata.startTime
    console.log(`â±ï¸ API ${response.config.url}: ${duration}ms`)
    
    return response
  },
  (error) => {
    if (error.response) {
      switch (error.response.status) {
        case 401:
          message.error('æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•')
          localStorage.removeItem('token')
          window.location.href = '/login'
          break
        case 403:
          message.error('æƒé™ä¸è¶³')
          break
        case 404:
          message.error('è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨')
          break
        case 500:
          message.error('æœåŠ¡å™¨é”™è¯¯')
          break
        default:
          message.error(error.response.data?.message || 'è¯·æ±‚å¤±è´¥')
      }
    } else if (error.request) {
      message.error('ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥')
    }
    
    return Promise.reject(error)
  }
)

// APIæ–¹æ³•å°è£…
export const authAPI = {
  login: (credentials) => api.post('/auth/login', credentials),
  logout: () => api.post('/auth/logout'),
  changePassword: (data) => api.post('/auth/change-password', data)
}

export const projectAPI = {
  getAll: (params) => api.get('/new-projects', { params }),
  getById: (id) => api.get(`/new-projects/${id}`),
  create: (data) => api.post('/new-projects', data),
  update: (id, data) => api.put(`/new-projects/${id}`, data),
  delete: (id) => api.delete(`/new-projects/${id}`)
}

export const selectionAPI = {
  selectActuator: (data) => api.post('/selection/select-actuator', data),
  getActuators: (params) => api.get('/actuators', { params })
}

export default api
```

---

### 2.4 çŠ¶æ€ç®¡ç† (store/)

**ä½ç½®**ï¼š`/frontend/src/store/`

#### authStore.js - è®¤è¯çŠ¶æ€
```javascript
import { create } from 'zustand'
import { persist } from 'zustand/middleware'

export const useAuthStore = create(
  persist(
    (set, get) => ({
      user: null,
      token: null,
      isAuthenticated: false,
      
      // ç™»å½•
      login: (user, token) => {
        localStorage.setItem('token', token)
        set({ 
          user, 
          token, 
          isAuthenticated: true 
        })
      },
      
      // ç™»å‡º
      logout: () => {
        localStorage.removeItem('token')
        set({ 
          user: null, 
          token: null, 
          isAuthenticated: false 
        })
      },
      
      // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
      updateUser: (userData) => {
        set({ user: { ...get().user, ...userData } })
      },
      
      // æ£€æŸ¥è®¤è¯çŠ¶æ€
      checkAuth: () => {
        const token = localStorage.getItem('token')
        if (token) {
          set({ isAuthenticated: true })
          return true
        }
        return false
      }
    }),
    {
      name: 'auth-storage',
      partialize: (state) => ({ 
        user: state.user, 
        isAuthenticated: state.isAuthenticated 
      })
    }
  )
)
```

---

## ä¸‰ã€å…³é”®ä»£ç æ–‡ä»¶ç´¢å¼•

### 3.1 åç«¯æ ¸å¿ƒæ–‡ä»¶

| åŠŸèƒ½æ¨¡å— | æ–‡ä»¶è·¯å¾„ | ä»£ç è¡Œæ•° | å…³é”®æŠ€æœ¯ |
|---------|---------|---------|---------|
| æœåŠ¡å™¨å…¥å£ | `server.js` | 227 | Express, Socket.IO |
| æ•°æ®åº“é…ç½® | `config/database.js` | 36 | Mongoose |
| æ™ºèƒ½é€‰å‹ | `controllers/selectionController.js` | 500+ | æ‰­çŸ©è®¡ç®—ç®—æ³• |
| BOMå±•å¼€ | `controllers/bomController.js` | 300+ | é€’å½’å±•å¼€ |
| ç”Ÿäº§æ’äº§ | `services/aps.service.js` | 400+ | APSç®—æ³• |
| JWTè®¤è¯ | `middleware/auth.js` | 150 | JWTéªŒè¯ |
| WebSocket | `services/socketService.js` | 200 | Socket.IO |

### 3.2 å‰ç«¯æ ¸å¿ƒæ–‡ä»¶

| åŠŸèƒ½æ¨¡å— | æ–‡ä»¶è·¯å¾„ | ä»£ç è¡Œæ•° | å…³é”®æŠ€æœ¯ |
|---------|---------|---------|---------|
| è·¯ç”±é…ç½® | `App.jsx` | 178 | React Router |
| APIæœåŠ¡ | `services/api.js` | 300+ | Axiosæ‹¦æˆªå™¨ |
| è®¤è¯çŠ¶æ€ | `store/authStore.js` | 100 | ZustandæŒä¹…åŒ– |
| é¡¹ç›®è¯¦æƒ… | `pages/ProjectDetails.jsx` | 1000+ | å¤æ‚çŠ¶æ€ç®¡ç† |
| æ™ºèƒ½é€‰å‹ | `pages/SelectionEngine.jsx` | 800+ | è¡¨å•éªŒè¯ |
| äº§å“ç›®å½• | `pages/ProductCatalog.jsx` | 497 | è¡¨æ ¼ç»„ä»¶ |

---

## å››ã€å¼€å‘è§„èŒƒ

### 4.1 å‘½åè§„èŒƒ

**åç«¯**ï¼š
```javascript
// æ–‡ä»¶åï¼šcamelCase
userController.js
projectService.js

// ç±»åï¼šPascalCase
class User {}
class ProductionOrder {}

// å‡½æ•°åï¼šcamelCase
async function createProject() {}

// å¸¸é‡ï¼šUPPER_SNAKE_CASE
const JWT_SECRET = process.env.JWT_SECRET
const MAX_FILE_SIZE = 10 * 1024 * 1024
```

**å‰ç«¯**ï¼š
```javascript
// ç»„ä»¶æ–‡ä»¶ï¼šPascalCase
Dashboard.jsx
ProjectDetails.jsx

// å·¥å…·å‡½æ•°ï¼šcamelCase
formatDate.js
calculateTotal.js

// CSSæ–‡ä»¶ï¼škebab-case
global-styles.css
project-details.css

// å¸¸é‡ï¼šUPPER_SNAKE_CASE
const API_BASE_URL = 'http://localhost:5001/api'
```

### 4.2 ä»£ç æ³¨é‡Š

```javascript
/**
 * è®¡ç®—é˜€é—¨æ‰€éœ€æ‰­çŸ©
 * @param {String} valveType - é˜€é—¨ç±»å‹ï¼ˆBall Valve/Butterfly Valve/Gate Valveï¼‰
 * @param {Number} valveSize - é˜€é—¨å°ºå¯¸ï¼ˆè‹±å¯¸ï¼‰
 * @param {Number} pressure - å·¥ä½œå‹åŠ›ï¼ˆMPaï¼‰
 * @returns {Number} æ‰€éœ€æ‰­çŸ©ï¼ˆNÂ·mï¼‰
 * @example
 * calculateTorque('Ball Valve', 4, 1.6) // returns 9.6
 */
function calculateTorque(valveType, valveSize, pressure) {
  const coefficients = {
    'Ball Valve': 0.15,
    'Butterfly Valve': 0.12,
    'Gate Valve': 0.20
  }
  
  const coefficient = coefficients[valveType] || 0.15
  return coefficient * valveSize * pressure * 12.5
}
```

### 4.3 é”™è¯¯å¤„ç†

```javascript
// åç«¯é”™è¯¯å¤„ç†
try {
  const project = await NewProject.findById(projectId)
  if (!project) {
    return res.status(404).json({ 
      success: false, 
      message: 'é¡¹ç›®ä¸å­˜åœ¨' 
    })
  }
  
  // ä¸šåŠ¡é€»è¾‘...
  
  res.json({ success: true, data: project })
} catch (error) {
  console.error('è·å–é¡¹ç›®å¤±è´¥:', error)
  res.status(500).json({ 
    success: false, 
    message: 'æœåŠ¡å™¨é”™è¯¯',
    error: process.env.NODE_ENV === 'development' ? error.message : undefined
  })
}

// å‰ç«¯é”™è¯¯å¤„ç†
try {
  const response = await projectAPI.getById(id)
  setProject(response.data.data)
} catch (error) {
  message.error(error.response?.data?.message || 'è·å–é¡¹ç›®å¤±è´¥')
}
```

---

# ç¬¬å››éƒ¨åˆ†ï¼šAPIæ¥å£å‚è€ƒ

## ä¸€ã€APIåŸºç¡€ä¿¡æ¯

**åŸºç¡€URL**ï¼š`http://localhost:5001/api`  
**è®¤è¯æ–¹å¼**ï¼šJWT Token (Bearer Token æˆ– HttpOnly Cookie)  
**æ•°æ®æ ¼å¼**ï¼šJSON  
**å­—ç¬¦ç¼–ç **ï¼šUTF-8  
**Rate Limiting**ï¼š200æ¬¡/15åˆ†é’Ÿï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

---

## äºŒã€è®¤è¯ API

### 2.1 POST `/api/auth/login`
ç”¨æˆ·ç™»å½•

**è¯·æ±‚ä½“**ï¼š
```json
{
  "phone": "13800138000",
  "password": "SecurePassword123!"
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "message": "ç™»å½•æˆåŠŸ",
  "user": {
    "_id": "507f1f77bcf86cd799439011",
    "username": "å¼ ä¸‰",
    "phone": "13800138000",
    "role": "Sales Manager"
  },
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

### 2.2 POST `/api/auth/logout`
ç”¨æˆ·ç™»å‡º

**è¯·æ±‚å¤´**ï¼š
```
Authorization: Bearer <token>
```

### 2.3 POST `/api/auth/change-password`
ä¿®æ”¹å¯†ç 

**è¯·æ±‚ä½“**ï¼š
```json
{
  "currentPassword": "OldPassword123!",
  "newPassword": "NewPassword456!"
}
```

---

## ä¸‰ã€é¡¹ç›®ç®¡ç† API

### 3.1 GET `/api/new-projects`
è·å–é¡¹ç›®åˆ—è¡¨

**è¯·æ±‚å‚æ•°**ï¼š
```
?status=In Progress
&page=1
&limit=10
&sort=-createdAt
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": [
    {
      "_id": "507f...",
      "projectNumber": "PRJ-202510-0001",
      "projectName": "ä¸Šæµ·çŸ³åŒ–é˜€é—¨è‡ªåŠ¨åŒ–é¡¹ç›®",
      "customer": "ä¸Šæµ·çŸ³åŒ–é›†å›¢",
      "status": "In Progress",
      "budget": 500000
    }
  ],
  "pagination": {
    "total": 25,
    "page": 1,
    "pages": 3
  }
}
```

### 3.2 POST `/api/new-projects`
åˆ›å»ºé¡¹ç›®

**æƒé™**ï¼šSales Manager

**è¯·æ±‚ä½“**ï¼š
```json
{
  "projectName": "å¤©æ´¥é’¢é“å‚é˜€é—¨è‡ªåŠ¨åŒ–é¡¹ç›®",
  "customer": "å¤©æ´¥é’¢é“é›†å›¢",
  "industry": "Manufacturing",
  "budget": 600000,
  "technicalEngineer": "507f..."
}
```

---

## å››ã€æ™ºèƒ½é€‰å‹ API

### 4.1 POST `/api/selection/select-actuator`
æ™ºèƒ½é€‰å‹å¼•æ“

**è¯·æ±‚ä½“**ï¼š
```json
{
  "valveType": "Ball Valve",
  "valveSize": 4,
  "pressure": 1.6,
  "temperature": 80,
  "budget": 5000
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": {
    "requiredTorque": 120,
    "recommendations": [
      {
        "actuator": {
          "model": "AT-150-DA",
          "series": "AT",
          "torque": 150,
          "price": 3800
        },
        "accessories": [
          {
            "name": "ç”µç£é˜€",
            "code": "SOV-01",
            "price": 450
          }
        ],
        "totalPrice": 4250,
        "matchScore": 95,
        "safetyFactor": 1.25
      }
    ]
  }
}
```

---

## äº”ã€ç”Ÿäº§ç®¡ç† API

### 5.1 POST `/api/production`
åˆ›å»ºç”Ÿäº§è®¢å•

**æƒé™**ï¼šProduction Planner

**è¯·æ±‚ä½“**ï¼š
```json
{
  "salesOrder": "507f...",
  "project": "507f...",
  "plannedStartDate": "2025-11-01",
  "plannedEndDate": "2025-12-15",
  "priority": "High"
}
```

### 5.2 GET `/api/production/:id/bom`
è·å–BOMæ¸…å•

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": {
    "bom": [
      {
        "item": {
          "model": "AT-150-DA",
          "name": "ATç³»åˆ—åŒä½œç”¨æ‰§è¡Œå™¨"
        },
        "itemType": "Actuator",
        "requiredQuantity": 10,
        "allocatedQuantity": 5,
        "purchaseStatus": "In Progress"
      }
    ]
  }
}
```

---

## å…­ã€é‡‡è´­ç®¡ç† API

### 6.1 POST `/api/purchase-orders`
åˆ›å»ºé‡‡è´­è®¢å•

**æƒé™**ï¼šProcurement Specialist

**è¯·æ±‚ä½“**ï¼š
```json
{
  "supplier": "507f...",
  "productionOrder": "507f...",
  "items": [
    {
      "item": "507f...",
      "itemType": "Actuator",
      "quantity": 10,
      "unitPrice": 3500
    }
  ],
  "expectedDeliveryDate": "2025-11-15"
}
```

---

## ä¸ƒã€å”®åæœåŠ¡ API

### 7.1 POST `/api/tickets`
åˆ›å»ºå”®åå·¥å•

**è¯·æ±‚ä½“**ï¼š
```json
{
  "type": "Repair",
  "priority": "High",
  "customer": "ä¸Šæµ·çŸ³åŒ–é›†å›¢",
  "title": "æ‰§è¡Œå™¨å¼‚å¸¸å™ªéŸ³",
  "description": "V-101ä½å·æ‰§è¡Œå™¨è¿è¡Œæ—¶æœ‰å¼‚å¸¸å™ªéŸ³",
  "assignedTo": "507f..."
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": {
    "_id": "...",
    "ticketNumber": "TK-202510-0001",
    "status": "Open"
  }
}
```

---

## å…«ã€é”™è¯¯å“åº”æ ¼å¼

### æ ‡å‡†é”™è¯¯å“åº”

```json
{
  "success": false,
  "message": "é”™è¯¯æè¿°",
  "error": {
    "code": "ERROR_CODE",
    "details": "è¯¦ç»†é”™è¯¯ä¿¡æ¯"
  }
}
```

### å¸¸è§é”™è¯¯ç 

| çŠ¶æ€ç  | é”™è¯¯ä»£ç  | è¯´æ˜ |
|-------|---------|------|
| 400 | BAD_REQUEST | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | UNAUTHORIZED | æœªæˆæƒè®¿é—® |
| 403 | FORBIDDEN | æƒé™ä¸è¶³ |
| 404 | NOT_FOUND | èµ„æºä¸å­˜åœ¨ |
| 409 | CONFLICT | èµ„æºå†²çª |
| 422 | VALIDATION_ERROR | æ•°æ®éªŒè¯å¤±è´¥ |
| 500 | INTERNAL_ERROR | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

---

# ç¬¬äº”éƒ¨åˆ†ï¼šæ•°æ®å¯¼å…¥æŒ‡å—

## ä¸€ã€AT/GY ç³»åˆ—æ‰§è¡Œå™¨å¯¼å…¥

### 1.1 æ¦‚è¿°

`seed_at_gy_final.js` æ˜¯ä¸“é—¨ç”¨äºå¯¼å…¥ AT å’Œ GY ç³»åˆ—é½¿è½®é½¿æ¡å¼æ‰§è¡Œæœºæ„æ•°æ®çš„è„šæœ¬ã€‚é‡‡ç”¨**æ™ºèƒ½æ›´æ–°ç­–ç•¥**ï¼Œä¸ä¼šåˆ é™¤ç°æœ‰çš„ SF ç³»åˆ—æ•°æ®ã€‚

### 1.2 å¿«é€Ÿå¼€å§‹

**å‡†å¤‡CSVæ–‡ä»¶**ï¼š
ç¡®ä¿æ–‡ä»¶å­˜åœ¨äº `backend/data_imports/` ç›®å½•ï¼š
- `at_gy_actuators_data_final.csv` - AT/GY ç³»åˆ—æ‰§è¡Œå™¨æ•°æ®

**è¿è¡Œå¯¼å…¥**ï¼š
```bash
cd backend
npm run seed:atgy:final
```

### 1.3 CSVæ–‡ä»¶æ ¼å¼

**å¿…éœ€å­—æ®µ**ï¼š
```csv
model_base,series,mechanism,action_type,spring_range,base_price,torque_data,dimensions
AT-SR52K8,AT,Rack & Pinion,SR,K8,75,"{""spring_end"":7.7,...}","{""A"":147,...}"
```

**å­—æ®µè¯´æ˜**ï¼š
- `model_base` - å®Œæ•´å‹å·ï¼ˆå¦‚: AT-SR52K8, AT-DA52ï¼‰
- `series` - ç³»åˆ—åç§°ï¼ˆAT æˆ– GYï¼‰
- `mechanism` - æœºæ„ç±»å‹ï¼ˆRack & Pinion - é½¿è½®é½¿æ¡ï¼‰
- `action_type` - ä½œç”¨ç±»å‹ï¼ˆSR=å¼¹ç°§å¤ä½, DA=åŒä½œç”¨ï¼‰
- `spring_range` - å¼¹ç°§èŒƒå›´ï¼ˆå¦‚: K8, K10ï¼Œä»…SRå‹å·æœ‰ï¼‰
- `base_price` - åŸºç¡€ä»·æ ¼ï¼ˆæ•°å­—ï¼‰
- `torque_data` - æ‰­çŸ©æ•°æ®ï¼ˆJSONæ ¼å¼ï¼‰
- `dimensions` - å°ºå¯¸æ•°æ®ï¼ˆJSONæ ¼å¼ï¼Œå¯é€‰ï¼‰

### 1.4 æ‰­çŸ©æ•°æ®æ ¼å¼

**å¼¹ç°§å¤ä½å‹ (SR)**ï¼š
```json
{
  "spring_end": 7.7,
  "air_start_0.55MPa": 9.9,
  "air_end_0.55MPa": 6.7
}
```

**åŒä½œç”¨å‹ (DA)**ï¼š
```json
{
  "0.3MPa": 6,
  "0.4MPa": 8,
  "0.5MPa": 10,
  "0.55MPa": 11,
  "0.6MPa": 12
}
```

### 1.5 å¯¼å…¥ç»“æœç¤ºä¾‹

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   AT/GY é½¿è½®é½¿æ¡å¼æ‰§è¡Œæœºæ„æ•°æ®å¯¼å…¥å·¥å…·        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ: project_ark

ğŸ“ å¯¼å…¥ç­–ç•¥: æ›´æ–°å·²æœ‰æ•°æ®æˆ–æ’å…¥æ–°æ•°æ®

ğŸ“¦ å¼€å§‹å¯¼å…¥ AT/GY ç³»åˆ—æ‰§è¡Œå™¨æ•°æ®...
ğŸ“Š å…±è¯»å– 36 è¡Œæ•°æ®
âœ… æˆåŠŸè§£æ 36 æ¡ AT/GY æ‰§è¡Œå™¨è®°å½•

ğŸ’¾ å¯¼å…¥ç»Ÿè®¡:
  âœ… æˆåŠŸ: 36 æ¡
  âŒ å¤±è´¥: 0 æ¡

ğŸ“Š å¯¼å…¥ç»Ÿè®¡:
  âœ… AT/GY æ‰§è¡Œå™¨:   36 æ¡
  ğŸ“¦ æ•°æ®åº“æ€»è®¡:     177 æ¡æ‰§è¡Œå™¨
```

### 1.6 æ•°æ®éªŒè¯

```bash
# æŸ¥çœ‹ AT/GY æ•°é‡
mongosh project_ark --eval "db.actuators.countDocuments({model: /^AT-/})"

# æŸ¥çœ‹æ ·æœ¬æ•°æ®
mongosh project_ark --eval "db.actuators.find({model: /^AT-/}).limit(3)"
```

---

## äºŒã€å®Œæ•´æµ‹è¯•æ•°æ®å¯¼å…¥

### 2.1 ä½¿ç”¨ seed_final_acceptance.js

**åŠŸèƒ½**ï¼šåˆå§‹åŒ–å®Œæ•´çš„æµ‹è¯•æ•°æ®ï¼ŒåŒ…æ‹¬ï¼š
- 10ä¸ªæµ‹è¯•ç”¨æˆ·ï¼ˆè¦†ç›–æ‰€æœ‰è§’è‰²ï¼‰
- 5ä¸ªä¾›åº”å•†
- 55ä¸ªæ‰§è¡Œå™¨å‹å·
- 8ä¸ªé…ä»¶
- 4ä¸ªç¤ºä¾‹é¡¹ç›®

**è¿è¡Œå‘½ä»¤**ï¼š
```bash
cd backend
npm run seed:final
```

**é¢„æœŸè¾“å‡º**ï¼š
```
âœ… æ•°æ®åº“æ¸…ç©ºå®Œæˆï¼å…±åˆ é™¤ XX æ¡è®°å½•
ğŸ‘¥ æµ‹è¯•ç”¨æˆ·:          10 ä¸ª
ğŸ¢ ä¾›åº”å•†:            5 ä¸ª
ğŸ“¦ æ‰§è¡Œå™¨å‹å·:        55 ä¸ª
ğŸ”§ æ‰‹åŠ¨æ“ä½œè£…ç½®:      4 ä¸ª
ğŸ”Œ é…ä»¶:              8 ä¸ª
ğŸ“‹ ç¤ºä¾‹é¡¹ç›®:          4 ä¸ª
```

---

# ç¬¬å…­éƒ¨åˆ†ï¼šå¿«é€Ÿå‚è€ƒå¡ç‰‡

## ğŸš€ å¿«é€Ÿå¯åŠ¨

**1. å¯åŠ¨æµ‹è¯•ç¯å¢ƒ**ï¼š
```bash
NODE_ENV=test npm start
```

**2. é‡ç½®æ•°æ®åº“**ï¼š
```bash
cd backend
npm run seed:final
```

**3. è¿è¡Œæµ‹è¯•**ï¼š
```bash
cd frontend
npx cypress open
```

---

## ğŸ”‘ æµ‹è¯•è´¦æˆ·

| è§’è‰² | æ‰‹æœºå· | å¯†ç  | ç”¨é€” |
|------|--------|------|------|
| Administrator | 13000000001 | password | ç®¡ç†å‘˜æƒé™æµ‹è¯• |
| Sales Manager | 13000000002 | password | é”€å”®ç»ç†æµç¨‹æµ‹è¯• |
| Technical Engineer | 13000000003 | password | æŠ€æœ¯å·¥ç¨‹å¸ˆæµ‹è¯• |
| Commercial Engineer | 13000000004 | password | å•†åŠ¡å·¥ç¨‹å¸ˆæµ‹è¯• |
| Procurement Specialist | 13000000005 | password | é‡‡è´­æµç¨‹æµ‹è¯• |
| Production Planner | 13000000006 | password | ç”Ÿäº§è®¡åˆ’æµ‹è¯• |
| Quality Inspector | 13000000007 | password | è´¨æ£€æµç¨‹æµ‹è¯• |
| Logistics Specialist | 13000000008 | password | ç‰©æµç®¡ç†æµ‹è¯• |
| After-sales Engineer | 13000000009 | password | å”®åæœåŠ¡æµ‹è¯• |
| Workshop Worker | 13000000010 | password | è½¦é—´å·¥äººæµ‹è¯• |

---

## ğŸ› ï¸ æ ¸å¿ƒå‘½ä»¤

**åç«¯å‘½ä»¤**ï¼š
```bash
npm start           # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm run dev         # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run start:test  # å¯åŠ¨æµ‹è¯•æœåŠ¡å™¨
npm run seed:final  # åˆå§‹åŒ–å®Œæ•´æ•°æ®
npm test            # è¿è¡Œæµ‹è¯•
```

**å‰ç«¯å‘½ä»¤**ï¼š
```bash
npm run dev         # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build       # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run preview     # é¢„è§ˆç”Ÿäº§æ„å»º
npx cypress open    # æ‰“å¼€Cypressæµ‹è¯•
```

---

## ğŸ“¦ é»˜è®¤æµ‹è¯•æ•°æ®

- ğŸ‘¥ ç”¨æˆ·: 10ä¸ªï¼ˆè¦†ç›–æ‰€æœ‰è§’è‰²ï¼‰
- ğŸ¢ ä¾›åº”å•†: 5ä¸ª
- ğŸ“¦ æ‰§è¡Œå™¨: 55ä¸ªï¼ˆAT/GY/SFç³»åˆ—ï¼‰
- ğŸ”Œ é…ä»¶: 8ä¸ª
- ğŸ“‹ é¡¹ç›®: 4ä¸ªç¤ºä¾‹é¡¹ç›®

---

## ğŸ’¡ å¿«é€Ÿè®¿é—®

- **å‰ç«¯**: http://localhost:5173
- **åç«¯API**: http://localhost:5001
- **å¥åº·æ£€æŸ¥**: http://localhost:5001/api/health
- **Swaggeræ–‡æ¡£**: http://localhost:5001/api-docs (å¦‚å·²é…ç½®)

---

## ğŸ” æ•°æ®åº“å¿«é€ŸæŸ¥è¯¢

```bash
# è¿æ¥æ•°æ®åº“
mongosh project_ark

# æŸ¥çœ‹é›†åˆ
show collections

# ç»Ÿè®¡æ•°æ®
db.users.countDocuments()
db.actuators.countDocuments()
db.newprojects.countDocuments()

# æŸ¥è¯¢ç¤ºä¾‹
db.users.find({ role: "Sales Manager" })
db.actuators.find({ series: "AT" })
```

---

# é™„å½•ï¼šéªŒæ”¶æµ‹è¯•æŒ‡å—

## ä¸€ã€æµ‹è¯•å‡†å¤‡

### 1.1 åˆå§‹åŒ–æµ‹è¯•ç¯å¢ƒ

```bash
cd backend
npm run seed:final
```

### 1.2 å¯åŠ¨ç³»ç»Ÿ

```bash
# åç«¯ï¼ˆç»ˆç«¯1ï¼‰
cd backend
npm start

# å‰ç«¯ï¼ˆç»ˆç«¯2ï¼‰
cd frontend
npm run dev
```

---

## äºŒã€æ‰‹åŠ¨æµ‹è¯•æ¸…å•

### åœºæ™¯1ï¼šå”®å‰æµç¨‹

**æµ‹è¯•1.1 - é”€å”®ç»ç†åˆ›å»ºé¡¹ç›®**ï¼š
1. ç™»å½•: `13000000002` / `password`
2. å¯¼èˆªåˆ°ã€Œé¡¹ç›®ç®¡ç†ã€
3. ç‚¹å‡»ã€Œæ–°å»ºé¡¹ç›®ã€
4. å¡«å†™ä¿¡æ¯å¹¶æäº¤

**æµ‹è¯•1.2 - æŠ€æœ¯å·¥ç¨‹å¸ˆé€‰å‹**ï¼š
1. ç™»å½•: `13000000003` / `password`
2. è¿›å…¥é¡¹ç›®
3. æ·»åŠ æŠ€æœ¯éœ€æ±‚
4. æäº¤æŠ€æœ¯æ–¹æ¡ˆ

**æµ‹è¯•1.3 - å•†åŠ¡å·¥ç¨‹å¸ˆæŠ¥ä»·**ï¼š
1. ç™»å½•: `13000000004` / `password`
2. æŸ¥çœ‹å¾…æŠ¥ä»·é¡¹ç›®
3. ç”ŸæˆBOM
4. å®ŒæˆæŠ¥ä»·

### åœºæ™¯2ï¼šç”Ÿäº§æµç¨‹

**æµ‹è¯•2.1 - ç”Ÿäº§æ’äº§**ï¼š
1. ç™»å½•ç”Ÿäº§è®¡åˆ’å‘˜
2. åˆ›å»ºç”Ÿäº§è®¢å•
3. å±•å¼€BOM
4. ç”Ÿæˆæ’äº§è®¡åˆ’

**æµ‹è¯•2.2 - é‡‡è´­ç®¡ç†**ï¼š
1. ç™»å½•é‡‡è´­ä¸“å‘˜
2. æŸ¥çœ‹é‡‡è´­éœ€æ±‚
3. åˆ›å»ºé‡‡è´­è®¢å•
4. ç¡®è®¤æ”¶è´§

### åœºæ™¯3ï¼šå”®åæµç¨‹

**æµ‹è¯•3.1 - åˆ›å»ºå·¥å•**ï¼š
1. ç™»å½•é”€å”®ç»ç†
2. åˆ›å»ºå”®åå·¥å•
3. åˆ†é…å”®åå·¥ç¨‹å¸ˆ

**æµ‹è¯•3.2 - å¤„ç†å·¥å•**ï¼š
1. ç™»å½•å”®åå·¥ç¨‹å¸ˆ
2. æ¥å—å·¥å•
3. æ·»åŠ å¤„ç†è®°å½•
4. å…³é—­å·¥å•

---

## ä¸‰ã€éªŒæ”¶æ ‡å‡†

### æ ¸å¿ƒåŠŸèƒ½éªŒæ”¶

- âœ… ç”¨æˆ·è®¤è¯: æ‰€æœ‰10ä¸ªè§’è‰²éƒ½èƒ½æˆåŠŸç™»å½•
- âœ… è§’è‰²æƒé™: æ¯ä¸ªè§’è‰²åªèƒ½çœ‹åˆ°å’Œæ“ä½œè‡ªå·±æƒé™èŒƒå›´å†…çš„åŠŸèƒ½
- âœ… é¡¹ç›®æµç¨‹: ä»åˆ›å»ºâ†’é€‰å‹â†’æŠ¥ä»·â†’èµ¢å•â†’åˆåŒâ†’ç”Ÿäº§ å…¨æµç¨‹é€šç•…
- âœ… æ•°æ®æµè½¬: ä»»åŠ¡åœ¨ä¸åŒè§’è‰²é—´æ­£ç¡®æµè½¬
- âœ… çŠ¶æ€ç®¡ç†: é¡¹ç›®/è®¢å•çŠ¶æ€è‡ªåŠ¨æ›´æ–°æ­£ç¡®

### ååŒåŠŸèƒ½éªŒæ”¶

- âœ… ä»»åŠ¡é€šçŸ¥: ä»»åŠ¡åˆ†é…åï¼Œè¢«åˆ†é…äººèƒ½åœ¨ä»ªè¡¨ç›˜çœ‹åˆ°
- âœ… æ•°æ®åŒæ­¥: é‡‡è´­è®¢å•çš„äº¤æœŸè‡ªåŠ¨åŒæ­¥åˆ°ç”Ÿäº§è®¢å•
- âœ… è·¨éƒ¨é—¨åä½œ: é”€å”®â†’æŠ€æœ¯â†’å•†åŠ¡â†’ç”Ÿäº§â†’é‡‡è´­â†’è´¨æ£€â†’ç‰©æµâ†’å”®å ç¯ç¯ç›¸æ‰£

---

## å››ã€è‡ªåŠ¨åŒ–æµ‹è¯•

### è¿è¡ŒCypress E2Eæµ‹è¯•

```bash
cd frontend

# GUIæ¨¡å¼ï¼ˆæ¨èç”¨äºè°ƒè¯•ï¼‰
npx cypress open

# æ— å¤´æ¨¡å¼ï¼ˆCI/CDï¼‰
npx cypress run
```

---

## äº”ã€æ€§èƒ½æµ‹è¯•

### 5.1 è´Ÿè½½æµ‹è¯•

- å¹¶å‘ç”¨æˆ·æ•°: 100
- è¯·æ±‚å“åº”æ—¶é—´: < 200ms
- é¡µé¢åŠ è½½æ—¶é—´: < 2s

### 5.2 å‹åŠ›æµ‹è¯•

- æœ€å¤§å¹¶å‘: 500ç”¨æˆ·
- æ•°æ®åº“æŸ¥è¯¢: < 100ms
- APIååé‡: 1000 req/s

---

## å…­ã€æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šæ— æ³•ç™»å½•

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥åç«¯æœåŠ¡å™¨æ˜¯å¦è¿è¡Œ
2. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å·²åˆå§‹åŒ–
3. é‡æ–°è¿è¡Œ `npm run seed:final`

### é—®é¢˜2ï¼šé¡µé¢ç©ºç™½

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥å‰ç«¯æœåŠ¡å™¨æ˜¯å¦è¿è¡Œ
2. ç¡®è®¤è®¿é—®åœ°å€: `http://localhost:5173`
3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

### é—®é¢˜3ï¼šæ•°æ®ä¸æ˜¾ç¤º

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤ä½¿ç”¨æ­£ç¡®çš„è§’è‰²ç™»å½•
2. æ£€æŸ¥è§’è‰²æƒé™
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

---

## ä¸ƒã€æœ€ç»ˆç»“è®º

å½“æ‚¨å®Œæˆäº†æ‰€æœ‰æµ‹è¯•åï¼Œå¯ä»¥å¾—å‡ºç»“è®ºï¼š

> **"Project Ark" å¹³å°çš„æ‰€æœ‰åŠŸèƒ½å·²æŒ‰æœ€ç»ˆé€»è¾‘å®ç°ï¼Œè§’è‰²æƒé™æ¸…æ™°ï¼Œè·¨éƒ¨é—¨ååŒå·¥ä½œæµå·²å®Œå…¨è·‘é€šã€‚ç³»ç»Ÿå·²è¾¾åˆ°å¯æŠ•å…¥å…¬å¸æ­£å¼ä½¿ç”¨çš„æ ‡å‡†ã€‚**

---

# ğŸ“ æŠ€æœ¯æ”¯æŒ

**å¼€å‘å›¢é˜Ÿ**ï¼šProject Ark Team  
**ç³»ç»Ÿç‰ˆæœ¬**ï¼šv1.0.0  
**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
**æœ€åæ›´æ–°**ï¼š2025-10-29

---

**ç›¸å…³æ–‡æ¡£**ï¼š
- âœ… `SYSTEM_OVERVIEW.md` - ç³»ç»Ÿæ¦‚è¿°
- âœ… `DATABASE_GUIDE.md` - æ•°æ®åº“æ¶æ„
- âœ… `CODE_STRUCTURE.md` - ä»£ç ç»“æ„
- âœ… `API_REFERENCE.md` - APIæ¥å£å‚è€ƒ
- âœ… `FINAL_ACCEPTANCE_GUIDE.md` - éªŒæ”¶æµ‹è¯•æŒ‡å—

---

Â© 2025 Project Ark Team. All Rights Reserved.

**æ–‡æ¡£ç»“æŸ** âœ¨

