# ğŸŒ äº‘ç«¯éƒ¨ç½²å®Œæ•´æŒ‡å— - å›¢é˜Ÿéšæ—¶è®¿é—®

**æ›´æ–°æ—¥æœŸï¼š** 2025å¹´11æœˆ2æ—¥  
**ç›®æ ‡ï¼š** éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ï¼Œå›¢é˜Ÿæˆå‘˜é€šè¿‡ç½‘å€è®¿é—®ï¼Œä¸ä¾èµ–æœ¬åœ°ç”µè„‘  
**è¦æ±‚ï¼š** å‰ç«¯ + åç«¯ + æ•°æ®åº“å…¨éƒ¨éƒ¨ç½²åˆ°äº‘ç«¯

---

## ğŸ¯ æ¨èæ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | éš¾åº¦ | è´¹ç”¨ | å›½å†…è®¿é—® | æ¨èåº¦ |
|------|------|------|----------|--------|
| **Railway** | â­ æœ€ç®€å• | å…è´¹é¢åº¦ | ä¸€èˆ¬ | â­â­â­â­â­ |
| **Render** | â­â­ ç®€å• | å®Œå…¨å…è´¹ | æ…¢ | â­â­â­â­ |
| **Vercel + Railway** | â­â­ ç®€å• | å…è´¹é¢åº¦ | å‰ç«¯å¿« | â­â­â­â­ |
| **é˜¿é‡Œäº‘/è…¾è®¯äº‘** | â­â­â­â­ å¤æ‚ | Â¥100/æœˆèµ· | æœ€å¿« | â­â­â­â­â­ |

---

## ğŸš€ æ–¹æ¡ˆä¸€ï¼šRailway ä¸€é”®éƒ¨ç½²ï¼ˆæœ€æ¨èï¼‰

### âœ¨ ä¼˜ç‚¹
- âœ… **æœ€ç®€å•** - ä¸€é”®éƒ¨ç½²ï¼Œè‡ªåŠ¨é…ç½®
- âœ… **åŒ…å«æ•°æ®åº“** - è‡ªåŠ¨æä¾›MongoDB
- âœ… **å…è´¹é¢åº¦** - $5/æœˆå…è´¹é¢åº¦ï¼ˆå¤Ÿå°å›¢é˜Ÿä½¿ç”¨ï¼‰
- âœ… **è‡ªåŠ¨åŸŸå** - æä¾›å…è´¹å­åŸŸå
- âœ… **è‡ªåŠ¨HTTPS** - è‡ªåŠ¨SSLè¯ä¹¦

### ğŸ“‹ éƒ¨ç½²æ­¥éª¤

#### ç¬¬1æ­¥ï¼šå‡†å¤‡GitHubä»“åº“
```bash
# ç¡®è®¤ä»£ç å·²æ¨é€ï¼ˆå·²å®Œæˆâœ…ï¼‰
cd "/Users/hexiaoxiao/Desktop/Model Selection System"
git status
```

#### ç¬¬2æ­¥ï¼šæ³¨å†ŒRailwayè´¦å·
1. è®¿é—®ï¼šhttps://railway.app
2. ç‚¹å‡» "Start a New Project"
3. ä½¿ç”¨GitHubè´¦å·ç™»å½•ï¼ˆæˆæƒè®¿é—®ä»“åº“ï¼‰

#### ç¬¬3æ­¥ï¼šåˆ›å»ºé¡¹ç›®

**æ–¹å¼Aï¼šä»GitHubä»“åº“éƒ¨ç½²**
```
1. åœ¨Railwayæ§åˆ¶å°ç‚¹å‡» "New Project"
2. é€‰æ‹© "Deploy from GitHub repo"
3. é€‰æ‹©ä»“åº“ï¼šningxiarongchen-lgtm/project-ark
4. Railwayä¼šè‡ªåŠ¨è¯†åˆ«Node.jsé¡¹ç›®
```

**æ–¹å¼Bï¼šä½¿ç”¨Railway CLI**
```bash
# 1. å®‰è£…Railway CLI
npm install -g @railway/cli

# 2. ç™»å½•
railway login

# 3. åœ¨é¡¹ç›®ç›®å½•åˆå§‹åŒ–
cd "/Users/hexiaoxiao/Desktop/Model Selection System"
railway init

# 4. éƒ¨ç½²
railway up
```

#### ç¬¬4æ­¥ï¼šæ·»åŠ MongoDBæ•°æ®åº“
```
1. åœ¨Railwayé¡¹ç›®ä¸­ç‚¹å‡» "New"
2. é€‰æ‹© "Database" â†’ "Add MongoDB"
3. Railwayä¼šè‡ªåŠ¨åˆ›å»ºMongoDBå®ä¾‹
4. è‡ªåŠ¨ç”Ÿæˆ MONGODB_URI ç¯å¢ƒå˜é‡
```

#### ç¬¬5æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡

åœ¨Railwayæ§åˆ¶å°çš„ "Variables" æ ‡ç­¾é¡µæ·»åŠ ï¼š

```bash
# Nodeç¯å¢ƒ
NODE_ENV=production

# ç«¯å£ï¼ˆRailwayè‡ªåŠ¨åˆ†é…ï¼‰
PORT=$PORT

# MongoDBè¿æ¥ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®ï¼‰
MONGODB_URI=$MONGODB_URI

# JWTå¯†é’¥ï¼ˆå¤åˆ¶ä½ æœ¬åœ°çš„å¯†é’¥ï¼‰
JWT_SECRET=your_production_jwt_secret_here

# Refresh Tokenå¯†é’¥
REFRESH_TOKEN_SECRET=your_refresh_token_secret_here

# å‰ç«¯URLï¼ˆéƒ¨ç½²åè·å¾—ï¼‰
FRONTEND_URL=https://your-frontend.up.railway.app
```

#### ç¬¬6æ­¥ï¼šé…ç½®å‰ç«¯ç¯å¢ƒå˜é‡

Railwayä¼šè‡ªåŠ¨è¯†åˆ«å‰ç«¯å’Œåç«¯ï¼š

**å‰ç«¯ç¯å¢ƒå˜é‡ï¼š**
```bash
# åç«¯APIåœ°å€ï¼ˆä»åç«¯æœåŠ¡è·å–ï¼‰
VITE_API_URL=https://your-backend.up.railway.app
```

#### ç¬¬7æ­¥ï¼šéƒ¨ç½²å¹¶è·å–ç½‘å€
```
1. Railwayè‡ªåŠ¨éƒ¨ç½²ï¼ˆçº¦2-5åˆ†é’Ÿï¼‰
2. åç«¯ç½‘å€ï¼šhttps://xxx.up.railway.app
3. å‰ç«¯ç½‘å€ï¼šhttps://yyy.up.railway.app
4. æ•°æ®åº“ï¼šè‡ªåŠ¨è¿æ¥ï¼Œæ— éœ€æš´éœ²åœ°å€
```

#### ç¬¬8æ­¥ï¼šåˆå§‹åŒ–æ•°æ®åº“
```bash
# ä½¿ç”¨Railway CLIè¿æ¥åˆ°åç«¯æœåŠ¡
railway run node backend/seed_final_acceptance.js
```

### ğŸ‰ å®Œæˆï¼è®¿é—®ç½‘å€
- **å‰ç«¯åœ°å€ï¼š** https://your-frontend.up.railway.app
- **åç«¯APIï¼š** https://your-backend.up.railway.app
- **å›¢é˜Ÿæˆå‘˜å¯ç›´æ¥è®¿é—®å‰ç«¯ç½‘å€**

---

## ğŸ¨ æ–¹æ¡ˆäºŒï¼šRender å®Œå…¨å…è´¹éƒ¨ç½²

### âœ¨ ä¼˜ç‚¹
- âœ… **å®Œå…¨å…è´¹** - æ°¸ä¹…å…è´¹å¥—é¤
- âœ… **åŒ…å«æ•°æ®åº“** - å…è´¹PostgreSQLï¼ˆå¯ç”¨MongoDBï¼‰
- âœ… **è‡ªåŠ¨éƒ¨ç½²** - Gitæ¨é€è‡ªåŠ¨éƒ¨ç½²
- âš ï¸ ç¼ºç‚¹ï¼šå›½å†…è®¿é—®å¯èƒ½è¾ƒæ…¢

### ğŸ“‹ éƒ¨ç½²æ­¥éª¤

#### ç¬¬1æ­¥ï¼šæ³¨å†ŒRender
1. è®¿é—®ï¼šhttps://render.com
2. ä½¿ç”¨GitHubè´¦å·ç™»å½•

#### ç¬¬2æ­¥ï¼šéƒ¨ç½²MongoDBï¼ˆä½¿ç”¨MongoDB Atlasï¼‰
```
1. è®¿é—®ï¼šhttps://www.mongodb.com/cloud/atlas
2. æ³¨å†Œå…è´¹è´¦å·ï¼ˆ512MBå…è´¹ï¼‰
3. åˆ›å»ºé›†ç¾¤ï¼ˆé€‰æ‹©ç¦»ä¸­å›½æœ€è¿‘çš„åŒºåŸŸï¼šæ–°åŠ å¡ï¼‰
4. åˆ›å»ºæ•°æ®åº“ç”¨æˆ·
5. è·å–è¿æ¥å­—ç¬¦ä¸²ï¼šmongodb+srv://...
```

#### ç¬¬3æ­¥ï¼šéƒ¨ç½²åç«¯
```
1. Renderæ§åˆ¶å° â†’ "New" â†’ "Web Service"
2. è¿æ¥GitHubä»“åº“ï¼šproject-ark
3. é…ç½®ï¼š
   - Name: project-ark-backend
   - Root Directory: backend
   - Environment: Node
   - Build Command: npm install
   - Start Command: node server.js
4. æ·»åŠ ç¯å¢ƒå˜é‡ï¼š
   - NODE_ENV=production
   - MONGODB_URI=<MongoDB Atlasè¿æ¥å­—ç¬¦ä¸²>
   - JWT_SECRET=<ä½ çš„å¯†é’¥>
   - REFRESH_TOKEN_SECRET=<ä½ çš„å¯†é’¥>
5. ç‚¹å‡» "Create Web Service"
```

#### ç¬¬4æ­¥ï¼šéƒ¨ç½²å‰ç«¯
```
1. Renderæ§åˆ¶å° â†’ "New" â†’ "Static Site"
2. è¿æ¥GitHubä»“åº“ï¼šproject-ark
3. é…ç½®ï¼š
   - Name: project-ark-frontend
   - Root Directory: frontend
   - Build Command: npm install && npm run build
   - Publish Directory: dist
4. æ·»åŠ ç¯å¢ƒå˜é‡ï¼š
   - VITE_API_URL=<åç«¯ç½‘å€>
5. ç‚¹å‡» "Create Static Site"
```

#### ç¬¬5æ­¥ï¼šè·å–è®¿é—®åœ°å€
- **å‰ç«¯ï¼š** https://project-ark-frontend.onrender.com
- **åç«¯ï¼š** https://project-ark-backend.onrender.com

---

## ğŸŒŸ æ–¹æ¡ˆä¸‰ï¼šVercel (å‰ç«¯) + Railway (åç«¯)

### âœ¨ ä¼˜ç‚¹
- âœ… **å‰ç«¯æé€Ÿ** - Vercelå…¨çƒCDNï¼Œå›½å†…è®¿é—®å¿«
- âœ… **åç«¯ç¨³å®š** - Railwayå¯é éƒ¨ç½²
- âœ… **å…è´¹é¢åº¦** - ä¸¤è€…éƒ½æœ‰å…è´¹å¥—é¤

### ğŸ“‹ éƒ¨ç½²æ­¥éª¤

#### ç¬¬1æ­¥ï¼šéƒ¨ç½²åç«¯åˆ°Railwayï¼ˆå‚è€ƒæ–¹æ¡ˆä¸€ï¼‰

#### ç¬¬2æ­¥ï¼šéƒ¨ç½²å‰ç«¯åˆ°Vercel
```bash
# 1. å®‰è£…Vercel CLI
npm install -g vercel

# 2. ç™»å½•
vercel login

# 3. éƒ¨ç½²å‰ç«¯
cd "/Users/hexiaoxiao/Desktop/Model Selection System/frontend"
vercel --prod

# 4. è®¾ç½®ç¯å¢ƒå˜é‡
vercel env add VITE_API_URL
# è¾“å…¥Railwayåç«¯åœ°å€
```

#### ç¬¬3æ­¥ï¼šé…ç½®è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰
```
1. Vercelæ§åˆ¶å° â†’ Settings â†’ Domains
2. æ·»åŠ ä½ çš„åŸŸå
3. é…ç½®DNSè®°å½•
```

---

## ğŸ‡¨ğŸ‡³ æ–¹æ¡ˆå››ï¼šé˜¿é‡Œäº‘/è…¾è®¯äº‘ï¼ˆå›½å†…æœ€ä½³ï¼‰

### âœ¨ ä¼˜ç‚¹
- âœ… **å›½å†…è®¿é—®æœ€å¿«**
- âœ… **å®Œå…¨æ§åˆ¶**
- âœ… **ç¬¦åˆå›½å†…åˆè§„è¦æ±‚**
- âš ï¸ éœ€è¦å¤‡æ¡ˆï¼ˆçº¦2å‘¨ï¼‰
- ğŸ’° è´¹ç”¨ï¼šçº¦Â¥100-300/æœˆ

### ğŸ“‹ éƒ¨ç½²æ­¥éª¤

#### ç¬¬1æ­¥ï¼šè´­ä¹°æœåŠ¡å™¨
```
é˜¿é‡Œäº‘ ECS æˆ– è…¾è®¯äº‘ CVM
æ¨èé…ç½®ï¼š
- CPU: 2æ ¸
- å†…å­˜: 4GB
- å¸¦å®½: 5Mbps
- ç³»ç»Ÿ: Ubuntu 22.04
- è´¹ç”¨: çº¦Â¥100/æœˆ
```

#### ç¬¬2æ­¥ï¼šè¿æ¥æœåŠ¡å™¨
```bash
# ä½¿ç”¨SSHè¿æ¥
ssh root@your_server_ip

# æ›´æ–°ç³»ç»Ÿ
apt update && apt upgrade -y
```

#### ç¬¬3æ­¥ï¼šå®‰è£…ç¯å¢ƒ
```bash
# 1. å®‰è£…Node.js
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
apt install -y nodejs

# 2. å®‰è£…MongoDB
wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | apt-key add -
echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/6.0 multiverse" | tee /etc/apt/sources.list.d/mongodb-org-6.0.list
apt update
apt install -y mongodb-org
systemctl start mongod
systemctl enable mongod

# 3. å®‰è£…Nginx
apt install -y nginx

# 4. å®‰è£…PM2
npm install -g pm2
```

#### ç¬¬4æ­¥ï¼šéƒ¨ç½²ä»£ç 
```bash
# 1. å…‹éš†ä»£ç 
cd /var/www
git clone https://github.com/ningxiarongchen-lgtm/project-ark.git
cd project-ark

# 2. å®‰è£…åç«¯ä¾èµ–
cd backend
npm install --production

# 3. é…ç½®ç¯å¢ƒå˜é‡
cat > .env << EOF
NODE_ENV=production
PORT=5001
MONGODB_URI=mongodb://localhost:27017/cmax
JWT_SECRET=your_jwt_secret_here
REFRESH_TOKEN_SECRET=your_refresh_token_secret_here
FRONTEND_URL=http://your_domain.com
EOF

# 4. å¯åŠ¨åç«¯
pm2 start server.js --name project-ark-api
pm2 save
pm2 startup

# 5. æ„å»ºå‰ç«¯
cd ../frontend
npm install
npm run build
```

#### ç¬¬5æ­¥ï¼šé…ç½®Nginx
```bash
# åˆ›å»ºNginxé…ç½®
cat > /etc/nginx/sites-available/project-ark << 'EOF'
server {
    listen 80;
    server_name your_domain.com;  # æ›¿æ¢ä¸ºä½ çš„åŸŸå

    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /var/www/project-ark/frontend/dist;
        try_files $uri $uri/ /index.html;
    }

    # åç«¯APIä»£ç†
    location /api {
        proxy_pass http://localhost:5001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    # WebSocketæ”¯æŒ
    location /socket.io {
        proxy_pass http://localhost:5001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
EOF

# å¯ç”¨ç«™ç‚¹
ln -s /etc/nginx/sites-available/project-ark /etc/nginx/sites-enabled/
nginx -t
systemctl restart nginx
```

#### ç¬¬6æ­¥ï¼šé…ç½®SSLï¼ˆHTTPSï¼‰
```bash
# ä½¿ç”¨Let's Encryptå…è´¹SSL
apt install -y certbot python3-certbot-nginx
certbot --nginx -d your_domain.com
```

#### ç¬¬7æ­¥ï¼šåˆå§‹åŒ–æ•°æ®åº“
```bash
cd /var/www/project-ark/backend
node seed_final_acceptance.js
```

### ğŸ‰ å®Œæˆï¼
- **è®¿é—®åœ°å€ï¼š** http://your_domain.com æˆ– http://your_server_ip
- **HTTPSï¼š** https://your_domain.comï¼ˆé…ç½®SSLåï¼‰

---

## ğŸ“Š æ–¹æ¡ˆå¯¹æ¯”æ€»ç»“

### ğŸš€ å¿«é€Ÿä¸Šçº¿ï¼ˆæ¨èæ–°æ‰‹ï¼‰
**é€‰æ‹©ï¼šRailway**
- 10åˆ†é’Ÿä¸Šçº¿
- æ— éœ€æœåŠ¡å™¨çŸ¥è¯†
- å…è´¹é¢åº¦å¤Ÿç”¨

### ğŸ’° å®Œå…¨å…è´¹
**é€‰æ‹©ï¼šRender + MongoDB Atlas**
- æ°¸ä¹…å…è´¹
- é€‚åˆå°å›¢é˜Ÿ
- å›½å†…è®¿é—®è¾ƒæ…¢

### âš¡ æ€§èƒ½æœ€ä½³
**é€‰æ‹©ï¼šVercel (å‰ç«¯) + Railway (åç«¯)**
- å‰ç«¯å…¨çƒåŠ é€Ÿ
- åç«¯ç¨³å®šå¯é 
- å›½å†…è®¿é—®è¾ƒå¿«

### ğŸ‡¨ğŸ‡³ å›½å†…æœ€ä½³
**é€‰æ‹©ï¼šé˜¿é‡Œäº‘/è…¾è®¯äº‘**
- å›½å†…è®¿é—®æœ€å¿«
- å®Œå…¨å¯æ§
- éœ€è¦æŠ•å…¥æˆæœ¬

---

## ğŸ¯ æ¨èå†³ç­–æµç¨‹

```
æ˜¯å¦æœ‰é¢„ç®—ï¼Ÿ
â”œâ”€ æœ‰é¢„ç®— (Â¥100-300/æœˆ)
â”‚  â””â”€ å›½å†…ç”¨æˆ·ä¸ºä¸»ï¼Ÿ
â”‚     â”œâ”€ æ˜¯ â†’ é˜¿é‡Œäº‘/è…¾è®¯äº‘ â­â­â­â­â­
â”‚     â””â”€ å¦ â†’ Railway â­â­â­â­
â”‚
â””â”€ æ— é¢„ç®—ï¼ˆå…è´¹ï¼‰
   â””â”€ éœ€è¦æœ€å¿«ä¸Šçº¿ï¼Ÿ
      â”œâ”€ æ˜¯ â†’ Railway (å…è´¹é¢åº¦) â­â­â­â­â­
      â””â”€ å¦ â†’ Render â­â­â­â­
```

---

## ğŸ” å®‰å…¨æé†’

### âœ… éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•
- [ ] ç¡®ä¿`.env`æ–‡ä»¶ä¸åœ¨Gitä¸­
- [ ] ä½¿ç”¨å¼ºå¯†ç ä½œä¸ºJWT_SECRET
- [ ] MongoDBä½¿ç”¨å¼ºå¯†ç 
- [ ] é…ç½®CORSåªå…è®¸ä½ çš„å‰ç«¯åŸŸå
- [ ] å¯ç”¨HTTPSï¼ˆSSLï¼‰
- [ ] å®šæœŸå¤‡ä»½æ•°æ®åº“

### ğŸ”‘ ç”Ÿæˆå®‰å…¨å¯†é’¥
```bash
# ç”ŸæˆJWTå¯†é’¥
node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"

# ç”ŸæˆRefresh Tokenå¯†é’¥
node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
```

---

## ğŸ“ ä¸‹ä¸€æ­¥

### æ–¹æ¡ˆä¸€æ¨èï¼šRailwayï¼ˆæœ€ç®€å•ï¼‰
1. è®¿é—® https://railway.app æ³¨å†Œ
2. è¿æ¥GitHubä»“åº“
3. æ·»åŠ MongoDB
4. é…ç½®ç¯å¢ƒå˜é‡
5. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆ5åˆ†é’Ÿï¼‰
6. è·å–ç½‘å€åˆ†äº«ç»™å›¢é˜Ÿ

### éœ€è¦å¸®åŠ©ï¼Ÿ
- Railwayæ–‡æ¡£ï¼šhttps://docs.railway.app
- Renderæ–‡æ¡£ï¼šhttps://render.com/docs
- é˜¿é‡Œäº‘æ–‡æ¡£ï¼šhttps://help.aliyun.com

---

---

## ğŸ“… æ›´æ–°æ—¥å¿—

**2025å¹´11æœˆ2æ—¥æ›´æ–°ï¼š**
- âœ… æ›´æ–°éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”
- âœ… ä¼˜åŒ–Railwayéƒ¨ç½²æ­¥éª¤
- âœ… æ·»åŠ æœ€æ–°å®‰å…¨é…ç½®
- âœ… æ›´æ–°ç¯å¢ƒå˜é‡ç¤ºä¾‹

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿé€‰æ‹©ä¸€ä¸ªæ–¹æ¡ˆå¼€å§‹éƒ¨ç½²å§ï¼** ğŸš€

**æ–‡æ¡£ç»´æŠ¤ï¼š** Project Ark Team  
**æœ€åæ›´æ–°ï¼š** 2025å¹´11æœˆ2æ—¥

