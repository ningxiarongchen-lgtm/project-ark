# AT/GY ç³»åˆ—æ•°æ®å¯¼å…¥ä½¿ç”¨è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

`seed_at_gy.js` æ˜¯ä¸“é—¨ç”¨äºå¯¼å…¥ AT å’Œ GY ç³»åˆ—é½¿è½®é½¿æ¡å¼æ‰§è¡Œæœºæ„æ•°æ®çš„è„šæœ¬ã€‚è¯¥è„šæœ¬é‡‡ç”¨**æ™ºèƒ½æ›´æ–°ç­–ç•¥**ï¼Œä¸ä¼šåˆ é™¤ç°æœ‰çš„ SF ç³»åˆ—æ•°æ®ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å‡†å¤‡ CSV æ–‡ä»¶

ç¡®ä¿æ–‡ä»¶å­˜åœ¨äº `backend/data_imports/` ç›®å½•ï¼š
- `at_gy_actuators_data.csv` - AT/GY ç³»åˆ—æ‰§è¡Œå™¨æ•°æ®

### 2. è¿è¡Œå¯¼å…¥

```bash
cd backend
npm run seed-at-gy
```

## ğŸ“ CSV æ–‡ä»¶æ ¼å¼

### AT/GY ç³»åˆ—æ•°æ®æ ¼å¼

**å¿…éœ€å­—æ®µ**:
```csv
model_base,series,mechanism,action_type,spring_range,base_price,torque_data,dimensions
AT-SR52K8,AT,Rack & Pinion,SR,K8,75,"{""spring_end"":7.7,...}","{""A"":147,...}"
```

**å­—æ®µè¯´æ˜**:
- `model_base` - å®Œæ•´å‹å· (å¦‚: AT-SR52K8, AT-DA52)
- `series` - ç³»åˆ—åç§° (AT æˆ– GY)
- `mechanism` - æœºæ„ç±»å‹ (Rack & Pinion - é½¿è½®é½¿æ¡)
- `action_type` - ä½œç”¨ç±»å‹ (SR=å¼¹ç°§å¤ä½, DA=åŒä½œç”¨)
- `spring_range` - å¼¹ç°§èŒƒå›´ (å¦‚: K8, K10ï¼Œä»…SRå‹å·æœ‰)
- `base_price` - åŸºç¡€ä»·æ ¼ (æ•°å­—)
- `torque_data` - æ‰­çŸ©æ•°æ® (JSONæ ¼å¼)
- `dimensions` - å°ºå¯¸æ•°æ® (JSONæ ¼å¼ï¼Œå¯é€‰)

### æ‰­çŸ©æ•°æ®æ ¼å¼

**å¼¹ç°§å¤ä½å‹ (SR)**:
```json
{
  "spring_end": 7.7,
  "air_start_0.55MPa": 9.9,
  "air_end_0.55MPa": 6.7
}
```

**åŒä½œç”¨å‹ (DA)**:
```json
{
  "0.3MPa": 6,
  "0.4MPa": 8,
  "0.5MPa": 10,
  "0.55MPa": 11,
  "0.6MPa": 12,
  "0.7MPa": 14,
  "0.8MPa": 16
}
```

### å°ºå¯¸æ•°æ®æ ¼å¼

```json
{
  "A": 147,
  "B": 65,
  "H": 92
}
```

## ğŸ”§ è„šæœ¬ç‰¹æ€§

### 1. æ™ºèƒ½å¯¼å…¥ç­–ç•¥
- âœ… **ä¸åˆ é™¤ç°æœ‰æ•°æ®** - ä¿ç•™ SF ç³»åˆ—æ•°æ®
- âœ… **æ›´æ–°æˆ–æ’å…¥** - å·²å­˜åœ¨çš„å‹å·ä¼šæ›´æ–°ï¼Œæ–°å‹å·ä¼šæ’å…¥
- âœ… **é€æ¡å¤„ç†** - å•æ¡å¤±è´¥ä¸å½±å“å…¶ä»–æ•°æ®

### 2. æ•°æ®å¤„ç†
- âœ… JSON æ‰­çŸ©æ•°æ®è‡ªåŠ¨è§£æ
- âœ… å°ºå¯¸æ•°æ®è‡ªåŠ¨è§£æ
- âœ… è‡ªåŠ¨æå– body_size
- âœ… æ™ºèƒ½ç±»å‹è½¬æ¢
- âœ… æ‰­çŸ©æ•°æ®é”®åå®‰å…¨å¤„ç†ï¼ˆç‚¹ â†’ ä¸‹åˆ’çº¿ï¼‰

### 3. é”™è¯¯å¤„ç†
- âœ… æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥
- âœ… é€è¡Œé”™è¯¯æ•è·
- âœ… è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
- âœ… å¤±è´¥ç»Ÿè®¡æŠ¥å‘Š

### 4. æ•°æ®æ˜ å°„

**AT/GY ç³»åˆ—ç‰¹ç‚¹**:
- æœºæ„ç±»å‹ï¼šé½¿è½®é½¿æ¡ (Rack & Pinion)
- æ‰­çŸ©æ•°æ®å­˜å‚¨åœ¨ `torque_symmetric` å­—æ®µ
- `torque_canted` å­—æ®µä¸ºç©ºï¼ˆAT/GY ç³»åˆ—ä¸ä½¿ç”¨å€¾æ–œè½­æ¶ï¼‰
- è‡ªåŠ¨ç”Ÿæˆæè¿°ä¿¡æ¯

## ğŸ“Š å¯¼å…¥ç»“æœç¤ºä¾‹

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   AT/GY é½¿è½®é½¿æ¡å¼æ‰§è¡Œæœºæ„æ•°æ®å¯¼å…¥å·¥å…·        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ: cmax-actuators

ğŸ“ å¯¼å…¥ç­–ç•¥: æ›´æ–°å·²æœ‰æ•°æ®æˆ–æ’å…¥æ–°æ•°æ®ï¼ˆä¸åˆ é™¤ç°æœ‰ SF ç³»åˆ—æ•°æ®ï¼‰

ğŸ“¦ å¼€å§‹å¯¼å…¥ AT/GY ç³»åˆ—æ‰§è¡Œå™¨æ•°æ®...
ğŸ“„ æ–‡ä»¶è·¯å¾„: .../at_gy_actuators_data.csv
ğŸ“Š å…±è¯»å– 36 è¡Œæ•°æ®
âœ… æˆåŠŸè§£æ 36 æ¡ AT/GY æ‰§è¡Œå™¨è®°å½•
  âœ… åˆ›å»º: AT-SR52K8
  âœ… åˆ›å»º: AT-SR52K10
  ...
  âœ… åˆ›å»º: AT-DA270

ğŸ’¾ å¯¼å…¥ç»Ÿè®¡:
  âœ… æˆåŠŸ: 36 æ¡
  âŒ å¤±è´¥: 0 æ¡

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     AT/GY æ•°æ®å¯¼å…¥å®Œæˆï¼ ğŸ‰                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š å¯¼å…¥ç»Ÿè®¡:
  âœ… AT/GY æ‰§è¡Œå™¨:   36 æ¡
  ğŸ“¦ æ•°æ®åº“æ€»è®¡:     177 æ¡æ‰§è¡Œå™¨

âœ… æ•°æ®åº“è¿æ¥å·²å…³é—­
```

## ğŸ” æ•°æ®éªŒè¯

### éªŒè¯å‘½ä»¤

```bash
# æŸ¥çœ‹ AT/GY æ•°é‡
mongosh cmax-actuators --eval "db.actuators.countDocuments({model_base: /^AT-/})"

# æŸ¥çœ‹æ ·æœ¬æ•°æ®
mongosh cmax-actuators --eval "db.actuators.find({model_base: /^AT-/}).limit(3)"

# æŸ¥çœ‹æ‰­çŸ©æ•°æ®
mongosh cmax-actuators --eval "db.actuators.findOne({model_base: 'AT-SR52K8'})"
```

### æ•°æ®ç»Ÿè®¡

æˆåŠŸå¯¼å…¥åï¼š
- **AT ç³»åˆ— (SR - å¼¹ç°§å¤ä½)**: 23 æ¡
- **AT ç³»åˆ— (DA - åŒä½œç”¨)**: 13 æ¡
- **æ€»è®¡**: 36 æ¡

æ•°æ®åº“æ€»è§ˆï¼š
- **SF ç³»åˆ—**: 141 æ¡
- **AT/GY ç³»åˆ—**: 36 æ¡
- **æ€»æ‰§è¡Œå™¨æ•°é‡**: 177 æ¡

## ğŸ”„ é‡å¤å¯¼å…¥

è„šæœ¬æ”¯æŒå¤šæ¬¡è¿è¡Œï¼š
- å·²å­˜åœ¨çš„å‹å·ä¼šè¢«æ›´æ–°
- æ–°å‹å·ä¼šè¢«æ·»åŠ 
- ä¸ä¼šäº§ç”Ÿé‡å¤æ•°æ®

```bash
# å®‰å…¨è¿è¡Œï¼Œä¸ä¼šåˆ é™¤ç°æœ‰æ•°æ®
npm run seed-at-gy
```

## ğŸ“ ä¸ SF ç³»åˆ—å¯¼å…¥çš„åŒºåˆ«

| ç‰¹æ€§ | SF ç³»åˆ— (seed.js) | AT/GY ç³»åˆ— (seed_at_gy.js) |
|------|-------------------|----------------------------|
| å¯¼å…¥å‰æ“ä½œ | æ¸…ç©ºæ‰€æœ‰æ•°æ® | ä¿ç•™ç°æœ‰æ•°æ® |
| æ‰­çŸ©æ•°æ® | symmetric + canted | ä»… symmetric |
| æœºæ„ç±»å‹ | æ°”åŠ¨å¶ç‰‡å¼ | é½¿è½®é½¿æ¡å¼ |
| è½­æ¶ç±»å‹ | å¯¹ç§°/å€¾æ–œ | ä¸é€‚ç”¨ |
| å·¥ä½œè§’åº¦ | å¤šç§å‹åŠ›Ã—å¤šç§è§’åº¦ | ä¸åŒå‹åŠ› |

## ğŸ¯ æœ€ä½³å®è·µ

1. **é¦–æ¬¡å¯¼å…¥**: å…ˆè¿è¡Œ `npm run seed` å¯¼å…¥ SF ç³»åˆ—åŸºç¡€æ•°æ®
2. **æ·»åŠ  AT/GY**: å†è¿è¡Œ `npm run seed-at-gy` æ·»åŠ  AT/GY ç³»åˆ—
3. **æ›´æ–°æ•°æ®**: ä¿®æ”¹ CSV åå¯ç›´æ¥é‡æ–°è¿è¡Œï¼Œä¸å½±å“å…¶ä»–æ•°æ®
4. **éªŒè¯ç»“æœ**: å¯¼å…¥åéªŒè¯æ•°æ®å®Œæ•´æ€§å’Œå‡†ç¡®æ€§

## ğŸ“š ç›¸å…³å‘½ä»¤

```bash
# å¯¼å…¥ SF ç³»åˆ—ï¼ˆä¼šæ¸…ç©ºæ‰€æœ‰æ•°æ®ï¼‰
npm run seed

# å¯¼å…¥ AT/GY ç³»åˆ—ï¼ˆä¸ä¼šæ¸…ç©ºæ•°æ®ï¼‰
npm run seed-at-gy

# æŸ¥çœ‹æ‰€æœ‰æ‰§è¡Œå™¨
mongosh cmax-actuators --eval "db.actuators.find()"

# æŒ‰ç³»åˆ—ç»Ÿè®¡
mongosh cmax-actuators --eval "
  db.actuators.aggregate([
    {$group: {_id: {$substr: ['$model_base', 0, 2]}, count: {$sum: 1}}},
    {$sort: {_id: 1}}
  ])
"
```

## ğŸ› å¸¸è§é—®é¢˜

### é—®é¢˜1: æ•°æ®åº“è¿æ¥å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ MongoDB æœåŠ¡å’Œ `.env` é…ç½®

### é—®é¢˜2: CSV æ–‡ä»¶æ‰¾ä¸åˆ°
**è§£å†³æ–¹æ¡ˆ**: ç¡®è®¤æ–‡ä»¶åœ¨ `backend/data_imports/at_gy_actuators_data.csv`

### é—®é¢˜3: æ‰­çŸ©æ•°æ®è§£æå¤±è´¥
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥ JSON æ ¼å¼ï¼Œç¡®ä¿ä½¿ç”¨åŒå¼•å·

### é—®é¢˜4: å‹å·é‡å¤
**è§£å†³æ–¹æ¡ˆ**: è„šæœ¬ä¼šè‡ªåŠ¨æ›´æ–°ç°æœ‰å‹å·ï¼Œè¿™æ˜¯æ­£å¸¸è¡Œä¸º

## ğŸ”Œ æ¨¡å—åŒ–ä½¿ç”¨

```javascript
const { seedATGYDatabase, importATGYActuators } = require('./seed_at_gy');

// å®Œæ•´å¯¼å…¥
await seedATGYDatabase();

// ä»…å¯¼å…¥ AT/GYï¼ˆéœ€è¦æ‰‹åŠ¨è¿æ¥æ•°æ®åº“ï¼‰
await connectDatabase();
await importATGYActuators();
await mongoose.connection.close();
```

## ğŸ“¦ ä¾èµ–

- Node.js >= 14.0.0
- MongoDB >= 4.4
- mongoose >= 6.0.0
- csv-parser >= 3.0.0
- dotenv >= 16.0.0

## âœ¨ æ•°æ®ç¤ºä¾‹

å¯¼å…¥åçš„æ•°æ®ç»“æ„ï¼š

```javascript
{
  model_base: "AT-SR52K8",
  body_size: "AT52",
  action_type: "SR",
  base_price: 75,
  spring_range: "K8",
  torque_symmetric: Map {
    "spring_end" => 7.7,
    "air_start_0_55MPa" => 9.9,
    "air_end_0_55MPa" => 6.7
  },
  torque_canted: Map {},
  technical_specs: {
    dimensions: {
      A: 147,
      B: 65,
      H: 92
    }
  },
  description: "ATç³»åˆ— Rack & Pinion é½¿è½®é½¿æ¡å¼æ‰§è¡Œæœºæ„"
}
```

---

**åˆ›å»ºæ—¶é—´**: 2025-10-27  
**ç‰ˆæœ¬**: v1.0  
**ä½œè€…**: Project Ark å¼€å‘å›¢é˜Ÿ

