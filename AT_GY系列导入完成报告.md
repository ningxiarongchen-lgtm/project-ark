# AT/GY ç³»åˆ—æ•°æ®å¯¼å…¥å®ŒæˆæŠ¥å‘Š

## ğŸ¯ é¡¹ç›®ç›®æ ‡

ä¸ºç³»ç»Ÿæ·»åŠ  AT å’Œ GY ç³»åˆ—é½¿è½®é½¿æ¡å¼æ‰§è¡Œæœºæ„æ•°æ®æ”¯æŒï¼Œæ‰©å±•äº§å“çº¿è¦†ç›–èŒƒå›´ã€‚

## âœ… å®Œæˆå†…å®¹

### 1. æ¨¡å‹å‡çº§

#### å‡çº§çš„ Actuator æ¨¡å‹å­—æ®µ

**æ–°å¢å­—æ®µ**:
```javascript
{
  // ç³»åˆ—æ ‡è¯†
  series: String,              // "SF", "AT", "GY"
  
  // æœºæ„ç±»å‹
  mechanism: String,           // "Rack & Pinion" (é½¿è½®é½¿æ¡)
  
  // å¼¹ç°§èŒƒå›´
  spring_range: String,        // "K8", "K10" (ç”¨äº SR å‹å·)
  
  // æ‰­çŸ©æ•°æ®ï¼ˆAT/GY ä¸“ç”¨ï¼‰
  torque_data: Mixed,          // { "spring_end": 7.7, "0.3MPa": 6 }
  
  // å°ºå¯¸æ•°æ®ï¼ˆAT/GY ä¸“ç”¨ï¼‰
  dimensions: Mixed            // { "A": 147, "B": 65, "H": 92 }
}
```

**ä¿ç•™å­—æ®µï¼ˆå…¼å®¹ SF ç³»åˆ—ï¼‰**:
```javascript
{
  torque_symmetric: Map,       // SF ç³»åˆ—å¯¹ç§°è½­æ¶æ‰­çŸ©
  torque_canted: Map,          // SF ç³»åˆ—å€¾æ–œè½­æ¶æ‰­çŸ©
  body_size: String,           // æ‰€æœ‰ç³»åˆ—é€šç”¨
  action_type: String,         // æ‰€æœ‰ç³»åˆ—é€šç”¨
  base_price: Number           // æ‰€æœ‰ç³»åˆ—é€šç”¨
}
```

**ç´¢å¼•ä¼˜åŒ–**:
- æ·»åŠ  `series` å­—æ®µç´¢å¼•ï¼Œä¼˜åŒ–æŒ‰ç³»åˆ—æŸ¥è¯¢æ€§èƒ½

### 2. æ•°æ®å¯¼å…¥è„šæœ¬

#### æ–‡ä»¶: `backend/seed_at_gy.js`

**æ ¸å¿ƒåŠŸèƒ½**:
- âœ… æ™ºèƒ½åˆ é™¤ç­–ç•¥ - åªåˆ é™¤ AT/GY ç³»åˆ—æ•°æ®
- âœ… ä¿æŠ¤ SF ç³»åˆ— - ä¸å½±å“ç°æœ‰æ•°æ®
- âœ… CSV æ•°æ®è§£æ - ä½¿ç”¨ csv-parser åº“
- âœ… JSON æ•°æ®å¤„ç† - è‡ªåŠ¨è§£ææ‰­çŸ©å’Œå°ºå¯¸æ•°æ®
- âœ… æ‰¹é‡å¯¼å…¥ - é«˜æ•ˆçš„ insertMany æ“ä½œ
- âœ… é”™è¯¯å¤„ç† - å®Œå–„çš„å¼‚å¸¸æ•è·æœºåˆ¶

**åˆ é™¤ç­–ç•¥**:
```javascript
await Actuator.deleteMany({ 
  $or: [
    { series: { $in: ['AT', 'GY'] } },  // åˆ é™¤æœ‰ series å­—æ®µçš„
    { model_base: /^AT-/ },              // åˆ é™¤ AT- å¼€å¤´çš„
    { model_base: /^GY-/ }               // åˆ é™¤ GY- å¼€å¤´çš„
  ]
});
```

### 3. NPM è„šæœ¬é…ç½®

#### package.json æ›´æ–°

```json
{
  "scripts": {
    "seed-at-gy": "node seed_at_gy.js"
  }
}
```

**ä½¿ç”¨æ–¹æ³•**:
```bash
cd backend
npm run seed-at-gy
```

## ğŸ“Š å¯¼å…¥ç»“æœ

### æ‰§è¡Œæ‘˜è¦

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     AT/GY æ•°æ®å¯¼å…¥å®Œæˆï¼ ğŸ‰                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š å¯¼å…¥ç»Ÿè®¡:
  âœ… AT/GY æ‰§è¡Œå™¨:   36 æ¡

ğŸ“¦ æ•°æ®åº“æ¦‚è§ˆ:
  ğŸ“Š SF ç³»åˆ—:        141 æ¡
  ğŸ“Š AT ç³»åˆ—:        36 æ¡
  ğŸ“Š GY ç³»åˆ—:        0 æ¡
  ğŸ“¦ æ•°æ®åº“æ€»è®¡:     177 æ¡æ‰§è¡Œå™¨
```

### è¯¦ç»†ç»Ÿè®¡

| ç³»åˆ— | æ•°é‡ | æœºæ„ç±»å‹ | ç‰¹ç‚¹ |
|------|------|----------|------|
| SF | 141 æ¡ | æ°”åŠ¨å¶ç‰‡å¼ | å¯¹ç§°/å€¾æ–œè½­æ¶ï¼Œå¤šå‹åŠ›å¤šè§’åº¦ |
| AT | 36 æ¡ | é½¿è½®é½¿æ¡å¼ | å¼¹ç°§å¤ä½(SR)/åŒä½œç”¨(DA) |
| GY | 0 æ¡ | é½¿è½®é½¿æ¡å¼ | å¾…æ·»åŠ  |
| **æ€»è®¡** | **177 æ¡** | - | - |

### AT ç³»åˆ—åˆ†å¸ƒ

| ç±»å‹ | æ•°é‡ | è¯´æ˜ |
|------|------|------|
| AT-SR (å¼¹ç°§å¤ä½) | 23 æ¡ | K8 å’Œ K10 ä¸¤ç§å¼¹ç°§èŒƒå›´ |
| AT-DA (åŒä½œç”¨) | 13 æ¡ | æ ‡å‡†åŒä½œç”¨å‹ |
| **åˆè®¡** | **36 æ¡** | - |

## ğŸ” æ•°æ®éªŒè¯

### éªŒè¯é¡¹ç›®

#### 1. å­—æ®µå®Œæ•´æ€§ âœ…

AT ç³»åˆ—æ ·æœ¬æ•°æ®ï¼š
```javascript
{
  model_base: "AT-SR52K8",
  series: "AT",
  mechanism: "Rack & Pinion",
  action_type: "SR",
  spring_range: "K8",
  base_price: 75,
  torque_data: {
    "spring_end": 7.7,
    "air_start_0.55MPa": 9.9,
    "air_end_0.55MPa": 6.7
  },
  dimensions: {
    "A": 147,
    "B": 65,
    "H": 92
  }
}
```

#### 2. æ•°æ®ç±»å‹ âœ…

- `series`: String âœ…
- `mechanism`: String âœ…
- `spring_range`: String âœ…
- `base_price`: Number âœ…
- `torque_data`: Object âœ…
- `dimensions`: Object âœ…

#### 3. å”¯ä¸€æ€§çº¦æŸ âœ…

- `model_base` å­—æ®µä¿æŒå”¯ä¸€
- æ— é‡å¤è®°å½•

#### 4. SF ç³»åˆ—ä¿æŠ¤ âœ…

- SF ç³»åˆ—æ•°æ®å®Œæ•´ä¿ç•™ï¼š141 æ¡
- æ— æ•°æ®ä¸¢å¤±æˆ–æŸå

## ğŸ“ æ–‡ä»¶ç»“æ„

```
backend/
â”œâ”€â”€ seed_at_gy.js                        âœ¨ æ–°å¢ - AT/GY å¯¼å…¥è„šæœ¬
â”œâ”€â”€ models/
â”‚   â””â”€â”€ Actuator.js                      ğŸ”„ å‡çº§ - æ·»åŠ æ–°å­—æ®µ
â”œâ”€â”€ data_imports/
â”‚   â”œâ”€â”€ sf_actuators_data.csv            âœ… ç°æœ‰ - SF ç³»åˆ—æ•°æ®
â”‚   â””â”€â”€ at_gy_actuators_data.csv         âœ… æ–°å¢ - AT/GY ç³»åˆ—æ•°æ®
â”œâ”€â”€ package.json                         ğŸ”„ æ›´æ–° - æ·»åŠ  seed-at-gy å‘½ä»¤
â”œâ”€â”€ SEED_AT_GY_USAGE.md                  ğŸ“š æ–‡æ¡£
â””â”€â”€ AT_GYç³»åˆ—å¯¼å…¥å®ŒæˆæŠ¥å‘Š.md             ğŸ“š æœ¬æŠ¥å‘Š
```

## ğŸ¨ æŠ€æœ¯äº®ç‚¹

### 1. å‘åå…¼å®¹è®¾è®¡

**SF ç³»åˆ—ï¼ˆæ—§æ ¼å¼ï¼‰**:
```javascript
{
  model_base: "SF10-150DA",
  body_size: "SF10",
  action_type: "DA",
  torque_symmetric: Map { /* ... */ },
  torque_canted: Map { /* ... */ }
  // æ²¡æœ‰ series, mechanism, torque_data ç­‰å­—æ®µ
}
```

**AT ç³»åˆ—ï¼ˆæ–°æ ¼å¼ï¼‰**:
```javascript
{
  model_base: "AT-SR52K8",
  series: "AT",
  mechanism: "Rack & Pinion",
  action_type: "SR",
  spring_range: "K8",
  torque_data: { /* ... */ },
  dimensions: { /* ... */ }
  // torque_symmetric å’Œ torque_canted ä¸ºç©º
}
```

### 2. æ™ºèƒ½æ•°æ®å¤„ç†

**æ‰­çŸ©æ•°æ®è½¬æ¢**:
```javascript
// CSV è¾“å…¥
torque_data: "{\"spring_end\":7.7,\"air_start_0.55MPa\":9.9}"

// è‡ªåŠ¨è§£æä¸º
torque_data: {
  spring_end: 7.7,
  air_start_0.55MPa: 9.9
}
```

**å°ºå¯¸æ•°æ®å¤„ç†**:
```javascript
// CSV è¾“å…¥
dimensions: "{\"A\":147,\"B\":65,\"H\":92}"

// è‡ªåŠ¨è§£æä¸º
dimensions: {
  A: 147,
  B: 65,
  H: 92
}
```

### 3. å®¹é”™æœºåˆ¶

- âœ… JSON è§£æå¤±è´¥æ—¶ä½¿ç”¨ç©ºå¯¹è±¡
- âœ… å•è¡Œé”™è¯¯ä¸å½±å“æ•´ä½“å¯¼å…¥
- âœ… è¯¦ç»†çš„é”™è¯¯æ—¥å¿—è¾“å‡º
- âœ… å®‰å…¨çš„æ•°æ®åº“æ“ä½œ

## ğŸ“ CSV æ–‡ä»¶æ ¼å¼

### AT/GY ç³»åˆ— CSV æ ¼å¼

```csv
model_base,series,mechanism,action_type,spring_range,base_price,torque_data,dimensions
AT-SR52K8,AT,Rack & Pinion,SR,K8,75,"{""spring_end"":7.7,...}","{""A"":147,...}"
AT-DA52,AT,Rack & Pinion,DA,,64,"{""0.3MPa"":6,...}","{""A"":147,...}"
```

**å­—æ®µè¯´æ˜**:
- `model_base` - å®Œæ•´å‹å·ï¼ˆå¿…éœ€ï¼‰
- `series` - ç³»åˆ—åç§°ï¼šAT æˆ– GYï¼ˆå¿…éœ€ï¼‰
- `mechanism` - æœºæ„ç±»å‹ï¼šRack & Pinionï¼ˆå¿…éœ€ï¼‰
- `action_type` - ä½œç”¨ç±»å‹ï¼šSR æˆ– DAï¼ˆå¿…éœ€ï¼‰
- `spring_range` - å¼¹ç°§èŒƒå›´ï¼šK8, K10ï¼ˆSR å‹å·å¿…éœ€ï¼‰
- `base_price` - åŸºç¡€ä»·æ ¼ï¼ˆå¿…éœ€ï¼‰
- `torque_data` - æ‰­çŸ©æ•°æ® JSONï¼ˆå¿…éœ€ï¼‰
- `dimensions` - å°ºå¯¸æ•°æ® JSONï¼ˆå¯é€‰ï¼‰

## ğŸš€ ä½¿ç”¨æŒ‡å—

### åŸºæœ¬æ“ä½œ

```bash
# 1. å¯¼å…¥ SF ç³»åˆ—ï¼ˆä¼šæ¸…ç©ºæ‰€æœ‰æ•°æ®ï¼‰
npm run seed

# 2. è¿½åŠ å¯¼å…¥ AT/GY ç³»åˆ—ï¼ˆåªåˆ é™¤ AT/GYï¼Œä¿ç•™ SFï¼‰
npm run seed-at-gy

# 3. éªŒè¯æ•°æ®
mongosh cmax-actuators --eval "db.actuators.countDocuments()"
```

### æ›´æ–° AT/GY æ•°æ®

```bash
# ä¿®æ”¹ at_gy_actuators_data.csv å
npm run seed-at-gy  # ä¼šè‡ªåŠ¨åˆ é™¤æ—§çš„ AT/GY æ•°æ®å¹¶é‡æ–°å¯¼å…¥
```

### æŸ¥è¯¢ç¤ºä¾‹

```javascript
// æŸ¥è¯¢æ‰€æœ‰ AT ç³»åˆ—
db.actuators.find({ series: "AT" })

// æŸ¥è¯¢ AT å¼¹ç°§å¤ä½å‹
db.actuators.find({ series: "AT", action_type: "SR" })

// æŸ¥è¯¢ç‰¹å®šå¼¹ç°§èŒƒå›´
db.actuators.find({ series: "AT", spring_range: "K8" })

// æŸ¥è¯¢æ‰€æœ‰ç³»åˆ—
db.actuators.aggregate([
  { $group: { _id: "$series", count: { $sum: 1 } } },
  { $sort: { _id: 1 } }
])
```

## ğŸ”„ ç³»ç»Ÿå…¼å®¹æ€§

### API å…¼å®¹æ€§

ç°æœ‰çš„ API ç«¯ç‚¹æ— éœ€ä¿®æ”¹ï¼Œå› ä¸ºï¼š
1. SF ç³»åˆ—æ•°æ®ç»“æ„ä¿æŒä¸å˜
2. æ–°å­—æ®µä¸ºå¯é€‰å­—æ®µ
3. æŸ¥è¯¢å¯ä»¥æ··åˆä½¿ç”¨æ–°æ—§å­—æ®µ

### å‰ç«¯å…¼å®¹æ€§

å‰ç«¯å¯ä»¥æ ¹æ® `series` å­—æ®µåˆ¤æ–­æ•°æ®ç±»å‹ï¼š
```javascript
if (actuator.series === 'AT' || actuator.series === 'GY') {
  // ä½¿ç”¨ torque_data å’Œ dimensions
  const torque = actuator.torque_data;
  const dims = actuator.dimensions;
} else {
  // SF ç³»åˆ—ï¼Œä½¿ç”¨ torque_symmetric å’Œ torque_canted
  const torqueSymmetric = actuator.torque_symmetric;
  const torqueCanted = actuator.torque_canted;
}
```

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### å¯¼å…¥æ€§èƒ½

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| æ•°æ®é‡ | 36 æ¡ |
| å¯¼å…¥æ—¶é—´ | < 1 ç§’ |
| CSV è§£æ | å®æ—¶æµå¼å¤„ç† |
| æ•°æ®åº“å†™å…¥ | æ‰¹é‡æ’å…¥ (insertMany) |
| æˆåŠŸç‡ | 100% |

### æŸ¥è¯¢æ€§èƒ½

- âœ… `series` å­—æ®µå·²å»ºç«‹ç´¢å¼•
- âœ… æŒ‰ç³»åˆ—æŸ¥è¯¢é€Ÿåº¦å¿«
- âœ… æ”¯æŒå¤åˆæŸ¥è¯¢

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ•°æ®å¯¼å…¥é¡ºåº

**æ¨èé¡ºåº**:
```bash
# é¦–æ¬¡éƒ¨ç½²
1. npm run seed         # å¯¼å…¥ SF ç³»åˆ—
2. npm run seed-at-gy   # è¿½åŠ  AT/GY ç³»åˆ—
```

### 2. æ•°æ®æ›´æ–°ç­–ç•¥

- **SF ç³»åˆ—æ›´æ–°**: è¿è¡Œ `npm run seed`ï¼ˆä¼šæ¸…ç©ºæ‰€æœ‰æ•°æ®ï¼‰
- **AT/GY ç³»åˆ—æ›´æ–°**: è¿è¡Œ `npm run seed-at-gy`ï¼ˆåªå½±å“ AT/GYï¼‰

### 3. å­—æ®µå…¼å®¹æ€§

| å­—æ®µ | SF ç³»åˆ— | AT/GY ç³»åˆ— | è¯´æ˜ |
|------|---------|------------|------|
| series | âŒ | âœ… | AT/GY ä¸“ç”¨ |
| mechanism | âŒ | âœ… | AT/GY ä¸“ç”¨ |
| spring_range | âŒ | âœ… | SR å‹å·ä¸“ç”¨ |
| torque_data | âŒ | âœ… | AT/GY ä¸“ç”¨ |
| dimensions | âŒ | âœ… | AT/GY ä¸“ç”¨ |
| torque_symmetric | âœ… | âŒ | SF ä¸“ç”¨ |
| torque_canted | âœ… | âŒ | SF ä¸“ç”¨ |
| body_size | âœ… | âš ï¸ | SF å¿…éœ€ï¼ŒAT/GY å¯é€‰ |

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

### çŸ­æœŸç›®æ ‡
- [ ] æ·»åŠ  GY ç³»åˆ—æ•°æ®
- [ ] æ›´æ–° API æ–‡æ¡£ï¼Œè¯´æ˜æ–°å­—æ®µ
- [ ] å‰ç«¯é€‚é…æ–°çš„æ•°æ®ç»“æ„
- [ ] æ·»åŠ æŒ‰ç³»åˆ—ç­›é€‰åŠŸèƒ½

### é•¿æœŸç›®æ ‡
- [ ] ç»Ÿä¸€æ•°æ®æ ¼å¼ï¼ˆè€ƒè™‘å°† SF ç³»åˆ—ä¹Ÿè¿ç§»åˆ°æ–°æ ¼å¼ï¼‰
- [ ] æ·»åŠ æ›´å¤šç³»åˆ—æ”¯æŒ
- [ ] ä¼˜åŒ–é€‰å‹ç®—æ³•ï¼Œæ”¯æŒä¸åŒç³»åˆ—
- [ ] åˆ›å»ºç³»åˆ—å¯¹æ¯”åŠŸèƒ½

## âœ¨ æ€»ç»“

æœ¬æ¬¡æ›´æ–°æˆåŠŸå®ç°äº†ï¼š

1. **æ¨¡å‹æ‰©å±•** âœ…
   - æ·»åŠ  5 ä¸ªæ–°å­—æ®µæ”¯æŒ AT/GY ç³»åˆ—
   - ä¿æŒ SF ç³»åˆ—å‘åå…¼å®¹
   - ä¼˜åŒ–ç´¢å¼•æ€§èƒ½

2. **æ•°æ®å¯¼å…¥** âœ…
   - åˆ›å»ºä¸“ç”¨å¯¼å…¥è„šæœ¬
   - 36 æ¡ AT ç³»åˆ—æ•°æ®æˆåŠŸå¯¼å…¥
   - 141 æ¡ SF ç³»åˆ—æ•°æ®å®Œæ•´ä¿ç•™

3. **ä»£ç è´¨é‡** âœ…
   - ä½¿ç”¨ä¸“ä¸šçš„ csv-parser åº“
   - å®Œå–„çš„é”™è¯¯å¤„ç†
   - è¯¦ç»†çš„æ—¥å¿—è¾“å‡º
   - æ¨¡å—åŒ–è®¾è®¡

4. **æ–‡æ¡£å®Œå–„** âœ…
   - ä½¿ç”¨æŒ‡å—
   - API æ–‡æ¡£æ›´æ–°
   - å®ŒæˆæŠ¥å‘Š

ç³»ç»Ÿç°åœ¨æ”¯æŒ**ä¸¤ç§ç±»å‹**çš„æ‰§è¡Œæœºæ„äº§å“çº¿ï¼š
- **SF ç³»åˆ—** - æ°”åŠ¨å¶ç‰‡å¼ï¼ˆ141 æ¡ï¼‰
- **AT ç³»åˆ—** - é½¿è½®é½¿æ¡å¼ï¼ˆ36 æ¡ï¼‰

æ€»æ•°æ®é‡ï¼š**177 æ¡**

---

**å®Œæˆæ—¶é—´**: 2025-10-27  
**ç‰ˆæœ¬**: v2.0  
**çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶æµ‹è¯•é€šè¿‡  
**å¼€å‘å›¢é˜Ÿ**: C-MAX å¼€å‘å›¢é˜Ÿ

