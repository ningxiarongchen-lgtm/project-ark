# 📝 用户批量导入 - 完整指南

**最后更新：** 2025年11月1日  
**问题：** 批量上传用户后没有数据显示  
**原因：** Excel表头字段名不正确

---

## ❌ 问题原因

您的Excel表头使用了**中文列名**或**不正确的英文列名**，系统要求使用**特定的英文字段名**。

### 错误示例
```
❌ 电话 | 姓名 | 英文名 | 角色 | 部门
❌ PHONE | FULL_NAME | ROLE | DEPARTMENT  
```

### 正确示例
```
✅ phone | full_name | english_name | signature | role | department | is_active | password
```

---

## ✅ 正确的Excel表头

### 必填字段（8个）

| 字段英文名 | 中文说明 | 格式要求 | 示例 |
|-----------|---------|---------|------|
| **phone** | 手机号 | 11位中国大陆手机号 | 15589711666 |
| **full_name** | 中文姓名 | 任意中文 | 张浩聪 |
| **english_name** | 英文名 | 任意英文 | Mr. Zhang |
| **signature** | 个性签名 | 任意文本 | 示例signature |
| **role** | 角色 | 必须精确匹配角色英文名 | Sales Manager |
| **department** | 部门 | 任意中文 | 销售部 |
| **is_active** | 是否激活 | TRUE 或 FALSE | TRUE |
| **password** | 密码 | 至少6位 | password |

---

## 📋 角色英文名对照表（必须精确匹配）

| 角色英文名 | 角色中文名 | 建议部门 |
|-----------|-----------|---------|
| Administrator | 管理员 | 管理部门 |
| Sales Manager | 销售经理 | 销售部 |
| Technical Engineer | 技术工程师 | 技术部 |
| Business Engineer | 商务工程师 | 商务部 |
| Procurement Specialist | 采购专员 | 采购部 |
| Production Planner | 生产计划员 | 生产部 |
| QA Inspector | 质检员 | 质检部 |
| Logistics Specialist | 物流专员 | 物流部 |
| Shop Floor Worker | 车间工人 | 生产车间 |

⚠️ **注意：角色名称必须完全一致，包括大小写和空格！**

---

## 📄 完整的Excel模板

### 第1行（表头）
```
phone | full_name | english_name | signature | role | department | is_active | password
```

### 第2行开始（数据）
```excel
15589711666    张浩聪    Mr. Zhang         示例signature    Sales Manager              销售部    TRUE    password
18805375670    刘源      Mr. Liu           示例signature    Procurement Specialist     采购部    TRUE    password
15589711103    张浩聪    Engineer Zhang    示例signature    Technical Engineer         技术部    TRUE    password
18321408536    徐冬春    Mr. Xu            示例signature    Production Planner         生产部    TRUE    password
13800000001    杨权      RIC               示例signature    Sales Manager              销售部    TRUE    password
18322695661    何晓晓    Kay               事缓则圆         Business Engineer          商务部    TRUE    password
13900000001    吴永志    Mr. Wu            示例signature    Sales Manager              销售部    TRUE    password
```

---

## 🚀 使用步骤

### 方法1：使用提供的模板文件（推荐）

1. **打开桌面上的文件：** `用户批量导入模板.csv`
2. **用Excel打开**（右键 → 打开方式 → Microsoft Excel）
3. **修改数据**：
   - 保持第1行表头不变
   - 修改第2行开始的数据为您的实际数据
   - 可以添加更多行
4. **保存文件**
5. **在系统中上传**

---

### 方法2：修改现有Excel文件

1. **打开您的Excel文件**
2. **修改第1行表头**为：
   ```
   phone    full_name    english_name    signature    role    department    is_active    password
   ```
3. **检查每列数据是否对应正确**：
   - 手机号是否在 phone 列
   - 角色英文名是否在 role 列
   - 等等
4. **确保角色名称精确匹配**（见上面的对照表）
5. **保存文件**
6. **在系统中上传**

---

## ⚠️ 常见错误

### 错误1：字段名不正确

❌ **错误示例：**
```
电话 | 姓名 | 角色 | 部门
PHONE | NAME | ROLE | DEPT
```

✅ **正确示例：**
```
phone | full_name | role | department
```

---

### 错误2：角色名称不匹配

❌ **错误示例：**
```
role
Sales Manager    ✅ 正确
sales manager    ❌ 小写错误
SalesManager     ❌ 缺少空格
销售经理          ❌ 中文错误
```

✅ **必须完全一致：**
```
Sales Manager
Technical Engineer
Business Engineer
```

---

### 错误3：手机号格式错误

❌ **错误示例：**
```
135-1234-5678    (有横线)
13512345678a     (有字母)
1351234567       (只有10位)
```

✅ **正确格式：**
```
13512345678      (11位纯数字)
15589711666
18805375670
```

---

### 错误4：is_active 字段错误

❌ **错误示例：**
```
true      (小写)
是         (中文)
1          (数字)
```

✅ **正确格式：**
```
TRUE      (全大写)
FALSE     (全大写)
```

---

## 🔍 上传后如何验证

上传后，系统会显示导入结果：

### ✅ 成功的情况
```
导入完成！总计 7 行，成功 7 条，失败 0 条
```

### ❌ 失败的情况
```
导入完成！总计 7 行，成功 0 条，失败 7 条

失败原因：
- 字段 "phone" 是必填项
- 字段 "role" 是必填项
→ 说明表头字段名不正确
```

---

## 💡 快速检查清单

上传前，请确认：

- [ ] 第1行是英文表头：`phone | full_name | english_name | signature | role | department | is_active | password`
- [ ] phone列是11位手机号
- [ ] role列的角色名称与系统完全一致（包括大小写和空格）
- [ ] is_active列是 TRUE 或 FALSE
- [ ] password列至少6位
- [ ] 文件格式是 .csv 或 .xlsx

---

## 📞 还有问题？

### 问题1：上传后提示"字段是必填项"

**原因：** 表头字段名不正确  
**解决：** 使用提供的模板文件，或严格按照本文档修改表头

---

### 问题2：上传后提示"角色不存在"

**原因：** 角色英文名不匹配  
**解决：** 检查角色对照表，确保完全一致（包括大小写和空格）

---

### 问题3：上传后提示"手机号格式错误"

**原因：** 手机号不是11位纯数字  
**解决：** 确保手机号是11位数字，以1开头，无横线或其他字符

---

### 问题4：上传成功但看不到数据

**可能原因：**
1. 浏览器缓存问题 → 刷新页面（Ctrl+F5 或 Cmd+Shift+R）
2. 筛选条件问题 → 清除搜索框和筛选条件
3. 分页问题 → 检查是否在第一页

---

## 🎯 最佳实践

1. **先下载模板**，在模板基础上修改
2. **小批量测试**，先上传1-2条数据测试
3. **备份原数据**，上传前保存原始文件
4. **仔细检查角色名**，这是最常见的错误
5. **使用CSV格式**，避免Excel格式兼容性问题

---

## 📊 示例数据（可直接使用）

### 测试用户（9个角色）

| phone | full_name | english_name | signature | role | department | is_active | password |
|-------|-----------|--------------|-----------|------|------------|-----------|----------|
| 13000000001 | 王管理 | Mr. Wang | 示例 | Administrator | 管理部门 | TRUE | password |
| 13000000002 | 李销售 | Mr. Li | 示例 | Sales Manager | 销售部 | TRUE | password |
| 13000000003 | 张技术 | Mr. Zhang | 示例 | Technical Engineer | 技术部 | TRUE | password |
| 13000000004 | 刘商务 | Mr. Liu | 示例 | Business Engineer | 商务部 | TRUE | password |
| 13000000005 | 赵采购 | Mr. Zhao | 示例 | Procurement Specialist | 采购部 | TRUE | password |
| 13000000006 | 钱计划 | Mr. Qian | 示例 | Production Planner | 生产部 | TRUE | password |
| 13000000007 | 孙质检 | Mr. Sun | 示例 | QA Inspector | 质检部 | TRUE | password |
| 13000000008 | 周物流 | Mr. Zhou | 示例 | Logistics Specialist | 物流部 | TRUE | password |
| 13000000009 | 郑工人 | Mr. Zheng | 示例 | Shop Floor Worker | 生产车间 | TRUE | password |

---

**祝您导入成功！** 🎉

如有其他问题，请查看系统文档或联系技术支持。

---

**文档版本：** v1.0  
**创建日期：** 2025年11月1日  
**维护团队：** Project Ark Team

