# 售后服务功能测试指南

## 📋 测试前准备

### 1. 启动服务

**后端服务器**:
```bash
cd backend
npm start
```

**前端开发服务器**:
```bash
cd frontend
npm run dev
```

### 2. 登录系统
- 访问: `http://localhost:5173`
- 使用有效的用户账号登录

---

## ✅ 测试清单

### 一、工单创建测试

#### 测试1.1: 创建基础工单
**步骤**:
1. 点击左侧菜单"售后服务"
2. 点击右上角"创建工单"按钮
3. 填写表单:
   - 工单类型: 维修
   - 优先级: 高
   - 客户姓名: 张三
   - 联系电话: 13800138000
   - 电子邮箱: zhangsan@test.com
   - 公司名称: 测试公司
   - 问题标题: 执行器无法启动
   - 问题详情: 设备通电后无反应，指示灯不亮
   - 问题类别: Hardware Failure
   - 严重程度: Major
4. 点击"创建工单"

**预期结果**:
- ✅ 成功提示: "工单创建成功！工单号: TK-YYYYMM-XXXX"
- ✅ 弹出确认框询问是否查看详情
- ✅ 工单列表中出现新创建的工单
- ✅ 统计卡片数字更新

#### 测试1.2: 创建不同优先级工单
**步骤**: 重复测试1.1，分别创建以下优先级的工单:
- 低优先级
- 正常优先级
- 紧急优先级
- 严重优先级

**预期结果**:
- ✅ 所有工单创建成功
- ✅ 优先级标签颜色正确显示
- ✅ 紧急和严重优先级显示警告图标

#### 测试1.3: 创建不同类型工单
**步骤**: 创建以下类型的工单:
- 安装
- 维护
- 检查
- 培训
- 咨询
- 投诉

**预期结果**:
- ✅ 所有类型工单创建成功
- ✅ 类型标签正确显示

#### 测试1.4: 必填字段验证
**步骤**:
1. 打开创建工单Modal
2. 不填写任何字段
3. 直接点击"创建工单"

**预期结果**:
- ✅ 显示验证错误提示
- ✅ 必填字段标红
- ✅ 无法提交表单

---

### 二、工单列表测试

#### 测试2.1: 工单列表显示
**步骤**: 进入售后服务中心

**预期结果**:
- ✅ 显示所有工单
- ✅ 表格列显示正确:
  - 工单号
  - 工单类型
  - 问题标题
  - 客户信息
  - 优先级
  - 状态
  - 分配工程师
  - SLA状态
  - 创建时间
  - 操作按钮
- ✅ 分页正常工作

#### 测试2.2: 按状态筛选
**步骤**:
1. 点击状态下拉框
2. 选择"待处理"

**预期结果**:
- ✅ 只显示状态为"待处理"的工单
- ✅ 分页重置为第1页

#### 测试2.3: 按优先级筛选
**步骤**:
1. 点击优先级下拉框
2. 选择"高"

**预期结果**:
- ✅ 只显示优先级为"高"的工单

#### 测试2.4: 按类型筛选
**步骤**:
1. 点击工单类型下拉框
2. 选择"维修"

**预期结果**:
- ✅ 只显示类型为"维修"的工单

#### 测试2.5: 按日期范围筛选
**步骤**:
1. 点击日期范围选择器
2. 选择今天到今天

**预期结果**:
- ✅ 只显示今天创建的工单

#### 测试2.6: 组合筛选
**步骤**:
1. 选择状态: 待处理
2. 选择优先级: 高
3. 选择类型: 维修

**预期结果**:
- ✅ 显示同时满足所有条件的工单

#### 测试2.7: 重置筛选
**步骤**: 点击"重置"按钮

**预期结果**:
- ✅ 所有筛选条件清空
- ✅ 显示所有工单

#### 测试2.8: 分页测试
**步骤**:
1. 切换每页显示数量 (10/20/50)
2. 点击不同页码

**预期结果**:
- ✅ 每页显示数量正确变化
- ✅ 页码切换正常
- ✅ 总记录数显示正确

---

### 三、工单详情测试

#### 测试3.1: 查看工单详情
**步骤**:
1. 在工单列表中点击工单编号
2. 或点击"查看"按钮

**预期结果**:
- ✅ 进入工单详情页
- ✅ 所有信息正确显示:
  - 工单信息卡片
  - 工单进度Steps
  - 客户信息卡片
  - 问题信息卡片
  - 服务信息卡片
  - SLA信息卡片

#### 测试3.2: 工单进度展示
**步骤**: 查看工单进度Steps组件

**预期结果**:
- ✅ 显示5个步骤: 待处理 → 已分配 → 处理中 → 已解决 → 已关闭
- ✅ 当前状态高亮显示
- ✅ 已完成步骤显示为绿色

---

### 四、工单状态管理测试

#### 测试4.1: 更新工单状态
**步骤**:
1. 进入工单详情页
2. 点击"更新状态"按钮
3. 选择新状态: "已分配"
4. 点击"确认更新"

**预期结果**:
- ✅ 成功提示: "工单状态已更新"
- ✅ Modal关闭
- ✅ 工单详情页状态标签更新
- ✅ Steps进度更新

#### 测试4.2: 状态流转测试
**步骤**: 按顺序更新状态:
1. Open → Assigned
2. Assigned → In Progress
3. In Progress → Resolved
4. Resolved → Closed

**预期结果**:
- ✅ 每次状态更新成功
- ✅ Steps进度条同步更新

#### 测试4.3: 特殊状态测试
**步骤**:
1. 将状态更新为"处理中"
2. 再更新为"等待零件"
3. 再更新回"处理中"

**预期结果**:
- ✅ 状态切换成功
- ✅ 状态标签颜色正确

---

### 五、分配工程师测试

#### 测试5.1: 分配工程师
**步骤**:
1. 进入工单详情页
2. 点击"分配工程师"按钮
3. 填写:
   - 工程师ID: test-engineer-001
   - 计划服务日期: 2025-10-30
   - 服务地址: 客户现场
4. 点击"确认分配"

**预期结果**:
- ✅ 成功提示: "工程师分配成功"
- ✅ 服务信息卡片更新
- ✅ 显示分配的工程师
- ✅ 显示计划服务日期
- ✅ 显示服务地址

#### 测试5.2: 重新分配
**步骤**:
1. 对已分配的工单
2. 再次点击"分配工程师"
3. 分配给不同工程师

**预期结果**:
- ✅ 分配成功
- ✅ 工程师信息更新

---

### 六、跟进记录测试

#### 测试6.1: 添加电话跟进
**步骤**:
1. 进入工单详情页
2. 点击"添加跟进"按钮
3. 选择类型: 电话
4. 输入内容: "联系客户确认问题"
5. 点击"添加"

**预期结果**:
- ✅ 成功提示: "跟进记录已添加"
- ✅ 跟进记录时间轴显示新记录
- ✅ 显示蓝色标签"电话"
- ✅ 显示跟进内容
- ✅ 显示跟进时间

#### 测试6.2: 添加不同类型跟进
**步骤**: 分别添加以下类型的跟进:
- 邮件
- 拜访
- 备注

**预期结果**:
- ✅ 所有类型跟进添加成功
- ✅ 不同类型显示不同颜色标签
- ✅ 时间轴按时间倒序排列

#### 测试6.3: 查看跟进历史
**步骤**: 在工单详情页滚动到底部

**预期结果**:
- ✅ 显示"跟进记录"时间轴
- ✅ 所有跟进记录按时间排序
- ✅ 每条记录显示完整信息

---

### 七、客户反馈测试

#### 测试7.1: 提交5星反馈
**步骤**:
1. 将工单状态更新为"已解决"
2. 刷新页面
3. 出现"提交反馈"按钮
4. 点击"提交反馈"
5. 选择5颗星
6. 输入评论: "服务及时，问题解决彻底"
7. 点击"提交"

**预期结果**:
- ✅ 成功提示: "反馈提交成功"
- ✅ Modal关闭
- ✅ 显示"客户反馈"卡片
- ✅ 显示5颗星评分
- ✅ 显示评论内容
- ✅ 显示反馈时间

#### 测试7.2: 不同星级反馈
**步骤**: 对不同工单提交1-5星的反馈

**预期结果**:
- ✅ 所有星级都能提交
- ✅ 星级显示正确

#### 测试7.3: 无评论反馈
**步骤**: 只选择星级，不填写评论

**预期结果**:
- ✅ 提交成功
- ✅ 反馈卡片只显示星级

---

### 八、SLA测试

#### 测试8.1: 查看SLA信息
**步骤**: 进入工单详情页，查看SLA卡片

**预期结果**:
- ✅ 显示4个统计卡:
  - 响应时间目标
  - 实际响应时间
  - 解决时间目标
  - 实际解决时间
- ✅ 显示SLA状态徽章

#### 测试8.2: SLA超时显示
**步骤**: 
1. 创建一个工单
2. 等待超过SLA目标时间
3. 查看SLA卡片

**预期结果**:
- ✅ 超时数值显示为红色
- ✅ SLA状态徽章显示"违反SLA"(红色)

#### 测试8.3: SLA正常显示
**步骤**: 在SLA时间内完成工单

**预期结果**:
- ✅ 时间数值显示为绿色
- ✅ SLA状态徽章显示"符合SLA"(绿色)

---

### 九、统计信息测试

#### 测试9.1: 查看统计卡片
**步骤**: 进入售后服务中心

**预期结果**:
- ✅ 显示6个统计卡:
  - 工单总数
  - 待处理
  - 处理中
  - 已解决
  - 平均满意度(星级)
  - SLA违反
- ✅ 数字准确

#### 测试9.2: 统计实时更新
**步骤**:
1. 创建新工单
2. 返回服务中心

**预期结果**:
- ✅ 工单总数 +1
- ✅ 待处理 +1

#### 测试9.3: 平均满意度计算
**步骤**:
1. 对多个工单提交不同星级的反馈
2. 查看统计卡片

**预期结果**:
- ✅ 平均满意度计算正确
- ✅ 显示星级组件

---

### 十、删除工单测试

#### 测试10.1: 删除待处理工单
**步骤**:
1. 在工单列表找到状态为"待处理"的工单
2. 点击操作列的"..."菜单
3. 点击"删除"
4. 确认删除

**预期结果**:
- ✅ 成功提示: "工单已删除"
- ✅ 工单从列表中消失
- ✅ 统计数字更新

#### 测试10.2: 删除已取消工单
**步骤**:
1. 将工单状态更新为"已取消"
2. 删除此工单

**预期结果**:
- ✅ 删除成功

#### 测试10.3: 删除其他状态工单 (应失败)
**步骤**:
1. 找到状态为"处理中"的工单
2. 尝试删除

**预期结果**:
- ✅ 删除按钮禁用
- ✅ 或显示错误提示

---

### 十一、UI/UX测试

#### 测试11.1: 响应式布局
**步骤**:
1. 调整浏览器窗口大小
2. 测试手机、平板、桌面尺寸

**预期结果**:
- ✅ 布局自适应
- ✅ 表格横向滚动
- ✅ 按钮和卡片正常显示

#### 测试11.2: 颜色和图标
**步骤**: 查看各种状态、优先级的标签

**预期结果**:
- ✅ 颜色符合设计规范
- ✅ 图标正确显示
- ✅ 高优先级有警告图标
- ✅ 处理中有工具图标
- ✅ 已解决有完成图标

#### 测试11.3: 悬停效果
**步骤**: 鼠标悬停在工单标题、按钮上

**预期结果**:
- ✅ 显示Tooltip提示
- ✅ 按钮有hover效果
- ✅ 工单号有下划线效果

#### 测试11.4: Modal交互
**步骤**: 打开各种Modal

**预期结果**:
- ✅ Modal居中显示
- ✅ 背景遮罩正常
- ✅ 关闭按钮正常工作
- ✅ ESC键可关闭

---

### 十二、性能测试

#### 测试12.1: 大量数据加载
**步骤**:
1. 创建100+工单
2. 查看工单列表

**预期结果**:
- ✅ 分页正常工作
- ✅ 加载速度可接受
- ✅ 无卡顿现象

#### 测试12.2: 筛选性能
**步骤**: 在大量数据下进行筛选

**预期结果**:
- ✅ 筛选响应快速
- ✅ 结果准确

---

### 十三、错误处理测试

#### 测试13.1: 网络错误
**步骤**:
1. 关闭后端服务器
2. 尝试创建工单

**预期结果**:
- ✅ 显示错误提示
- ✅ 不会崩溃
- ✅ 可以重试

#### 测试13.2: 数据验证错误
**步骤**: 输入无效数据

**预期结果**:
- ✅ 显示验证错误
- ✅ 提示清晰明确

#### 测试13.3: 权限错误
**步骤**: 以普通用户尝试管理员操作

**预期结果**:
- ✅ 显示权限不足提示
- ✅ 或相关按钮不可见

---

## 📝 测试报告模板

### 测试执行记录

| 测试项 | 测试时间 | 测试人 | 结果 | 备注 |
|--------|---------|--------|------|------|
| 工单创建 | YYYY-MM-DD | 张三 | ✅ 通过 | - |
| 工单列表 | YYYY-MM-DD | 张三 | ✅ 通过 | - |
| 工单详情 | YYYY-MM-DD | 张三 | ✅ 通过 | - |
| 状态管理 | YYYY-MM-DD | 张三 | ✅ 通过 | - |
| 分配工程师 | YYYY-MM-DD | 张三 | ✅ 通过 | - |
| 跟进记录 | YYYY-MM-DD | 张三 | ✅ 通过 | - |
| 客户反馈 | YYYY-MM-DD | 张三 | ✅ 通过 | - |
| SLA管理 | YYYY-MM-DD | 张三 | ✅ 通过 | - |
| 统计信息 | YYYY-MM-DD | 张三 | ✅ 通过 | - |
| 删除工单 | YYYY-MM-DD | 张三 | ✅ 通过 | - |

### 已发现问题

| 问题ID | 问题描述 | 严重程度 | 发现时间 | 状态 |
|--------|---------|---------|---------|------|
| - | - | - | - | - |

### 测试总结

- **测试项总数**: XX
- **通过数**: XX
- **失败数**: XX
- **通过率**: XX%

---

## 🐛 已知问题

（目前无已知问题）

---

## ✅ 测试完成标准

- [ ] 所有功能测试通过
- [ ] UI/UX测试通过
- [ ] 性能测试通过
- [ ] 错误处理测试通过
- [ ] 无严重或高优先级Bug
- [ ] 文档齐全

---

**测试版本**: v1.0.0  
**最后更新**: 2025年10月27日


