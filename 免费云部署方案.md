# ðŸŽ¯ å®Œå…¨å…è´¹äº‘éƒ¨ç½²æ–¹æ¡ˆ
## æœ¬æœºä¸å¼€æœºï¼Œå›¢é˜Ÿä¹Ÿèƒ½è®¿é—®

---

## ðŸ“‹ æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | å…è´¹é¢åº¦ | è®¿é—®é€Ÿåº¦ | éš¾åº¦ | æŽ¨èåº¦ |
|------|---------|---------|------|--------|
| **æ–¹æ¡ˆ1ï¼šRailway.app** | â­â­â­â­â­ | å›½å¤–å¿« | ç®€å• | â­â­â­â­â­ |
| **æ–¹æ¡ˆ2ï¼šRender.com** | â­â­â­â­ | å›½å¤–å¿« | ç®€å• | â­â­â­â­ |
| **æ–¹æ¡ˆ3ï¼šé˜¿é‡Œäº‘/è…¾è®¯äº‘å­¦ç”Ÿæœº** | â­â­â­ | å›½å†…å¿« | ä¸­ç­‰ | â­â­â­â­â­ |
| **æ–¹æ¡ˆ4ï¼šVercel + MongoDB Atlas** | â­â­â­â­ | å›½å¤–å¿« | ç®€å• | â­â­â­â­ |

---

## ðŸš€ æŽ¨èæ–¹æ¡ˆï¼šRailway.appï¼ˆæœ€ç®€å•ï¼‰

### ä¸ºä»€ä¹ˆé€‰Railwayï¼Ÿ
- âœ… **å®Œå…¨å…è´¹**ï¼šæ¯æœˆ$5å…è´¹é¢åº¦ï¼ˆè¶³å¤Ÿè¿è¡Œå°åž‹åº”ç”¨ï¼‰
- âœ… **ä¸€é”®éƒ¨ç½²**ï¼šç›´æŽ¥è¿žæŽ¥GitHubï¼Œè‡ªåŠ¨éƒ¨ç½²
- âœ… **åŒ…å«æ•°æ®åº“**ï¼šå†…ç½®MongoDBæ”¯æŒ
- âœ… **è‡ªåŠ¨HTTPS**ï¼šå…è´¹SSLè¯ä¹¦
- âœ… **æŒç»­é›†æˆ**ï¼šä»£ç æŽ¨é€è‡ªåŠ¨æ›´æ–°
- âœ… **é›¶é…ç½®**ï¼šä¸éœ€è¦æœåŠ¡å™¨ç®¡ç†ç»éªŒ

### éƒ¨ç½²æ­¥éª¤ï¼ˆ15åˆ†é’Ÿå®Œæˆï¼‰

#### ç¬¬1æ­¥ï¼šå‡†å¤‡GitHubä»“åº“

```bash
# 1. å¦‚æžœè¿˜æ²¡æœ‰æŽ¨é€åˆ°GitHubï¼Œå…ˆåˆ›å»ºè¿œç¨‹ä»“åº“
# åœ¨GitHubä¸Šåˆ›å»ºæ–°ä»“åº“ï¼ˆå¦‚ï¼šproject-arkï¼‰

# 2. æŽ¨é€ä»£ç åˆ°GitHub
cd "/Users/hexiaoxiao/Desktop/Model Selection System"
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/project-ark.git
git branch -M main
git push -u origin main
```

#### ç¬¬2æ­¥ï¼šæ³¨å†ŒRailwayè´¦å·

1. è®¿é—®ï¼šhttps://railway.app
2. ç‚¹å‡» "Login" æˆ– "Start a New Project"
3. ä½¿ç”¨GitHubè´¦å·ç™»å½•ï¼ˆä¸€é”®æŽˆæƒï¼‰

#### ç¬¬3æ­¥ï¼šéƒ¨ç½²åŽç«¯

1. **åˆ›å»ºæ–°é¡¹ç›®**
   - ç‚¹å‡» "New Project"
   - é€‰æ‹© "Deploy from GitHub repo"
   - é€‰æ‹©ä½ çš„ä»“åº“ `project-ark`

2. **é…ç½®åŽç«¯æœåŠ¡**
   ```
   Root Directory: /backend
   Build Command: npm install
   Start Command: npm start
   ```

3. **æ·»åŠ çŽ¯å¢ƒå˜é‡**
   - ç‚¹å‡» Variables æ ‡ç­¾
   - æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š
   
   ```env
   NODE_ENV=production
   PORT=5001
   
   # JWTå¯†é’¥ï¼ˆä½¿ç”¨ä¹‹å‰ç”Ÿæˆçš„ï¼‰
   JWT_SECRET=ã€ä»Ž JWTå¯†é’¥-ç”Ÿäº§çŽ¯å¢ƒä¸“ç”¨.txt å¤åˆ¶ã€‘
   JWT_REFRESH_SECRET=ã€ä»Ž JWTå¯†é’¥-ç”Ÿäº§çŽ¯å¢ƒä¸“ç”¨.txt å¤åˆ¶ã€‘
   SESSION_SECRET=ã€ä»Ž JWTå¯†é’¥-ç”Ÿäº§çŽ¯å¢ƒä¸“ç”¨.txt å¤åˆ¶ã€‘
   
   # æ•°æ®åº“è¿žæŽ¥ï¼ˆç­‰ä¼šä»ŽMongoDBæœåŠ¡èŽ·å–ï¼‰
   MONGODB_URI=ã€ç¨åŽå¡«å†™ã€‘
   
   # CORSï¼ˆå‰ç«¯éƒ¨ç½²åŽå¡«å†™ï¼‰
   ALLOWED_ORIGINS=ã€å‰ç«¯URLï¼Œç¨åŽå¡«å†™ã€‘
   ```

4. **æ·»åŠ MongoDBæ•°æ®åº“**
   - ç‚¹å‡» "+ New" æŒ‰é’®
   - é€‰æ‹© "Database" â†’ "Add MongoDB"
   - Railwayä¼šè‡ªåŠ¨åˆ›å»ºMongoDBå®žä¾‹
   - å¤åˆ¶ `MONGO_URL` åˆ°ä¸Šé¢çš„ `MONGODB_URI`

5. **éƒ¨ç½²**
   - ç‚¹å‡» "Deploy"
   - ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆçº¦2-3åˆ†é’Ÿï¼‰
   - å¤åˆ¶ç”Ÿæˆçš„åŽç«¯URLï¼ˆå¦‚ï¼š`https://project-ark-production.up.railway.app`ï¼‰

#### ç¬¬4æ­¥ï¼šéƒ¨ç½²å‰ç«¯

æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š

##### é€‰æ‹©Aï¼šä½¿ç”¨Vercelï¼ˆæŽ¨èï¼Œæ›´å¿«ï¼‰

1. **è®¿é—®Vercel**
   - æ‰“å¼€ï¼šhttps://vercel.com
   - ä½¿ç”¨GitHubè´¦å·ç™»å½•

2. **å¯¼å…¥é¡¹ç›®**
   - ç‚¹å‡» "Add New" â†’ "Project"
   - é€‰æ‹© `project-ark` ä»“åº“
   - Framework Preset: Vite
   - Root Directory: `frontend`

3. **é…ç½®çŽ¯å¢ƒå˜é‡**
   ```env
   VITE_API_URL=https://ä½ çš„åŽç«¯URL.railway.app
   ```

4. **éƒ¨ç½²**
   - ç‚¹å‡» "Deploy"
   - ç­‰å¾…æž„å»ºå®Œæˆï¼ˆçº¦1-2åˆ†é’Ÿï¼‰
   - èŽ·å¾—å‰ç«¯URLï¼ˆå¦‚ï¼š`https://project-ark.vercel.app`ï¼‰

5. **æ›´æ–°åŽç«¯CORS**
   - å›žåˆ°RailwayåŽç«¯é¡¹ç›®
   - æ›´æ–° `ALLOWED_ORIGINS` ä¸ºä½ çš„Vercel URL
   - é‡æ–°éƒ¨ç½²

##### é€‰æ‹©Bï¼šRailwayéƒ¨ç½²å‰ç«¯ï¼ˆå…¨åœ¨ä¸€èµ·ï¼‰

1. **åœ¨Railwayé¡¹ç›®ä¸­æ·»åŠ å‰ç«¯æœåŠ¡**
   - ç‚¹å‡» "+ New" 
   - é€‰æ‹© "GitHub Repo" â†’ é€‰æ‹©ç›¸åŒä»“åº“
   - Root Directory: `/frontend`

2. **é…ç½®å‰ç«¯**
   ```
   Build Command: npm run build
   Start Command: npx serve -s dist -p $PORT
   ```

3. **æ·»åŠ çŽ¯å¢ƒå˜é‡**
   ```env
   VITE_API_URL=https://ä½ çš„åŽç«¯URL.railway.app
   ```

4. **éƒ¨ç½²å¹¶èŽ·å–URL**

#### ç¬¬5æ­¥ï¼šåˆå§‹åŒ–æ•°æ®åº“

```bash
# 1. æœ¬åœ°è¿žæŽ¥Railwayçš„MongoDB
# åœ¨Railwayå¤åˆ¶MongoDBè¿žæŽ¥å­—ç¬¦ä¸²

# 2. å¯¼å…¥æ•°æ®
cd backend
MONGODB_URI="mongodb://railwayè¿žæŽ¥å­—ç¬¦ä¸²" npm run seed:final

# æˆ–è€…åˆ›å»ºä¸€ä¸ªä¸´æ—¶è„šæœ¬åœ¨Railwayä¸Šè¿è¡Œ
```

#### ç¬¬6æ­¥ï¼šæµ‹è¯•è®¿é—®

1. æ‰“å¼€å‰ç«¯URLï¼ˆVercelæˆ–Railwayæä¾›çš„ï¼‰
2. ä½¿ç”¨æµ‹è¯•è´¦å·ç™»å½•ï¼š
   - é”€å”®ç»ç†ï¼š13000000002 / password
   - æŠ€æœ¯å·¥ç¨‹å¸ˆï¼š13000000003 / password
3. æµ‹è¯•å„é¡¹åŠŸèƒ½

---

## ðŸ‡¨ðŸ‡³ å›½å†…è®¿é—®ä¼˜åŒ–æ–¹æ¡ˆï¼šé˜¿é‡Œäº‘/è…¾è®¯äº‘å­¦ç”Ÿæœº

### ä¸ºä»€ä¹ˆé€‰å­¦ç”Ÿæœºï¼Ÿ
- âœ… **è¶…ä½Žä»·æ ¼**ï¼š9.9å…ƒ/æœˆï¼ˆå­¦ç”Ÿè®¤è¯ï¼‰æˆ–å…è´¹è¯•ç”¨
- âœ… **å›½å†…è®¿é—®å¿«**ï¼šé€‚åˆå›½å†…å›¢é˜Ÿ
- âœ… **å®Œå…¨æŽ§åˆ¶**ï¼šå¯ä»¥éšæ—¶ä¿®æ”¹é…ç½®
- âœ… **é•¿æœŸä½¿ç”¨**ï¼šå¯ç»­è´¹ï¼Œä¸å—å…è´¹é¢åº¦é™åˆ¶

### ç”³è¯·æ¡ä»¶
- å­¦ç”Ÿèº«ä»½ï¼ˆæœ‰å­¦ä¿¡ç½‘è´¦å·ï¼‰
- æˆ–æ–°ç”¨æˆ·å…è´¹è¯•ç”¨ï¼ˆ1-3ä¸ªæœˆï¼‰

### éƒ¨ç½²æ­¥éª¤

#### ç¬¬1æ­¥ï¼šè´­ä¹°æœåŠ¡å™¨

**é˜¿é‡Œäº‘å­¦ç”Ÿæœº**ï¼š
1. è®¿é—®ï¼šhttps://developer.aliyun.com/plan/student
2. å­¦ç”Ÿè®¤è¯
3. è´­ä¹°äº‘æœåŠ¡å™¨ECSï¼ˆ9.9å…ƒ/æœˆï¼‰
4. é€‰æ‹©é…ç½®ï¼š
   - CPU: 1æ ¸
   - å†…å­˜: 2GB
   - ç³»ç»Ÿç›˜: 40GB
   - æ“ä½œç³»ç»Ÿ: Ubuntu 20.04 LTS

**è…¾è®¯äº‘å­¦ç”Ÿæœº**ï¼š
1. è®¿é—®ï¼šhttps://cloud.tencent.com/act/campus
2. å­¦ç”Ÿè®¤è¯
3. è´­ä¹°äº‘æœåŠ¡å™¨ï¼ˆ10å…ƒ/æœˆï¼‰

#### ç¬¬2æ­¥ï¼šè¿žæŽ¥æœåŠ¡å™¨

```bash
# ä½¿ç”¨SSHè¿žæŽ¥ï¼ˆæ›¿æ¢æˆä½ çš„æœåŠ¡å™¨IPï¼‰
ssh root@ä½ çš„æœåŠ¡å™¨IP

# ç¬¬ä¸€æ¬¡è¿žæŽ¥ä¼šè¦æ±‚è¾“å…¥å¯†ç ï¼ˆè´­ä¹°æ—¶è®¾ç½®çš„ï¼‰
```

#### ç¬¬3æ­¥ï¼šå®‰è£…çŽ¯å¢ƒï¼ˆä¸€é”®è„šæœ¬ï¼‰

åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºå¹¶è¿è¡Œå®‰è£…è„šæœ¬ï¼š

```bash
# åˆ›å»ºå®‰è£…è„šæœ¬
cat > install_server.sh << 'EOF'
#!/bin/bash
# æœåŠ¡å™¨çŽ¯å¢ƒä¸€é”®å®‰è£…è„šæœ¬

set -e

echo "================================"
echo "å¼€å§‹å®‰è£…æœåŠ¡å™¨çŽ¯å¢ƒ"
echo "================================"

# æ›´æ–°ç³»ç»Ÿ
echo "1. æ›´æ–°ç³»ç»Ÿ..."
apt update && apt upgrade -y

# å®‰è£…Node.js 18
echo "2. å®‰è£…Node.js..."
curl -fsSL https://deb.nodesource.com/setup_18.x | bash -
apt install -y nodejs

# å®‰è£…MongoDB
echo "3. å®‰è£…MongoDB..."
wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | apt-key add -
echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/6.0 multiverse" | tee /etc/apt/sources.list.d/mongodb-org-6.0.list
apt update
apt install -y mongodb-org

# å¯åŠ¨MongoDB
systemctl start mongod
systemctl enable mongod

# å®‰è£…PM2
echo "4. å®‰è£…PM2..."
npm install -g pm2

# å®‰è£…Nginx
echo "5. å®‰è£…Nginx..."
apt install -y nginx

# å®‰è£…Git
echo "6. å®‰è£…Git..."
apt install -y git

# é…ç½®é˜²ç«å¢™
echo "7. é…ç½®é˜²ç«å¢™..."
ufw allow 22/tcp
ufw allow 80/tcp
ufw allow 443/tcp
ufw --force enable

echo "================================"
echo "âœ… çŽ¯å¢ƒå®‰è£…å®Œæˆï¼"
echo "================================"

# æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
echo ""
echo "å·²å®‰è£…ç‰ˆæœ¬ï¼š"
echo "  Node.js: $(node -v)"
echo "  npm: $(npm -v)"
echo "  MongoDB: $(mongod --version | head -n 1)"
echo "  PM2: $(pm2 -v)"
echo "  Nginx: $(nginx -v 2>&1)"
echo ""
EOF

# è¿è¡Œå®‰è£…è„šæœ¬
chmod +x install_server.sh
./install_server.sh
```

#### ç¬¬4æ­¥ï¼šéƒ¨ç½²åº”ç”¨

```bash
# 1. å…‹éš†é¡¹ç›®
cd /var/www
git clone https://github.com/ä½ çš„ç”¨æˆ·å/project-ark.git
cd project-ark

# 2. é…ç½®çŽ¯å¢ƒå˜é‡
cd backend
cp env.production.template .env.production

# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano .env.production
# å¡«å…¥JWTå¯†é’¥ç­‰é…ç½®

# 3. å®‰è£…ä¾èµ–
npm ci --production

# 4. åˆå§‹åŒ–æ•°æ®åº“
npm run seed:final

# 5. å¯åŠ¨åŽç«¯
pm2 start ecosystem.config.js --env production
pm2 save
pm2 startup  # è®¾ç½®å¼€æœºè‡ªå¯åŠ¨

# 6. æž„å»ºå‰ç«¯
cd ../frontend
npm ci
npm run build

# 7. é…ç½®Nginx
cat > /etc/nginx/sites-available/project-ark << 'EOF'
server {
    listen 80;
    server_name ä½ çš„æœåŠ¡å™¨IP;  # æˆ–åŸŸå

    # å‰ç«¯
    location / {
        root /var/www/project-ark/frontend/dist;
        try_files $uri $uri/ /index.html;
    }

    # åŽç«¯API
    location /api {
        proxy_pass http://localhost:5001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
EOF

# å¯ç”¨é…ç½®
ln -s /etc/nginx/sites-available/project-ark /etc/nginx/sites-enabled/
nginx -t
systemctl reload nginx

echo "================================"
echo "âœ… éƒ¨ç½²å®Œæˆï¼"
echo "è®¿é—®åœ°å€: http://ä½ çš„æœåŠ¡å™¨IP"
echo "================================"
```

---

## ðŸ”„ ä»£ç æ›´æ–°æµç¨‹ï¼ˆä¿®å¤BugåŽï¼‰

### Railway/Vercelæ–¹å¼ï¼ˆè‡ªåŠ¨éƒ¨ç½²ï¼‰

```bash
# 1. æœ¬åœ°ä¿®å¤bug
# ç¼–è¾‘ä»£ç ...

# 2. æäº¤åˆ°Git
git add .
git commit -m "fix: ä¿®å¤XXXé—®é¢˜"
git push origin main

# 3. ç­‰å¾…è‡ªåŠ¨éƒ¨ç½²ï¼ˆ1-2åˆ†é’Ÿï¼‰
# Railwayå’ŒVercelä¼šè‡ªåŠ¨æ£€æµ‹åˆ°ä»£ç å˜æ›´å¹¶é‡æ–°éƒ¨ç½²
```

### äº‘æœåŠ¡å™¨æ–¹å¼ï¼ˆæ‰‹åŠ¨éƒ¨ç½²ï¼‰

```bash
# è¿žæŽ¥åˆ°æœåŠ¡å™¨
ssh root@ä½ çš„æœåŠ¡å™¨IP

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /var/www/project-ark

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# æ›´æ–°åŽç«¯
cd backend
npm ci --production
pm2 restart cmax-backend

# æ›´æ–°å‰ç«¯
cd ../frontend
npm ci
npm run build

# é‡å¯Nginx
systemctl reload nginx

echo "âœ… æ›´æ–°å®Œæˆï¼"
```

---

## ðŸ’° æˆæœ¬å¯¹æ¯”

| æ–¹æ¡ˆ | æœˆè´¹ç”¨ | å¹´è´¹ç”¨ | è¯´æ˜Ž |
|------|--------|--------|------|
| Railway.app | $0-5 | $0-60 | å…è´¹é¢åº¦å†…å®Œå…¨å…è´¹ |
| Vercel + MongoDB Atlas | $0 | $0 | å®Œå…¨å…è´¹ |
| é˜¿é‡Œäº‘å­¦ç”Ÿæœº | Â¥9.9 | Â¥118.8 | éœ€å­¦ç”Ÿè®¤è¯ |
| è…¾è®¯äº‘å­¦ç”Ÿæœº | Â¥10 | Â¥120 | éœ€å­¦ç”Ÿè®¤è¯ |
| é˜¿é‡Œäº‘æ–°ç”¨æˆ· | Â¥0 | Â¥0 | 3ä¸ªæœˆå…è´¹è¯•ç”¨ |

---

## ðŸŽ¯ æŽ¨èé€‰æ‹©

### å¦‚æžœå›¢é˜Ÿåœ¨å›½å¤–æˆ–å¯ä»¥æŽ¥å—å›½å¤–æœåŠ¡
**æŽ¨èï¼šRailway.app**
- æœ€ç®€å•ï¼Œ15åˆ†é’Ÿå®Œæˆ
- å®Œå…¨å…è´¹ï¼ˆå…è´¹é¢åº¦å¤Ÿç”¨ï¼‰
- è‡ªåŠ¨éƒ¨ç½²ï¼Œæ”¹ä»£ç è‡ªåŠ¨æ›´æ–°
- ä¸éœ€è¦æœåŠ¡å™¨ç®¡ç†ç»éªŒ

### å¦‚æžœå›¢é˜Ÿåœ¨å›½å†…ä¸”éœ€è¦å¿«é€Ÿè®¿é—®
**æŽ¨èï¼šé˜¿é‡Œäº‘/è…¾è®¯äº‘å­¦ç”Ÿæœº**
- å›½å†…è®¿é—®é€Ÿåº¦å¿«
- æ¯æœˆä¸åˆ°10å…ƒ
- å®Œå…¨å¯æŽ§ï¼Œå¯ä»¥éšæ„ä¿®æ”¹
- é€‚åˆé•¿æœŸä½¿ç”¨

### å¦‚æžœéœ€è¦å®Œå…¨å…è´¹
**æŽ¨èï¼šVercelï¼ˆå‰ç«¯ï¼‰+ Railwayï¼ˆåŽç«¯ï¼‰**
- å®Œå…¨å…è´¹
- è‡ªåŠ¨éƒ¨ç½²
- ä½†å›½å†…è®¿é—®å¯èƒ½è¾ƒæ…¢

---

## ðŸ“ž éœ€è¦å¸®åŠ©ï¼Ÿ

æˆ‘å¯ä»¥å¸®æ‚¨ï¼š
1. âœ… è¯¦ç»†æŒ‡å¯¼Railwayéƒ¨ç½²ï¼ˆæœ€ç®€å•ï¼‰
2. âœ… é…ç½®é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼ˆå¦‚æžœä½ æœ‰ï¼‰
3. âœ… è®¾ç½®è‡ªåŠ¨éƒ¨ç½²æµç¨‹
4. âœ… ä¼˜åŒ–è®¿é—®é€Ÿåº¦
5. âœ… ç»‘å®šè‡ªå®šä¹‰åŸŸå

å‘Šè¯‰æˆ‘ä½ é€‰æ‹©å“ªä¸ªæ–¹æ¡ˆï¼Œæˆ‘è¯¦ç»†æŒ‡å¯¼ä½ å®Œæˆï¼ðŸš€

