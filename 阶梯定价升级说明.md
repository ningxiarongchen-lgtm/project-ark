# æ‰§è¡Œå™¨é˜¶æ¢¯å®šä»·å‡çº§è¯´æ˜

> **ç‰ˆæœ¬**: v2.1.0  
> **æ›´æ–°æ—¥æœŸ**: 2025-10-27  
> **é‡è¦æ€§**: â­â­â­â­â­ æ ¸å¿ƒåŠŸèƒ½å‡çº§

---

## ğŸ“‹ å˜æ›´æ¦‚è¿°

### å˜æ›´å†…å®¹

å°†æ‰§è¡Œå™¨æ¨¡å‹ä¸­çš„**å•ä¸€ä»·æ ¼å­—æ®µ**æ›¿æ¢ä¸º**é˜¶æ¢¯å®šä»·ç»“æ„** (`price_tiers`)ï¼Œæ”¯æŒåŸºäºé‡‡è´­æ•°é‡çš„çµæ´»å®šä»·ç­–ç•¥ã€‚

### å˜æ›´åŸå› 

1. âœ… **çµæ´»å®šä»·** - æ”¯æŒæ‰¹é‡é‡‡è´­æŠ˜æ‰£
2. âœ… **ä»·æ ¼é€æ˜** - æ¸…æ™°å±•ç¤ºä¸åŒæ•°é‡æ¡£ä½çš„ä»·æ ¼
3. âœ… **ä¸šåŠ¡éœ€æ±‚** - æ»¡è¶³å®é™…é”€å”®ä¸­çš„é˜¶æ¢¯å®šä»·éœ€æ±‚
4. âœ… **æ•°æ®ç»“æ„ä¼˜åŒ–** - ç»Ÿä¸€å®šä»·æ¨¡å‹ï¼Œä¾¿äºç»´æŠ¤

---

## ğŸ”„ å­—æ®µå˜æ›´å¯¹æ¯”

### âŒ æ—§ç»“æ„ï¼ˆå·²åˆ é™¤ï¼‰

```javascript
pricing: {
  base_price_normal: Number,    // æ ‡å‡†ä»·æ ¼
  base_price_low: Number,       // ä½ä»·
  base_price_high: Number,      // é«˜ä»·
  manual_override_model: String, // æ‰‹åŠ¨è£…ç½®å‹å·
  manual_override_price: Number, // æ‰‹åŠ¨è£…ç½®ä»·æ ¼
  seal_kit_price: Number        // å¯†å°å¥—ä»¶ä»·æ ¼
}
```

**é—®é¢˜**:
- âŒ åªæ”¯æŒå•ä¸€ä»·æ ¼
- âŒ æ— æ³•è¡¨è¾¾æ‰¹é‡æŠ˜æ‰£
- âŒ ä»·æ ¼å’Œé…ä»¶ä¿¡æ¯æ··åœ¨ä¸€èµ·

---

### âœ… æ–°ç»“æ„ï¼ˆå½“å‰ï¼‰

#### 1. é˜¶æ¢¯å®šä»·å­—æ®µ `price_tiers`

```javascript
price_tiers: [{
  min_quantity: {
    type: Number,           // æœ€å°æ•°é‡ï¼ˆèµ·è®¢é‡ï¼‰
    required: true,
    min: 1
  },
  unit_price: {
    type: Number,           // è¯¥æ•°é‡æ¡£ä½çš„å•ä»·
    required: true,
    min: 0
  },
  price_type: {
    type: String,           // ä»·æ ¼ç±»å‹ï¼ˆnormal/low_temp/high_tempï¼‰
    enum: ['normal', 'low_temp', 'high_temp', 'standard'],
    default: 'normal'
  },
  notes: String             // å¤‡æ³¨è¯´æ˜
}]
```

#### 2. æ‰‹åŠ¨æ“ä½œè£…ç½®å­—æ®µ `manual_override`

```javascript
manual_override: {
  model: String,            // æ‰‹åŠ¨è£…ç½®å‹å·
  price: Number             // æ‰‹åŠ¨è£…ç½®ä»·æ ¼
}
```

#### 3. é…ä»¶ä»·æ ¼å­—æ®µ `accessories_pricing`

```javascript
accessories_pricing: {
  seal_kit_price: Number    // å¯†å°å¥—ä»¶ä»·æ ¼
}
```

**ä¼˜åŠ¿**:
- âœ… æ”¯æŒå¤šæ¡£ä½å®šä»·
- âœ… æ¸…æ™°çš„å­—æ®µåˆ†ç¦»
- âœ… æ”¯æŒä»·æ ¼ç±»å‹åŒºåˆ†ï¼ˆæ ‡å‡†/ä½æ¸©/é«˜æ¸©ï¼‰
- âœ… ä¾¿äºæ‰©å±•å’Œç»´æŠ¤

---

## ğŸ“– ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: åˆ›å»ºå¸¦é˜¶æ¢¯å®šä»·çš„æ‰§è¡Œå™¨

```javascript
const actuator = new Actuator({
  model_base: 'AT-SR52K8',
  series: 'AT',
  mechanism: 'Rack & Pinion',
  action_type: 'SR',
  
  // é˜¶æ¢¯å®šä»·é…ç½®
  price_tiers: [
    {
      min_quantity: 1,
      unit_price: 5280,
      price_type: 'normal',
      notes: 'å•ä»¶æˆ–å°æ‰¹é‡'
    },
    {
      min_quantity: 5,
      unit_price: 5016,    // 5% æŠ˜æ‰£
      price_type: 'normal',
      notes: '5-9ä»¶äº«å—5%æŠ˜æ‰£'
    },
    {
      min_quantity: 10,
      unit_price: 4752,    // 10% æŠ˜æ‰£
      price_type: 'normal',
      notes: '10-19ä»¶äº«å—10%æŠ˜æ‰£'
    },
    {
      min_quantity: 20,
      unit_price: 4488,    // 15% æŠ˜æ‰£
      price_type: 'normal',
      notes: '20ä»¶ä»¥ä¸Šäº«å—15%æŠ˜æ‰£'
    }
  ],
  
  // æ‰‹åŠ¨æ“ä½œè£…ç½®
  manual_override: {
    model: 'SD-1',
    price: 860
  },
  
  // é…ä»¶ä»·æ ¼
  accessories_pricing: {
    seal_kit_price: 12
  }
});

await actuator.save();
```

---

### ç¤ºä¾‹ 2: æ ¹æ®é‡‡è´­æ•°é‡è·å–ä»·æ ¼

#### ä½¿ç”¨å†…ç½®æ–¹æ³• `getPriceByQuantity()`

```javascript
const actuator = await Actuator.findOne({ model_base: 'AT-SR52K8' });

// é‡‡è´­ 1 ä»¶
const price1 = actuator.getPriceByQuantity(1);
console.log(price1);
// è¾“å‡º:
// {
//   unit_price: 5280,
//   min_quantity: 1,
//   total_price: 5280,
//   price_type: 'normal',
//   notes: 'å•ä»¶æˆ–å°æ‰¹é‡'
// }

// é‡‡è´­ 8 ä»¶
const price8 = actuator.getPriceByQuantity(8);
console.log(price8);
// è¾“å‡º:
// {
//   unit_price: 5016,        // ä½¿ç”¨äº† 5-9ä»¶çš„æ¡£ä½
//   min_quantity: 5,
//   total_price: 40128,      // 5016 Ã— 8
//   price_type: 'normal',
//   notes: '5-9ä»¶äº«å—5%æŠ˜æ‰£'
// }

// é‡‡è´­ 15 ä»¶
const price15 = actuator.getPriceByQuantity(15);
console.log(price15);
// è¾“å‡º:
// {
//   unit_price: 4752,        // ä½¿ç”¨äº† 10-19ä»¶çš„æ¡£ä½
//   min_quantity: 10,
//   total_price: 71280,      // 4752 Ã— 15
//   price_type: 'normal',
//   notes: '10-19ä»¶äº«å—10%æŠ˜æ‰£'
// }

// é‡‡è´­ 50 ä»¶
const price50 = actuator.getPriceByQuantity(50);
console.log(price50);
// è¾“å‡º:
// {
//   unit_price: 4488,        // ä½¿ç”¨äº† 20ä»¶ä»¥ä¸Šçš„æ¡£ä½
//   min_quantity: 20,
//   total_price: 224400,     // 4488 Ã— 50
//   price_type: 'normal',
//   notes: '20ä»¶ä»¥ä¸Šäº«å—15%æŠ˜æ‰£'
// }
```

---

### ç¤ºä¾‹ 3: è·å–æ‰€æœ‰ä»·æ ¼æ¡£ä½

```javascript
const actuator = await Actuator.findOne({ model_base: 'AT-SR52K8' });

// è·å–æ‰€æœ‰ä»·æ ¼æ¡£ä½
const allTiers = actuator.getAllPriceTiers();
console.log(allTiers);
// è¾“å‡º:
// [
//   { min_quantity: 1, unit_price: 5280, price_type: 'normal', ... },
//   { min_quantity: 5, unit_price: 5016, price_type: 'normal', ... },
//   { min_quantity: 10, unit_price: 4752, price_type: 'normal', ... },
//   { min_quantity: 20, unit_price: 4488, price_type: 'normal', ... }
// ]

// åªè·å–ç‰¹å®šä»·æ ¼ç±»å‹çš„æ¡£ä½
const normalTiers = actuator.getAllPriceTiers('normal');
```

---

### ç¤ºä¾‹ 4: æ”¯æŒä¸åŒæ¸©åº¦ç­‰çº§çš„å®šä»·

```javascript
const actuator = new Actuator({
  model_base: 'AT-SR52K8-H',  // é«˜æ¸©å‹
  series: 'AT',
  
  price_tiers: [
    // æ ‡å‡†æ¸©åº¦å‹å·ä»·æ ¼
    {
      min_quantity: 1,
      unit_price: 5280,
      price_type: 'normal'
    },
    {
      min_quantity: 10,
      unit_price: 4752,
      price_type: 'normal'
    },
    // é«˜æ¸©å‹å·ä»·æ ¼ï¼ˆä»·æ ¼æ›´é«˜ï¼‰
    {
      min_quantity: 1,
      unit_price: 6336,        // æ ‡å‡†ä»· + 20%
      price_type: 'high_temp'
    },
    {
      min_quantity: 10,
      unit_price: 5702,        // æ ‡å‡†ä»· + 20%
      price_type: 'high_temp'
    }
  ]
});

// è·å–æ ‡å‡†å‹ä»·æ ¼ï¼ˆ10ä»¶ï¼‰
const normalPrice = actuator.getPriceByQuantity(10, 'normal');
// unit_price: 4752

// è·å–é«˜æ¸©å‹ä»·æ ¼ï¼ˆ10ä»¶ï¼‰
const highTempPrice = actuator.getPriceByQuantity(10, 'high_temp');
// unit_price: 5702
```

---

## ğŸ”§ API æ¥å£è°ƒæ•´å»ºè®®

### æ§åˆ¶å™¨å±‚ä¿®æ”¹å»ºè®®

#### 1. è·å–æ‰§è¡Œå™¨ä»·æ ¼ï¼ˆæ–°å¢æ¥å£ï¼‰

```javascript
// backend/controllers/actuatorController.js

// GET /api/actuators/:id/price?quantity=10&price_type=normal
exports.getActuatorPrice = async (req, res) => {
  try {
    const { id } = req.params;
    const { quantity = 1, price_type = 'normal' } = req.query;
    
    const actuator = await Actuator.findById(id);
    
    if (!actuator) {
      return res.status(404).json({
        success: false,
        message: 'æ‰§è¡Œå™¨ä¸å­˜åœ¨'
      });
    }
    
    const priceInfo = actuator.getPriceByQuantity(
      parseInt(quantity), 
      price_type
    );
    
    if (!priceInfo) {
      return res.status(404).json({
        success: false,
        message: 'æœªé…ç½®ä»·æ ¼ä¿¡æ¯'
      });
    }
    
    res.json({
      success: true,
      data: {
        actuator_model: actuator.model_base,
        quantity: parseInt(quantity),
        ...priceInfo
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};

// GET /api/actuators/:id/price-tiers?price_type=normal
exports.getPriceTiers = async (req, res) => {
  try {
    const { id } = req.params;
    const { price_type } = req.query;
    
    const actuator = await Actuator.findById(id);
    
    if (!actuator) {
      return res.status(404).json({
        success: false,
        message: 'æ‰§è¡Œå™¨ä¸å­˜åœ¨'
      });
    }
    
    const tiers = actuator.getAllPriceTiers(price_type);
    
    res.json({
      success: true,
      data: {
        actuator_model: actuator.model_base,
        price_tiers: tiers
      }
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};
```

#### 2. é€‰å‹æ¥å£ä¸­åŒ…å«ä»·æ ¼è®¡ç®—

```javascript
// backend/controllers/selectionController.js

exports.calculate = async (req, res) => {
  try {
    const { required_torque, working_pressure, quantity = 1 } = req.body;
    
    // ... é€‰å‹é€»è¾‘ ...
    
    // ä¸ºæ¯ä¸ªæ¨èçš„æ‰§è¡Œå™¨æ·»åŠ ä»·æ ¼ä¿¡æ¯
    const resultsWithPrice = recommendations.map(rec => {
      const priceInfo = rec.actuator.getPriceByQuantity(quantity);
      
      return {
        ...rec,
        pricing: priceInfo,
        manual_override: rec.actuator.manual_override,
        accessories: rec.actuator.accessories_pricing
      };
    });
    
    res.json({
      success: true,
      data: resultsWithPrice,
      count: resultsWithPrice.length
    });
  } catch (error) {
    res.status(500).json({
      success: false,
      message: error.message
    });
  }
};
```

---

## ğŸ“Š æ•°æ®è¿ç§»æŒ‡å—

### æ–¹æ¡ˆ 1: ä»æ—§ `pricing` è¿ç§»åˆ° `price_tiers`

å¦‚æœæ‚¨æœ‰ä½¿ç”¨æ—§ `pricing` å­—æ®µçš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è„šæœ¬è¿ç§»ï¼š

```javascript
// scripts/migrate_pricing_to_tiers.js

const mongoose = require('mongoose');
const Actuator = require('../models/Actuator');

async function migratePricingToTiers() {
  try {
    await mongoose.connect(process.env.MONGODB_URI);
    
    // æŸ¥æ‰¾æ‰€æœ‰æœ‰æ—§ pricing æ•°æ®çš„æ‰§è¡Œå™¨
    const actuators = await Actuator.find({
      'pricing.base_price_normal': { $exists: true }
    });
    
    console.log(`æ‰¾åˆ° ${actuators.length} ä¸ªéœ€è¦è¿ç§»çš„æ‰§è¡Œå™¨`);
    
    for (const actuator of actuators) {
      // åˆ›å»ºåŸºç¡€é˜¶æ¢¯å®šä»·ï¼ˆå•ä»·ï¼‰
      const price_tiers = [
        {
          min_quantity: 1,
          unit_price: actuator.pricing.base_price_normal,
          price_type: 'normal',
          notes: 'è¿ç§»è‡ªæ—§pricingå­—æ®µ'
        }
      ];
      
      // å¦‚æœæœ‰ä½ä»·ï¼Œæ·»åŠ æ‰¹é‡æ¡£ä½
      if (actuator.pricing.base_price_low) {
        price_tiers.push({
          min_quantity: 5,
          unit_price: actuator.pricing.base_price_low,
          price_type: 'normal',
          notes: 'æ‰¹é‡ä»·æ ¼ï¼ˆè¿ç§»ï¼‰'
        });
      }
      
      // è¿ç§»æ‰‹åŠ¨æ“ä½œè£…ç½®ä¿¡æ¯
      const manual_override = {
        model: actuator.pricing.manual_override_model,
        price: actuator.pricing.manual_override_price
      };
      
      // è¿ç§»é…ä»¶ä»·æ ¼
      const accessories_pricing = {
        seal_kit_price: actuator.pricing.seal_kit_price
      };
      
      // æ›´æ–°æ‰§è¡Œå™¨
      actuator.price_tiers = price_tiers;
      actuator.manual_override = manual_override;
      actuator.accessories_pricing = accessories_pricing;
      
      // åˆ é™¤æ—§å­—æ®µ
      actuator.pricing = undefined;
      
      await actuator.save();
      console.log(`âœ… å·²è¿ç§»: ${actuator.model_base}`);
    }
    
    console.log('\nè¿ç§»å®Œæˆï¼');
    process.exit(0);
  } catch (error) {
    console.error('è¿ç§»å¤±è´¥:', error);
    process.exit(1);
  }
}

migratePricingToTiers();
```

**è¿è¡Œè¿ç§»**:
```bash
cd backend
node scripts/migrate_pricing_to_tiers.js
```

---

### æ–¹æ¡ˆ 2: ç›´æ¥å¯¼å…¥æ–°æ ¼å¼æ•°æ®

ä½¿ç”¨æ–°çš„ CSV/Excel æ¨¡æ¿ï¼Œç›´æ¥å¯¼å…¥åŒ…å«é˜¶æ¢¯å®šä»·çš„æ•°æ®ã€‚

**æ–°æ¨¡æ¿ç¤ºä¾‹** (`actuators_with_price_tiers.csv`):

```csv
model_base,series,mechanism,action_type,tier1_qty,tier1_price,tier2_qty,tier2_price,tier3_qty,tier3_price,manual_model,manual_price,seal_kit_price
AT-SR52K8,AT,Rack & Pinion,SR,1,5280,5,5016,10,4752,SD-1,860,12
AT-DA75K12,AT,Rack & Pinion,DA,1,8500,5,8075,10,7650,SD-2,1120,15
GY-SR100K15,GY,Rack & Pinion,SR,1,7200,5,6840,10,6480,SD-1,860,12
```

**å¯¼å…¥è„šæœ¬**:

```javascript
// scripts/import_actuators_with_tiers.js

const fs = require('fs');
const csv = require('csv-parser');
const Actuator = require('../models/Actuator');

async function importActuatorsWithTiers(csvFilePath) {
  const actuators = [];
  
  fs.createReadStream(csvFilePath)
    .pipe(csv())
    .on('data', (row) => {
      // æ„å»ºé˜¶æ¢¯å®šä»·æ•°ç»„
      const price_tiers = [];
      
      if (row.tier1_qty && row.tier1_price) {
        price_tiers.push({
          min_quantity: parseInt(row.tier1_qty),
          unit_price: parseFloat(row.tier1_price),
          price_type: 'normal'
        });
      }
      
      if (row.tier2_qty && row.tier2_price) {
        price_tiers.push({
          min_quantity: parseInt(row.tier2_qty),
          unit_price: parseFloat(row.tier2_price),
          price_type: 'normal'
        });
      }
      
      if (row.tier3_qty && row.tier3_price) {
        price_tiers.push({
          min_quantity: parseInt(row.tier3_qty),
          unit_price: parseFloat(row.tier3_price),
          price_type: 'normal'
        });
      }
      
      const actuator = {
        model_base: row.model_base,
        series: row.series,
        mechanism: row.mechanism,
        action_type: row.action_type,
        price_tiers: price_tiers,
        manual_override: {
          model: row.manual_model,
          price: parseFloat(row.manual_price)
        },
        accessories_pricing: {
          seal_kit_price: parseFloat(row.seal_kit_price)
        }
      };
      
      actuators.push(actuator);
    })
    .on('end', async () => {
      // æ‰¹é‡æ’å…¥
      await Actuator.insertMany(actuators);
      console.log(`âœ… æˆåŠŸå¯¼å…¥ ${actuators.length} ä¸ªæ‰§è¡Œå™¨`);
    });
}
```

---

## ğŸ¨ å‰ç«¯å±•ç¤ºå»ºè®®

### ä»·æ ¼å±•ç¤ºç»„ä»¶

```jsx
// frontend/src/components/PriceTierDisplay.jsx

import { Tag, Table } from 'antd';

const PriceTierDisplay = ({ priceTiers }) => {
  const columns = [
    {
      title: 'æ•°é‡èŒƒå›´',
      dataIndex: 'min_quantity',
      key: 'min_quantity',
      render: (qty, record, index) => {
        const nextQty = priceTiers[index + 1]?.min_quantity;
        return nextQty ? `${qty} - ${nextQty - 1}` : `${qty}+`;
      }
    },
    {
      title: 'å•ä»·',
      dataIndex: 'unit_price',
      key: 'unit_price',
      render: (price) => `Â¥${price.toLocaleString()}`
    },
    {
      title: 'æŠ˜æ‰£',
      key: 'discount',
      render: (_, record, index) => {
        if (index === 0) return <Tag color="default">æ ‡å‡†ä»·</Tag>;
        const basePrice = priceTiers[0].unit_price;
        const discount = ((basePrice - record.unit_price) / basePrice * 100).toFixed(1);
        return <Tag color="green">{discount}% OFF</Tag>;
      }
    },
    {
      title: 'è¯´æ˜',
      dataIndex: 'notes',
      key: 'notes'
    }
  ];
  
  return (
    <Table 
      columns={columns} 
      dataSource={priceTiers}
      pagination={false}
      size="small"
    />
  );
};

export default PriceTierDisplay;
```

### ä»·æ ¼è®¡ç®—å™¨ç»„ä»¶

```jsx
// frontend/src/components/PriceCalculator.jsx

import { InputNumber, Card, Statistic } from 'antd';
import { useState } from 'react';

const PriceCalculator = ({ actuator }) => {
  const [quantity, setQuantity] = useState(1);
  
  // è·å–å½“å‰æ•°é‡çš„ä»·æ ¼ä¿¡æ¯
  const getPriceInfo = () => {
    const tiers = actuator.price_tiers.sort((a, b) => b.min_quantity - a.min_quantity);
    for (const tier of tiers) {
      if (quantity >= tier.min_quantity) {
        return {
          unit_price: tier.unit_price,
          total: tier.unit_price * quantity,
          tier_min: tier.min_quantity
        };
      }
    }
    return null;
  };
  
  const priceInfo = getPriceInfo();
  
  return (
    <Card title="ä»·æ ¼è®¡ç®—å™¨" size="small">
      <div style={{ marginBottom: 16 }}>
        <label>é‡‡è´­æ•°é‡ï¼š</label>
        <InputNumber 
          min={1} 
          value={quantity}
          onChange={setQuantity}
        />
      </div>
      
      {priceInfo && (
        <>
          <Statistic 
            title="å•ä»·" 
            value={priceInfo.unit_price} 
            prefix="Â¥"
          />
          <Statistic 
            title="æ€»ä»·" 
            value={priceInfo.total} 
            prefix="Â¥"
            valueStyle={{ color: '#3f8600' }}
          />
          <p style={{ marginTop: 8, color: '#888' }}>
            é€‚ç”¨æ¡£ä½: {priceInfo.tier_min}ä»¶èµ·
          </p>
        </>
      )}
    </Card>
  );
};

export default PriceCalculator;
```

---

## âœ… æµ‹è¯•æ¸…å•

### å•å…ƒæµ‹è¯•

```javascript
// backend/tests/actuator.price_tiers.test.js

const mongoose = require('mongoose');
const Actuator = require('../models/Actuator');

describe('Actuator Price Tiers', () => {
  let actuator;
  
  beforeAll(async () => {
    await mongoose.connect(process.env.MONGODB_URI_TEST);
  });
  
  beforeEach(async () => {
    actuator = new Actuator({
      model_base: 'TEST-SR52K8',
      series: 'TEST',
      action_type: 'SR',
      price_tiers: [
        { min_quantity: 1, unit_price: 5280, price_type: 'normal' },
        { min_quantity: 5, unit_price: 5016, price_type: 'normal' },
        { min_quantity: 10, unit_price: 4752, price_type: 'normal' }
      ]
    });
    await actuator.save();
  });
  
  afterEach(async () => {
    await Actuator.deleteMany({ series: 'TEST' });
  });
  
  test('åº”è¯¥è¿”å›æ­£ç¡®çš„å•ä»¶ä»·æ ¼', () => {
    const price = actuator.getPriceByQuantity(1);
    expect(price.unit_price).toBe(5280);
    expect(price.total_price).toBe(5280);
  });
  
  test('åº”è¯¥è¿”å›æ­£ç¡®çš„æ‰¹é‡ä»·æ ¼', () => {
    const price = actuator.getPriceByQuantity(8);
    expect(price.unit_price).toBe(5016);
    expect(price.total_price).toBe(40128);
  });
  
  test('åº”è¯¥è¿”å›æ­£ç¡®çš„å¤§æ‰¹é‡ä»·æ ¼', () => {
    const price = actuator.getPriceByQuantity(15);
    expect(price.unit_price).toBe(4752);
    expect(price.total_price).toBe(71280);
  });
  
  test('åº”è¯¥æ­£ç¡®æ’åºä»·æ ¼æ¡£ä½', () => {
    const tiers = actuator.getAllPriceTiers();
    expect(tiers[0].min_quantity).toBe(1);
    expect(tiers[1].min_quantity).toBe(5);
    expect(tiers[2].min_quantity).toBe(10);
  });
});
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### âš ï¸ é‡è¦æé†’

1. **æ•°æ®è¿ç§»** - å¦‚æœæœ‰æ—§æ•°æ®ï¼Œå¿…é¡»å…ˆæ‰§è¡Œæ•°æ®è¿ç§»è„šæœ¬
2. **APIå…¼å®¹æ€§** - æ›´æ–°å‰ç«¯è°ƒç”¨æ—¶æ³¨æ„æ–°çš„æ•°æ®ç»“æ„
3. **ä»·æ ¼é…ç½®** - ç¡®ä¿æ‰€æœ‰æ‰§è¡Œå™¨éƒ½é…ç½®äº† `price_tiers`
4. **æµ‹è¯•éªŒè¯** - å……åˆ†æµ‹è¯•ä»·æ ¼è®¡ç®—é€»è¾‘

### âœ… æœ€ä½³å®è·µ

1. **è‡³å°‘é…ç½®3ä¸ªä»·æ ¼æ¡£ä½** - å•ä»·ã€å°æ‰¹é‡ã€å¤§æ‰¹é‡
2. **åˆç†è®¾ç½®æŠ˜æ‰£** - é€šå¸¸ 5%ã€10%ã€15% é€’å¢
3. **æ·»åŠ å¤‡æ³¨è¯´æ˜** - å¸®åŠ©é”€å”®äººå‘˜ç†è§£ä»·æ ¼ç­–ç•¥
4. **å®šæœŸå®¡æŸ¥ä»·æ ¼** - æ ¹æ®å¸‚åœºæƒ…å†µè°ƒæ•´

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [æ‰§è¡Œå™¨æ¨¡å‹æ–‡æ¡£](./backend/models/Actuator.js)
- [APIæ¥å£æ–‡æ¡£](./å®Œæ•´APIæ–‡æ¡£.md)
- [ç³»ç»Ÿä½¿ç”¨è¯´æ˜](./å¿«é€Ÿå…¥é—¨æŒ‡å—.md)

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ï¼š
- ğŸ“§ **æŠ€æœ¯æ”¯æŒ**: tech@cmax.com
- ğŸ“± **å¼€å‘å›¢é˜Ÿ**: dev@cmax.com

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**ç¼–å†™**: C-MAXæŠ€æœ¯å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2025-10-27

