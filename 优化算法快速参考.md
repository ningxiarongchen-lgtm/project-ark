# ä¼˜åŒ–ç®—æ³•å¿«é€Ÿå‚è€ƒ âš¡

**æ–‡ä»¶**: `frontend/src/utils/optimization.js`  
**ç‰ˆæœ¬**: v1.0

---

## ğŸš€ å¿«é€Ÿä½¿ç”¨

```javascript
import { optimizeProjectSelection } from '@/utils/optimization';

const result = optimizeProjectSelection(project.selections);
```

---

## ğŸ“Š ç®—æ³•æ ¸å¿ƒ

### 4æ­¥ä¼˜åŒ–æµç¨‹

```
1. æ”¶é›†éœ€æ±‚
   â†“
2. æ‰­çŸ©æ’åº (å¤§â†’å°)
   â†“
3. è´ªå¿ƒåˆ†ç»„ (å½’å¹¶å…¼å®¹éœ€æ±‚)
   â†“
4. ç”ŸæˆBOM
```

---

## ğŸ’» è¿”å›æ•°æ®

```javascript
{
  optimized_bill_of_materials: [
    {
      actuator_model: "SF10-150DA",
      total_quantity: 3,
      unit_price: 8500,
      total_price: 25500,
      covered_tags: ["V-101", "V-102", "V-103"]
    }
  ],
  statistics: {
    original_count: 5,
    optimized_count: 3,
    total_quantity: 5,
    total_price: 34515,
    consolidation_rate: "40.00%",
    message: "æˆåŠŸä¼˜åŒ–ï¼š5 ä¸ªé€‰å‹ â†’ 3 ä¸ªå‹å·"
  }
}
```

---

## ğŸ” å…¼å®¹æ€§æ£€æŸ¥

**å¿…é¡»ç›¸åŒçš„å‚æ•°**:
- âœ… ç³»åˆ— (Series)
- âœ… ä½œç”¨ç±»å‹ (DA/SR)
- âœ… æœºæ„ç±»å‹
- âœ… æ¸©åº¦ä»£ç 
- âœ… é˜€é—¨ç±»å‹ (SF)
- âœ… è½­æ¶ç±»å‹ (SF)

---

## ğŸ“ˆ ä¼˜åŒ–ç¤ºä¾‹

### è¾“å…¥ (5ä¸ªé€‰å‹)

```
V-101: SF10-150DA (3500 Nm, Â¥8,500)
V-102: SF10-150DA (3200 Nm, Â¥8,500)
V-103: SF10-150DA (2800 Nm, Â¥8,500)
V-104: AT-DA63 (50 Nm, Â¥90)
V-105: SF10-150DA-T1 (3600 Nm, Â¥8,925)
```

### è¾“å‡º (3ä¸ªå‹å·)

```
1. SF10-150DA Ã— 3 = Â¥25,500
   ä½å·: V-101, V-102, V-103

2. SF10-150DA-T1 Ã— 1 = Â¥8,925
   ä½å·: V-105

3. AT-DA63 Ã— 1 = Â¥90
   ä½å·: V-104

åˆå¹¶ç‡: 40%
```

---

## ğŸ¯ å…³é”®ä»£ç 

### è´ªå¿ƒåˆ†ç»„

```javascript
// ä»æœ€å¤§éœ€æ±‚å¼€å§‹
requirements.sort((a, b) => b.required_torque - a.required_torque);

for (let i = 0; i < requirements.length; i++) {
  // å½’å¹¶æ‰€æœ‰å…¼å®¹çš„è¾ƒå°éœ€æ±‚
  for (let j = i + 1; j < requirements.length; j++) {
    if (checkCompatibility(req1, req2)) {
      if (currentTorque >= otherRequiredTorque) {
        // å½’å¹¶
      }
    }
  }
}
```

---

## ğŸ“¦ å¯¼å‡ºCSV

```javascript
import { exportOptimizedBOM } from '@/utils/optimization';

const csv = exportOptimizedBOM(result, 'ProjectName');
// åˆ›å»ºä¸‹è½½
const blob = new Blob([csv], { type: 'text/csv' });
const link = document.createElement('a');
link.href = URL.createObjectURL(blob);
link.download = 'BOM.csv';
link.click();
```

---

## ğŸ¯ å…¸å‹æ•ˆæœ

| é¡¹ç›®è§„æ¨¡ | åˆå¹¶ç‡ | æ•ˆæœ |
|---------|--------|------|
| å° (5-10) | 40-60% | åŸºæœ¬ä¼˜åŒ– |
| ä¸­ (20-30) | 60-75% | âœ… æ˜¾è‘— |
| å¤§ (50+) | 70-80% | âœ…âœ… ä¼˜ç§€ |

---

**è¯¦ç»†æ–‡æ¡£**: è§ `é¡¹ç›®é€‰å‹ä¼˜åŒ–ç®—æ³•è¯´æ˜.md`

