# 🎁 七牛云免费部署指南

## ✨ 为什么选择七牛云

### 优势
- ✅ **10GB免费存储空间**
- ✅ **10GB免费CDN流量/月**
- ✅ 中国访问速度极快
- ✅ 配置比阿里云更简单
- ✅ 完全免费（对于20人团队绝对够用）
- ✅ 支持HTTPS

### 费用对比
```
免费额度（每月）:
- 存储空间: 10GB
- CDN流量: 10GB
- HTTP请求: 100万次

实际使用（20人团队）:
- 存储: 约50MB ✅ 免费
- 流量: 约2-5GB ✅ 免费
- 请求: 约5万次 ✅ 免费

总费用: ￥0/月 🎉
```

---

## 🚀 快速部署步骤

### 第1步：注册七牛云账号（2分钟）

1. **访问七牛云官网**
   ```
   https://www.qiniu.com
   ```

2. **点击"免费注册"**
   - 手机号注册（推荐）
   - 或邮箱注册

3. **填写注册信息**
   - 手机号
   - 验证码
   - 设置密码
   - 点击"注册"

4. **实名认证（必须）**
   - 个人认证：身份证
   - 企业认证：营业执照
   - 审核时间：1-10分钟（很快）

✅ 完成！

---

### 第2步：创建存储空间（1分钟）

1. **登录七牛云控制台**
   ```
   https://portal.qiniu.com
   ```

2. **点击左侧"对象存储"**

3. **点击"新建存储空间"**

4. **填写配置**
   ```
   存储空间名称: smart-system
   （只能小写字母、数字、中划线）
   
   存储区域: 华东-浙江
   （或选择离你最近的区域）
   
   访问控制: 公开空间
   （重要！必须选公开）
   
   存储类型: 标准存储
   ```

5. **点击"确定创建"**

✅ 存储空间创建成功！

---

### 第3步：构建前端项目（5分钟）

**在你的电脑终端执行：**

```bash
# 1. 进入项目目录
cd "/Users/hexiaoxiao/Desktop/Model Selection System"

# 2. 进入前端目录
cd frontend

# 3. 确保依赖已安装
npm install

# 4. 构建生产版本
npm run build
```

**等待构建完成（约1-3分钟）**

完成后会生成 `frontend/dist` 目录

✅ 构建完成！

---

### 第4步：上传文件到七牛云（2种方式）

#### 方式A：网页上传（简单，推荐新手）

1. **在七牛云控制台，点击你的存储空间**

2. **点击"文件管理"**

3. **点击"上传文件"**

4. **选择文件**
   - 找到 `frontend/dist` 目录
   - 进入dist目录
   - 全选所有文件和文件夹
   - 拖拽到上传区域

5. **开始上传**
   - 等待上传完成
   - 显示100%即可

**注意：** 需要保持文件夹结构！
- `assets/` 文件夹内的文件
- `index.html` 文件
- 其他所有文件

✅ 上传完成！

---

#### 方式B：使用qshell工具（推荐，更快）

1. **下载qshell**
   ```
   Mac: https://developer.qiniu.com/kodo/1302/qshell
   Windows: https://developer.qiniu.com/kodo/1302/qshell
   ```

2. **安装qshell**
   ```bash
   # Mac/Linux
   chmod +x qshell
   sudo mv qshell /usr/local/bin/
   ```

3. **配置qshell**
   
   获取AccessKey和SecretKey：
   - 七牛云控制台 → 右上角头像 → 密钥管理
   - 复制 AccessKey 和 SecretKey
   
   ```bash
   qshell account <AccessKey> <SecretKey> <账号名称>
   ```

4. **上传整个目录**
   ```bash
   cd frontend
   qshell qupload2 \
     --bucket smart-system \
     --src-dir ./dist \
     --overwrite
   ```

✅ 上传完成！

---

### 第5步：绑定域名并开启CDN（5分钟）

#### 5.1 获取测试域名（立即可用）

1. **在存储空间管理页面**

2. **点击"域名管理"**

3. **会看到默认的测试域名**
   ```
   http://xxxxx.bkt.clouddn.com
   ```
   ⚠️ 测试域名有效期30天，仅供测试

#### 5.2 绑定自定义域名（推荐）

**如果你有域名：**

1. **点击"绑定域名"**

2. **输入你的域名**
   ```
   例如: cdn.yourdomain.com
   ```

3. **选择加速区域**
   - 中国境内（需要备案）
   - 海外及港澳台（不需要备案）

4. **配置CNAME**
   - 七牛云会给你一个CNAME地址
   - 去你的域名DNS服务商添加CNAME记录

5. **等待生效**
   - 约5-10分钟

**如果没有域名：**
- 先用测试域名
- 或购买一个域名（￥10-50/年）

✅ 域名配置完成！

---

### 第6步：配置默认首页（重要！）

**七牛云需要特殊配置才能支持SPA应用**

#### 使用CDN刷新和预热

1. **在"CDN加速" → "刷新预热"**

2. **刷新URL**
   ```
   http://你的域名/
   ```

#### 配置默认首页

由于七牛云对象存储不直接支持配置默认首页，需要：

**方案A：使用七牛云函数（免费）**
1. 创建边缘函数
2. 配置路由重写
3. 将所有路径重定向到 index.html

**方案B：访问时带上index.html**
```
http://你的域名/index.html
```

**方案C：使用CloudFlare代理（推荐）**
- 七牛云CDN → CloudFlare → 用户
- CloudFlare配置页面规则

✅ 配置完成！

---

### 第7步：测试访问（1分钟）

1. **获取访问地址**
   ```
   测试域名: http://xxxxx.bkt.clouddn.com/index.html
   或
   自定义域名: http://cdn.yourdomain.com/index.html
   ```

2. **手机测试**
   - 打开手机浏览器
   - 访问上面的地址
   - 应该能看到登录页面

3. **测试登录**
   - 手机号：`13800000000`
   - 密码：`admin123`

4. **测试功能**
   - 点击各个菜单
   - 测试是否正常

✅ 部署成功！🎉

---

## 🔧 配置HTTPS（推荐）

### 免费SSL证书

1. **在七牛云控制台**

2. **域名管理 → HTTPS配置**

3. **申请免费证书**
   - 选择"申请免费证书"
   - 填写域名
   - 等待签发（约5分钟）

4. **开启强制HTTPS**
   - 勾选"强制HTTPS访问"

✅ HTTPS配置完成！

---

## 💰 费用明细

### 免费额度（每月）
```
存储空间: 10GB
CDN流量: 10GB (中国大陆)
HTTP请求: 100万次
PUT/DELETE请求: 10万次
```

### 超出免费额度后
```
存储: ￥0.148/GB/月
CDN流量: ￥0.29/GB（中国大陆）
GET请求: ￥0.01/万次
```

### 20人团队预估
```
存储使用: 0.05GB ✅ 免费
月流量: 2-5GB ✅ 免费
月请求: 5万次 ✅ 免费
───────────────
总费用: ￥0/月 🎉
```

---

## 🎯 完整命令速查

### 构建前端
```bash
cd "/Users/hexiaoxiao/Desktop/Model Selection System/frontend"
npm run build
```

### 使用qshell上传
```bash
# 配置账号（首次）
qshell account <AccessKey> <SecretKey> <账号名称>

# 上传dist目录
cd frontend
qshell qupload2 --bucket smart-system --src-dir ./dist --overwrite
```

### 更新部署
```bash
# 重新构建
npm run build

# 重新上传
qshell qupload2 --bucket smart-system --src-dir ./dist --overwrite

# 刷新CDN缓存
qshell cdnrefresh https://你的域名/
```

---

## ❓ 常见问题

### Q1: 访问404或空白？
**A:** 检查以下几点：
1. 文件是否全部上传（特别是index.html）
2. 访问地址是否包含 `/index.html`
3. 存储空间是否设置为"公开"

### Q2: 样式或图片加载失败？
**A:** 检查：
1. `assets` 目录是否上传
2. 文件路径是否正确
3. 跨域配置是否正确

### Q3: API请求失败？
**A:** 
1. 检查前端API地址配置
2. 检查后端是否正常运行
3. 检查跨域CORS配置

### Q4: 测试域名过期了怎么办？
**A:** 
1. 购买一个便宜域名（￥10/年）
2. 或申请七牛云延长测试域名

### Q5: 如何绑定自己的域名？
**A:** 
1. 在七牛云绑定域名
2. 在域名DNS添加CNAME记录
3. 等待生效（5-10分钟）

---

## 🎁 部署成功后

你将拥有：
- ✅ **完全免费**的CDN加速
- ✅ 中国访问速度**极快**
- ✅ **99.9%**可用性
- ✅ 支持**移动端**
- ✅ 支持**HTTPS**
- ✅ **10GB**免费流量/月

---

## 📞 需要帮助？

**如果遇到问题：**
- 注册失败
- 上传失败
- 访问404
- API连接问题

**随时告诉我！** 🚀

---

## 🎯 下一步

部署完成后：
1. ✅ 测试所有功能
2. ✅ 分享给团队成员
3. ✅ 绑定自定义域名（可选）
4. ✅ 配置HTTPS（推荐）
5. ✅ 设置监控和报警

