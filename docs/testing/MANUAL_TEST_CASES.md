# Project Ark - 手动测试用例清单 (v1.0)

**目的**: 本文档提供了一套完整的手动测试流程，旨在系统地验证所有核心功能。每次发布新版本前，必须完整执行一遍此清单。

**测试前置**:
1. 确保本地环境干净。
2. 在 `backend` 目录运行 **`npm run seed:final`** 初始化数据库。
3. 启动环境: `bash 演示环境启动.sh`

**使用说明**:
- 每次测试前，复制本文件为 `TEST_RUN_YYYY-MM-DD.md`（如 `TEST_RUN_2025-10-30.md`）
- 在新文件中标记测试结果，保持本模板文件干净
- 发现问题时，立即记录到 `BUG_TRACKING.md`

---

## A. 核心模块: 用户认证与权限 (P0 - 高优先级)

| 编号 | 测试场景 | 预期结果 | 测试结果 | 备注/Bug ID |
| :--- | :--- | :--- | :--- | :--- |
| A-01 | **登录** | 销售经理 (`13000000002` / `password`) 登录成功，跳转到仪表盘。 | [ ] Pass / [ ] Fail | |
| A-02 | **权限-创建项目** | 销售经理可以看到"新建项目"按钮，但技术工程师 (`13000000003`) 登录后看不到。 | [ ] Pass / [ ] Fail | |
| A-03 | **权限-访问控制** | 未登录状态下直接访问 `http://localhost:5173/projects`，应自动跳转回登录页。 | [ ] Pass / [ ] Fail | |
| A-04 | **登出** | 点击"登出"后，系统返回登录页，且无法再访问内部页面。 | [ ] Pass / [ ] Fail | |
| A-05 | **错误凭证** | 使用错误的密码登录，显示"用户名或密码错误"提示，不能进入系统。 | [ ] Pass / [ ] Fail | |

**测试账号参考**:
- 系统管理员: `13000000001` / `password`
- 销售经理: `13000000002` / `password`
- 技术工程师: `13000000003` / `password`
- 商务工程师: `13000000004` / `password`
- 生产经理: `13000000005` / `password`
- 生产计划员: `13000000006` / `password`

---

## B. 核心模块: 智能选型引擎 (P0 - 高优先级)

| 编号 | 测试场景 | 预期结果 | 测试结果 | 备注/Bug ID |
| :--- | :--- | :--- | :--- | :--- |
| B-01 | **双作用选型** | 输入工况 (球阀, 4寸, 2.5MPa)，选择"不适用(双作用)"，系统能推荐出 `AT-DA` 或 `SF-DA` 系列。 | [ ] Pass / [ ] Fail | |
| B-02 | **单作用-故障关** | 输入工况，选择"**故障关 (Fail Close)**"，系统推荐的 `SF-SR` 型号，最终型号后缀为 `-STC`。 | [ ] Pass / [ ] Fail | |
| B-03 | **单作用-故障开** | 输入工况，选择"**故障开 (Fail Open)**"，系统推荐的 `SF-SR` 型号，最终型号后缀为 `-STO`。 | [ ] Pass / [ ] Fail | |
| B-04 | **尺寸数据输出** | 在选型结果中，点击一个 `SF` 系列型号，能看到其完整的"外形尺寸"和"法兰尺寸"表格。 | [ ] Pass / [ ] Fail | |
| B-05 | **可选件显示** | 在选型结果中，点击一个 `AT` 系列型号，能看到"温度选项"、"手轮"、"维修包"等可选配置。 | [ ] Pass / [ ] Fail | |
| B-06 | **价格动态计算** | 在 `AT` 系列结果中，勾选"手轮"和选择"高温型"，总价会自动正确累加。 | [ ] Pass / [ ] Fail | |
| B-07 | **无匹配结果** | 输入极端参数 (DN25, 100bar, 超高扭矩)，系统显示"未找到匹配的执行器"提示，不报错崩溃。 | [ ] Pass / [ ] Fail | |
| B-08 | **扭矩计算正确性** | 输入标准工况，验证系统计算的所需扭矩与手工计算一致（误差<5%）。 | [ ] Pass / [ ] Fail | |

**测试参考参数**:
```
阀门类型: Ball Valve / Butterfly Valve
阀门尺寸: DN50 / DN100 / DN150
压力: 10bar / 16bar / 25bar
介质: Water / Air / Steam
温度: 20°C / 80°C / 150°C
故障安全位置: Fail Close / Fail Open / 不适用(双作用)
```

---

## C. 核心模块: 项目全流程 (P1 - 中优先级)

| 编号 | 测试场景 | 预期结果 | 测试结果 | 备注/Bug ID |
| :--- | :--- | :--- | :--- | :--- |
| C-01 | **创建项目** | (接 A-01) 销售经理成功创建一个新项目"测试项目001"，状态为 `In Progress`。 | [ ] Pass / [ ] Fail | |
| C-02 | **项目列表查看** | 项目列表显示所有项目，可按状态、日期筛选，分页正常工作。 | [ ] Pass / [ ] Fail | |
| C-03 | **项目详情查看** | 点击项目名称，进入详情页，显示完整的项目信息和关联的技术需求。 | [ ] Pass / [ ] Fail | |
| C-04 | **项目编辑** | 销售经理可以编辑项目信息（名称、客户、预算等），修改成功保存。 | [ ] Pass / [ ] Fail | |
| C-05 | **技术方案提交** | 技术工程师 (接 B-02) 完成选型并提交后，项目状态流转，销售经理能看到更新。 | [ ] Pass / [ ] Fail | |
| C-06 | **多方案比较** | 技术工程师对同一项目提交2个不同的选型方案，系统能正确保存并显示。 | [ ] Pass / [ ] Fail | |
| C-07 | **项目状态流转** | 项目从 Lead → In Progress → Quotation → Contract → Production，每步状态变更正确记录时间和操作人。 | [ ] Pass / [ ] Fail | |

---

## D. 核心模块: BOM与报价 (P1 - 中优先级)

| 编号 | 测试场景 | 预期结果 | 测试结果 | 备注/Bug ID |
| :--- | :--- | :--- | :--- | :--- |
| D-01 | **BOM自动生成** | 完成选型后，BOM自动包含所选执行器和标准配件 (`isStandard: true`)。 | [ ] Pass / [ ] Fail | |
| D-02 | **手动添加配件** | 在BOM中手动添加可选配件（位置反馈器、限位开关），显示在清单中。 | [ ] Pass / [ ] Fail | |
| D-03 | **BOM价格计算** | 验证BOM总价 = Σ(单价 × 数量)，计算正确无误。 | [ ] Pass / [ ] Fail | |
| D-04 | **价格梯度应用** | 当数量达到价格梯度临界点时（如10件），单价自动调整为折扣价。 | [ ] Pass / [ ] Fail | |
| D-05 | **创建报价单** | 商务工程师 (`13000000004`) 基于BOM生成报价单，包含有效期、付款条件等。 | [ ] Pass / [ ] Fail | |
| D-06 | **报价单修改** | 商务工程师可以调整报价单价格或折扣，总价自动重新计算。 | [ ] Pass / [ ] Fail | |
| D-07 | **报价单导出** | 点击"导出PDF"，生成格式规范的报价单文件。 | [ ] Pass / [ ] Fail | |

---

## E. 核心模块: 合同与生产 (P1 - 中优先级)

| 编号 | 测试场景 | 预期结果 | 测试结果 | 备注/Bug ID |
| :--- | :--- | :--- | :--- | :--- |
| E-01 | **报价转合同** | 客户接受报价后，商务工程师点击"转为合同"，合同创建成功，项目状态变为 `Contract`。 | [ ] Pass / [ ] Fail | |
| E-02 | **合同编号生成** | 合同自动生成唯一编号（格式如 `CONTRACT-2025-001`）。 | [ ] Pass / [ ] Fail | |
| E-03 | **合同文件上传** | 可以上传签署后的合同扫描件（PDF格式），并能下载查看。 | [ ] Pass / [ ] Fail | |
| E-04 | **合同转生产** | 商务工程师点击"转生产"，系统生成生产工单，项目状态变为 `Production`。 | [ ] Pass / [ ] Fail | |
| E-05 | **生产订单生成** | (接 E-04) 生产计划员 (`13000000006`) 能在生产模块看到新的生产任务。 | [ ] Pass / [ ] Fail | |
| E-06 | **生产任务查看** | 生产经理 (`13000000005`) 登录后，能看到所有待生产和生产中的订单列表。 | [ ] Pass / [ ] Fail | |
| E-07 | **生产进度更新** | 生产计划员更新生产进度（25% → 50% → 100%），时间轴显示更新记录。 | [ ] Pass / [ ] Fail | |

---

## F. 核心模块: 质量与物流 (P2 - 低优先级)

| 编号 | 测试场景 | 预期结果 | 测试结果 | 备注/Bug ID |
| :--- | :--- | :--- | :--- | :--- |
| F-01 | **质检任务创建** | 生产完成后，系统自动或手动创建质检任务，分配给质检员。 | [ ] Pass / [ ] Fail | |
| F-02 | **执行质检** | 质检员逐项进行检验，记录结果（合格/不合格），上传检验报告。 | [ ] Pass / [ ] Fail | |
| F-03 | **不合格品处理** | 发现不合格品，记录不合格项，发起返工流程，订单状态变为 `Rework`。 | [ ] Pass / [ ] Fail | |
| F-04 | **创建发货单** | 质检合格后，物流专员创建发货单，填写物流信息，生成物流单号。 | [ ] Pass / [ ] Fail | |
| F-05 | **物流跟踪** | 查看已发货订单，能看到物流状态和预计送达时间。 | [ ] Pass / [ ] Fail | |

---

## G. 核心模块: 产品数据管理 (P0 - 高优先级)

| 编号 | 测试场景 | 预期结果 | 测试结果 | 备注/Bug ID |
| :--- | :--- | :--- | :--- | :--- |
| G-01 | **产品批量导入** | 管理员上传Excel文件（使用模板），数据成功导入，显示成功/失败数量。 | [ ] Pass / [ ] Fail | |
| G-02 | **导入错误处理** | 上传格式错误的Excel文件，系统显示详细的错误信息（行号、错误原因）。 | [ ] Pass / [ ] Fail | |
| G-03 | **产品数据查询** | 在产品目录中按型号、类型、规格搜索，能准确找到对应产品。 | [ ] Pass / [ ] Fail | |
| G-04 | **产品详情查看** | 点击产品型号，查看完整参数（扭矩曲线、尺寸图纸、价格等）。 | [ ] Pass / [ ] Fail | |
| G-05 | **产品数据更新** | 管理员编辑某个产品的参数（如价格），修改成功保存，不影响历史订单。 | [ ] Pass / [ ] Fail | |

---

## H. 核心模块: 系统管理 (P2 - 低优先级)

| 编号 | 测试场景 | 预期结果 | 测试结果 | 备注/Bug ID |
| :--- | :--- | :--- | :--- | :--- |
| H-01 | **用户创建** | 管理员创建新用户，分配角色和权限，新用户能正常登录。 | [ ] Pass / [ ] Fail | |
| H-02 | **用户禁用/启用** | 管理员禁用某用户，该用户无法登录；重新启用后可正常使用。 | [ ] Pass / [ ] Fail | |
| H-03 | **密码重置** | 管理员为用户重置密码，用户使用新密码能成功登录。 | [ ] Pass / [ ] Fail | |
| H-04 | **操作日志查看** | 管理员查看系统日志，能看到详细的操作记录（用户、时间、操作类型）。 | [ ] Pass / [ ] Fail | |
| H-05 | **数据备份** | 执行数据库备份命令，成功生成备份文件。 | [ ] Pass / [ ] Fail | |
| H-06 | **数据恢复** | 使用备份文件恢复数据，数据完整，系统正常运行。 | [ ] Pass / [ ] Fail | |

---

## I. 性能与稳定性 (P1 - 中优先级)

| 编号 | 测试场景 | 预期结果 | 测试结果 | 备注/Bug ID |
| :--- | :--- | :--- | :--- | :--- |
| I-01 | **并发登录** | 5个用户同时登录，系统保持稳定，响应时间<3秒。 | [ ] Pass / [ ] Fail | |
| I-02 | **并发选型** | 3个技术工程师同时进行选型操作，系统正常响应，无错误。 | [ ] Pass / [ ] Fail | |
| I-03 | **大数据量查询** | 项目列表包含100+项目时，分页和筛选流畅，加载时间<2秒。 | [ ] Pass / [ ] Fail | |
| I-04 | **长时间运行** | 系统连续运行8小时，无内存泄漏，功能正常。 | [ ] Pass / [ ] Fail | |

---

## J. 兼容性测试 (P2 - 低优先级)

| 编号 | 测试场景 | 预期结果 | 测试结果 | 备注/Bug ID |
| :--- | :--- | :--- | :--- | :--- |
| J-01 | **Chrome浏览器** | 在Chrome最新版中，所有功能正常，界面显示正确。 | [ ] Pass / [ ] Fail | |
| J-02 | **Firefox浏览器** | 在Firefox最新版中，所有功能正常，界面显示正确。 | [ ] Pass / [ ] Fail | |
| J-03 | **Safari浏览器** | 在Safari最新版中，所有功能正常，界面显示正确。 | [ ] Pass / [ ] Fail | |
| J-04 | **Edge浏览器** | 在Edge最新版中，所有功能正常，界面显示正确。 | [ ] Pass / [ ] Fail | |
| J-05 | **移动端响应式** | 在移动设备上访问，布局自适应，核心功能可用。 | [ ] Pass / [ ] Fail | |

---

## 📊 测试总结模板

**测试执行人**: ___________  
**测试日期**: ___________  
**测试版本**: v___________

### 测试覆盖率统计

| 模块 | 总用例数 | 已执行 | 通过 | 失败 | 跳过 | 通过率 |
| :--- | :---: | :---: | :---: | :---: | :---: | :---: |
| A. 用户认证与权限 | 5 | | | | | |
| B. 智能选型引擎 | 8 | | | | | |
| C. 项目全流程 | 7 | | | | | |
| D. BOM与报价 | 7 | | | | | |
| E. 合同与生产 | 7 | | | | | |
| F. 质量与物流 | 5 | | | | | |
| G. 产品数据管理 | 5 | | | | | |
| H. 系统管理 | 6 | | | | | |
| I. 性能与稳定性 | 4 | | | | | |
| J. 兼容性测试 | 5 | | | | | |
| **总计** | **59** | | | | | |

### Bug统计

| 严重级别 | 发现数量 | 已修复 | 待修复 | Bug ID列表 |
| :--- | :---: | :---: | :---: | :--- |
| P0 (Critical) | | | | |
| P1 (High) | | | | |
| P2 (Medium) | | | | |
| P3 (Low) | | | | |
| **总计** | | | | |

### 测试结论

**整体评估**: [ ] 可以发布 / [ ] 需要修复后再测试 / [ ] 暂不可发布

**主要问题**:
1. 
2. 
3. 

**改进建议**:
1. 
2. 
3. 

**签字确认**:
- 测试负责人: ___________ 日期: ___________
- 开发负责人: ___________ 日期: ___________
- 项目经理: ___________ 日期: ___________

---

## 📝 使用流程说明

### 测试执行流程

```
开始测试
    ↓
1. 复制本文件为 TEST_RUN_YYYY-MM-DD.md
    ↓
2. 运行 npm run seed:final 初始化数据库
    ↓
3. 启动环境: bash 演示环境启动.sh
    ↓
4. 按模块顺序逐一执行测试用例
    ↓
5. 在"测试结果"列标记 [x] Pass 或 [x] Fail
    ↓
6. 发现Bug立即记录到 BUG_TRACKING.md
    ↓
7. 填写测试总结模板
    ↓
8. 团队评审，决定是否发布
    ↓
结束测试
```

### 测试优先级说明

- **P0 (高优先级)**: 核心功能，必须100%通过才能发布
- **P1 (中优先级)**: 重要功能，通过率应≥95%
- **P2 (低优先级)**: 辅助功能，通过率应≥90%

### 测试注意事项

1. **环境隔离**: 始终在测试环境进行，不要在生产数据库上测试
2. **数据初始化**: 每次测试前必须运行 `npm run seed:final` 确保数据一致性
3. **完整执行**: 不要跳过任何测试用例，即使之前测试过
4. **及时记录**: 发现问题立即记录，不要等到测试结束
5. **截图保存**: 关键操作和Bug现场要截图保存作为证据
6. **回归测试**: Bug修复后必须重新执行相关用例

---

**文档维护者**: QA Team  
**最后更新**: 2025-10-30  
**下次审查**: 每个版本发布前
