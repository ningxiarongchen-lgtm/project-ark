# Project Ark - 全角色功能验收测试剧本 (v1.2)

**目的**: 本文档为 Project Ark 平台提供了一套覆盖所有核心角色的标准测试与演示流程。它既是向客户展示产品价值的**演示剧本**，也是每次发布前必须执行的**功能验收测试 (UAT)** 清单。

**核心原则**: **本次测试通过的行为，必须与线上部署后的行为完全一致。**

**测试时长**: 完整测试约 2-3 小时

---

## 1. 测试前置 (每次测试必须执行！)

### 环境准备

```bash
# 1. 环境重置
cd backend
npm run seed:final

# 2. 数据完整性验证（⭐ 新增必检步骤）
npm run verify:all

# 3. 启动服务
# (根据实际情况启动后端和前端)

# 4. 打开浏览器
# 使用无痕模式或清除缓存
```

**重要**:
- ✅ 此命令将数据库恢复到包含所有演示项目的干净"出厂状态"
- ✅ 保证测试环境与生产环境的一致性
- ✅ 每次测试前必须执行，确保数据干净
- ⭐ **新增**: 数据验证步骤确保所有核心数据已正确导入

### 数据验证检查点 ⭐

执行 `npm run verify:all` 后，必须确认以下输出：

```
✅ 执行器数据完整性检查通过！
   - AT系列: 检测到 X 个 (预期 ≥ 30)
   - GY系列: 检测到 X 个 (预期 ≥ 20)
   - SF系列: 检测到 282 个 (预期 282) ⭐ 包含球阀和蝶阀
   - 总数: 337 个执行器
   
✅ 手动操作装置数据完整性检查通过！
   - 检测到 18 个手动操作装置 (预期 18)
   
✅ 配件数据完整性检查通过！
   - 检测到 10 个配件 (预期 10)

✅ 机构类型验证通过！
   - AT系列: 所有型号机构类型 = 齿轮齿条
   - GY系列: 所有型号机构类型 = 齿轮齿条
   - SF系列: 所有型号机构类型 = 拨叉式

✅ 阀门类型验证通过！⭐
   - SF系列球阀: 141 个（型号不带C）
   - SF系列蝶阀: 141 个（型号带C）
```

**❌ 如果验证失败**:
1. **立即停止测试**
2. 查看详细错误信息
3. 参考 `PRE_TEST_CHECKLIST.md` 进行问题排查
4. 修复后重新执行 `npm run seed:final` 和 `npm run verify:all`

### 产品目录快速检查 ⭐

在开始业务流测试前，先登录销售经理账号，检查产品目录：

1. **登录**: 账号 `13000000002`，密码 `password`
2. **导航**: 点击"产品目录"
3. **验证数据显示**:
   - [ ] 产品总数: **337个** (55个AT/GY + 282个SF)
   - [ ] 表格显示正常，无401错误
   - [ ] **统计卡片**：只显示5个核心指标 ⭐
     - ✅ 产品总数：365个
     - ✅ 筛选结果：显示当前筛选数量
     - ✅ 有库存产品：显示有库存的数量
     - ✅ 产品系列：3个（AT、GY、SF）
     - ✅ 机构类型：2种（齿轮齿条、拨叉式）
   - [ ] **表格列显示正确**（只显示8列）：
     - ✅ 序号
     - ✅ 型号
     - ✅ 系列
     - ✅ 机构类型（齿轮齿条、拨叉式）
     - ✅ 阀门类型（球阀、蝶阀、-）⭐
     - ✅ 作用类型（DA、SR）
     - ✅ 库存量
     - ✅ 状态（可售、停产）
   - [ ] **表格不显示的列**（已删除）：
     - ❌ 产品类型
     - ❌ 轭架类型
     - ❌ 描述
     - ❌ 输出扭矩 ⭐
     - ❌ 工作角度 ⭐
     - ❌ 工作压力 ⭐
     - ❌ 重量 ⭐

4. **筛选功能测试**:
   - [ ] 选择"SF系列" + "球阀" → 显示 141 个产品（型号不带C，如：SF10-150DA）
   - [ ] 选择"SF系列" + "蝶阀" → 显示 141 个产品（型号带/C，如：SF10/C-150DA）⭐
   - [ ] 选择"机构类型=拨叉式" → 只显示SF系列
   - [ ] 选择"机构类型=齿轮齿条" → 只显示AT/GY系列

**⭐ 重要说明**：
- SF系列球阀（对称拨叉）：型号格式为 `SF10-150DA`（不带C）
- SF系列蝶阀（偏心拨叉）：型号格式为 `SF10/C-150DA`（在本体尺寸后加/C）⭐

**✅ 所有检查通过后，方可开始正式UAT测试！**

### 测试记录

建议在测试过程中：
- 记录每个步骤的执行结果
- 截图关键操作和界面
- 发现问题立即记录到 `docs/7_BUG_TRACKING.md`

---

## 2. 全角色测试"演员"登录信息

**这是由 `seed:final` 脚本创建的、保证存在于任何环境中的标准测试账号。**

| 序号 | 角色 | 手机号 (账号) | 密码 | 核心职责/测试重点 |
| :--- | :--- | :--- | :--- | :--- |
| 1 | **系统管理员** | `13000000001` | `password` | 用户管理、数据导入、全局看板 |
| 2 | **销售经理** | `13000000002` | `password` | **项目发起**、客户管理、赢单/丢单 |
| 3 | **技术工程师** | `13000000003` | `password` | **智能选型**、技术方案设计 |
| 4 | **商务工程师** | `13000000004` | `password` | **报价管理**、合同管理 |
| 5 | **采购专员** | `13000000005` | `password` | **采购订单创建**、供应商管理 |
| 6 | **生产计划员** | `13000000006` | `password` | **生产订单创建**、BOM展开、排程 |
| 7 | **质检员** | `13000000007` | `password` | **质量检验** (IQC, FQC) |
| 8 | **物流专员** | `13000000008` | `password` | **发货管理**、物流跟踪 |
| 9 | **售后工程师** | `13000000009` | `password` | **售后工单处理** |
| 10 | **车间工人** | `13000000010` | `password` | 工单执行、报工 |

---

## 3. 核心业务流测试剧本 (从线索到回款)

**请严格按照以下顺序，切换不同角色，完成一个项目的完整生命周期测试。**

### 测试项目信息
- **项目名称**: `[UAT] 华南石化紧急订单测试`
- **客户名称**: `华南石化`
- **测试位号**: `XV-501`

---

### **第一幕: 项目发起 (扮演: 销售经理)** ⭐

**测试目标**: 验证项目创建、任务分配、状态流转功能

#### 操作步骤

1. **登录系统**
   - 账号: `13000000002`
   - 密码: `password`
   - 验证: 成功进入销售经理工作台

2. **创建新项目**
   - 导航: 项目管理 → 新建项目
   - 填写信息:
     - **项目名称**: `[UAT] 华南石化紧急订单测试`
     - **客户名称**: `华南石化`
     - **技术负责人**: 指派给 **技术工程师** (`13000000003`)
     - **项目类型**: 标准项目
     - **预算**: (可选填写)
   - 点击"创建"

3. **添加技术需求**
   - 进入刚创建的项目
   - 点击"添加技术需求"
   - 填写基础信息:
     - **位号**: `XV-501`
     - **阀门类型**: 球阀
     - **其他字段**: 暂时留空（由技术工程师完善）
   - 保存

4. **验证状态**
   - 登出销售经理账号

#### 预期结果

- ✅ 项目创建成功，状态为 `In Progress`
- ✅ 技术需求成功添加
- ✅ 技术工程师的待办事项中会出现此任务
- ✅ 项目列表中能看到新创建的项目

#### 可能遇到的问题

| 问题 | 严重程度 | 处理方式 |
|------|---------|---------|
| 项目创建失败 | P0 | 立即记录Bug，检查后端API |
| 无法选择技术负责人 | P1 | 检查用户数据是否正确初始化 |
| 技术需求保存失败 | P1 | 检查数据验证逻辑 |

---

### **第二幕: 技术选型 (扮演: 技术工程师)** ⭐⭐⭐

**测试目标**: 验证智能选型核心功能，特别是单作用"故障关"选型

#### 操作步骤

1. **登录系统**
   - 账号: `13000000003`
   - 密码: `password`
   - 验证: 成功进入技术工程师工作台

2. **查看待办任务**
   - 在仪表盘找到 `[UAT] 华南石化...` 项目
   - 验证: 项目出现在"待处理"列表中
   - 点击进入项目

3. **完善技术需求参数**
   - 找到位号 `XV-501`，点击"编辑"或"选型"
   - 填写完整参数:
     - **阀门类型**: 球阀
     - **口径**: DN100 (4寸)
     - **压力等级**: PN25 (2.5MPa)
     - **介质温度**: 常温
     - **故障位置**: **故障关** ⭐ (关键测试点)
     - **阀门扭矩**: (可选，系统会自动计算)

4. **执行智能选型**
   - 点击"开始选型"或"推荐执行器"
   - 等待系统计算

5. **验证选型结果** ⭐⭐⭐
   - **关键检查点**:
     - ✅ 推荐结果中应该**只包含 SR 型号**（单作用弹簧复位型）
     - ✅ 型号后缀应该显示为 `...-STC` (Spring To Close - 故障关)
     - ✅ 扭矩裕量应该在 15%-25% 之间
     - ✅ 计算逻辑正确：比较的是 SET (弹簧结束扭矩) vs AST (阀门关闭所需扭矩)
   
6. **查看技术数据**
   - 选择一个推荐的型号（例如 `SF-160-SR-STC`）
   - 点击"查看详情"或展开
   - **关键检查点**:
     - ✅ 完整的"外形尺寸"表格正确渲染
     - ✅ 完整的"法兰尺寸"表格正确渲染
     - ✅ 所有尺寸数值完整显示（无空白或undefined）
     - ✅ 如果是 AT 系列，检查"可选件"（手轮、温度选项、维修包）是否正确显示

7. **添加到技术方案**
   - 点击"添加到技术方案"或"选择此型号"
   - 验证: 成功添加提示

8. **提交技术方案**
   - 返回项目主页
   - 点击"提交技术方案"
   - 验证: 提交成功

#### 预期结果

- ✅ 技术工程师能看到指派给自己的项目
- ✅ 选型算法正确识别"故障关"需求，推荐SR型号
- ✅ 型号后缀正确显示为 `-STC`
- ✅ 扭矩计算逻辑正确（SET vs AST）
- ✅ 技术数据（尺寸表格）完整显示
- ✅ 方案提交成功，项目状态流转
- ✅ 商务工程师的待办中出现此任务

#### 可能遇到的问题

| 问题 | 严重程度 | 处理方式 |
|------|---------|---------|
| 选型结果包含DA型号（双作用） | **P0 致命** | 立即停止测试，核心算法错误 |
| 型号显示为STO而不是STC | **P0 致命** | 故障方向判断错误 |
| 尺寸数据不显示或显示undefined | **P1 严重** | 数据结构或前端渲染问题 |
| 扭矩裕量计算错误 | **P1 严重** | 算法逻辑问题 |
| 无法添加到方案 | P1 | API或状态管理问题 |
| 方案提交后商务未收到通知 | P1 | 状态流转或通知机制问题 |

---

### **第三幕: 商务报价 (扮演: 商务工程师)** ⭐⭐

**测试目标**: 验证BOM展开、报价生成、PDF导出功能

#### 操作步骤

1. **登录系统**
   - 账号: `13000000004`
   - 密码: `password`

2. **查看待办任务**
   - 找到 `[UAT] 华南石化...` 项目
   - 验证: 项目出现在"待报价"列表中
   - 点击进入

3. **核对BOM清单** ⭐
   - 点击"查看BOM"或"报价管理"
   - **关键检查点**:
     - ✅ BOM中包含执行器主机（例如 `SF-160-SR-STC`）
     - ✅ BOM中包含所有标准配件:
       - 安装支架
       - 连接件
       - 位置反馈装置（如果适用）
       - 电气接头
       - 其他标准配件
     - ✅ 数量正确（主机数量=1，配件按标准配置）
     - ✅ 单价显示正确
     - ✅ 小计计算正确

4. **添加可选件**
   - 点击"添加报价项"
   - 选择或输入 "手轮"
   - 设置数量: 1
   - 确认价格自动填充或手动输入
   - 保存

5. **验证价格计算** ⭐
   - **关键检查点**:
     - ✅ 各项单价正确显示
     - ✅ 小计 = 单价 × 数量
     - ✅ **总价 = 所有项的小计之和** (包括新加的手轮)
     - ✅ 价格实时更新（如果修改数量）

6. **生成报价单**
   - 点击"生成报价"或"确认报价"
   - 选择"下载PDF"

7. **验证PDF报价单** ⭐
   - 打开下载的PDF文件
   - **关键检查点**:
     - ✅ 公司信息、logo正确
     - ✅ 客户信息正确（华南石化）
     - ✅ 项目名称正确
     - ✅ BOM清单完整显示
     - ✅ 价格信息完整
     - ✅ 总价正确
     - ✅ 格式清晰、专业

#### 预期结果

- ✅ BOM能正确展开所有主机和配件
- ✅ 价格计算准确无误
- ✅ 可选件能正确添加并影响总价
- ✅ PDF报价单格式正确，内容完整
- ✅ 报价生成成功，状态更新

#### 可能遇到的问题

| 问题 | 严重程度 | 处理方式 |
|------|---------|---------|
| BOM缺少配件 | P1 | 检查BOM展开逻辑 |
| 总价计算错误 | P1 | 检查前端计算逻辑或后端API |
| 添加可选件后总价未更新 | P2 | 前端状态管理问题 |
| PDF生成失败 | P2 | 检查PDF服务 |
| PDF格式混乱 | P3 | 模板优化 |

---

### **第四幕: 赢单 & 转生产 (扮演: 销售经理 → 生产计划员)** ⭐⭐

**测试目标**: 验证项目赢单流程、生产订单创建、BOM继承

#### 第一阶段: 赢单 (销售经理)

1. **登录系统**
   - 账号: `13000000002`
   - 密码: `password`

2. **标记项目为赢单**
   - 找到 `[UAT] 华南石化...` 项目
   - 点击"编辑状态"或"更新状态"
   - 选择 **`Won` (赢单)**
   - 填写赢单信息（可选）:
     - 合同金额
     - 预计交付日期
   - 保存

3. **验证状态**
   - 项目状态成功变为 `Won`
   - 登出

#### 第二阶段: 创建生产订单 (生产计划员)

1. **登录系统**
   - 账号: `13000000006`
   - 密码: `password`

2. **查看生产需求**
   - 导航: 生产管理 → 生产需求 或 待生产项目
   - **关键检查点**:
     - ✅ 能看到源自 `[UAT] 华南石化...` 项目的生产需求
     - ✅ 需求信息完整（产品型号、数量、交付日期）

3. **创建生产订单**
   - 点击"创建生产订单"
   - 验证系统自动填充:
     - 项目信息
     - 产品清单
     - BOM清单
   - 填写生产信息（如果需要）:
     - 计划开始日期
     - 计划完成日期
     - 负责车间
   - 提交

4. **验证BOM继承** ⭐
   - 进入新创建的生产订单
   - 点击"查看BOM"或"物料清单"
   - **关键检查点**:
     - ✅ BOM被正确继承自技术方案
     - ✅ 包含执行器主机
     - ✅ 包含所有配件（与报价阶段一致）
     - ✅ 数量正确
     - ✅ 自动生成物料需求

5. **查看物料需求**
   - 在生产订单中查看"物料需求"
   - **关键检查点**:
     - ✅ 系统自动对比库存
     - ✅ 标记缺料的物料项
     - ✅ 缺料数量 = 需求数量 - 库存数量

#### 预期结果

- ✅ 项目状态成功变为 `Won`
- ✅ 生产计划员能看到新的生产需求
- ✅ 生产订单成功创建
- ✅ BOM被正确继承，无遗漏
- ✅ 物料需求自动生成
- ✅ 缺料信息准确

#### 可能遇到的问题

| 问题 | 严重程度 | 处理方式 |
|------|---------|---------|
| 生产计划员看不到生产需求 | P0 | 状态流转或权限问题 |
| BOM未继承或不完整 | P0 | 数据关联逻辑错误 |
| 物料需求未自动生成 | P1 | 后端逻辑问题 |
| 库存对比错误 | P1 | 库存计算逻辑问题 |

---

### **第五幕: 供应链协同 (扮演: 采购专员)** ⭐

**测试目标**: 验证采购需求、采购订单创建、供应商管理

#### 操作步骤

1. **登录系统**
   - 账号: `13000000005`
   - 密码: `password`

2. **查看采购需求**
   - 导航: 采购管理 → 采购需求池
   - **关键检查点**:
     - ✅ 能看到上述生产订单生成的物料需求
     - ✅ 需求信息完整:
       - 物料名称
       - 规格型号
       - 需求数量
       - 需求日期
       - 关联的生产订单
     - ✅ 缺料的物料被正确列出

3. **创建采购订单**
   - 选择需要采购的物料（可多选）
   - 点击"创建采购订单"
   - 填写采购信息:
     - **供应商**: 选择或新建
     - **采购数量**: 默认=需求数量，可调整
     - **预计到货日期**
     - **备注**
   - 提交

4. **验证采购订单**
   - 进入采购订单列表
   - 找到刚创建的订单
   - **关键检查点**:
     - ✅ 订单状态为 `Sent` (已发送) 或 `Pending`
     - ✅ 物料清单正确
     - ✅ 供应商信息正确
     - ✅ 关联到正确的生产订单

5. **（可选）模拟收货流程**
   - 如果时间允许，可以继续测试:
   - 将采购订单状态改为 `Delivered` (已到货)
   - 执行"收货入库"操作
   - 验证:
     - ✅ 库存数量增加
     - ✅ 生产订单的物料状态变为"已到货"

#### 预期结果

- ✅ 采购需求正确显示
- ✅ 缺料物料被准确识别
- ✅ 采购订单成功创建
- ✅ 订单信息完整，关联正确
- ✅ （可选）收货后库存更新

#### 可能遇到的问题

| 问题 | 严重程度 | 处理方式 |
|------|---------|---------|
| 采购需求池为空 | P1 | 检查数据流转逻辑 |
| 物料信息不完整 | P2 | 数据继承问题 |
| 无法创建采购订单 | P1 | API或权限问题 |
| 收货后库存未更新 | P1 | 库存管理逻辑问题 |

---

### **第六幕: 质量检验 (扮演: 质检员)** 🔵

**测试目标**: 验证质检流程、报告生成

#### 操作步骤

1. **登录系统**
   - 账号: `13000000007`
   - 密码: `password`

2. **查看待检验订单**
   - 找到状态为"生产完成"或"待检验"的订单

3. **创建检验报告**
   - 选择检验类型: FQC (成品检验)
   - 填写检验项
   - 上传检验照片（可选）
   - 判定结果: 合格/不合格

4. **验证状态流转**
   - 检验合格 → 订单状态变为"待入库"
   - 检验不合格 → 订单状态变为"返工"

---

### **第七幕: 物流发货 (扮演: 物流专员)** 🔵

**测试目标**: 验证发货管理、物流跟踪

#### 操作步骤

1. **登录系统**
   - 账号: `13000000008`
   - 密码: `password`

2. **查看待发货订单**
   - 找到状态为"待发货"的订单

3. **创建发货单**
   - 填写物流信息
   - 选择物流公司
   - 输入运单号
   - 确认发货

4. **验证状态更新**
   - 订单状态变为"已发货"

---

### **第八幕: 售后服务 (扮演: 售后工程师)** 🔵

**测试目标**: 验证售后工单创建、处理、关闭流程

#### 操作步骤

1. **登录系统**
   - 账号: `13000000009`
   - 密码: `password`

2. **创建售后工单**
   - 导航: 售后管理 → 创建工单
   - 填写工单信息:
     - 关联项目: `[UAT] 华南石化...`
     - 工单类型: 维修服务
     - 问题描述
     - 优先级: Medium

3. **处理工单**
   - 添加处理记录
   - 上传照片或附件
   - 更新状态: Open → In Progress → Resolved

4. **关闭工单**
   - 填写解决方案
   - 客户确认（可选）
   - 状态变为 Closed

#### 预期结果

- ✅ 工单创建成功
- ✅ 状态流转正常
- ✅ 处理记录完整保存

---

## 4. 独立功能点验收测试

**除了完整的业务流，还需要对以下关键独立功能进行专项测试。**

### 4.1 数据管理 (扮演: 系统管理员) ⭐⭐⭐

#### 测试4.1.1: 产品数据导入 - 正常流程

**测试目标**: 验证Excel数据导入功能（创建+更新）

1. **登录系统**
   - 账号: `13000000001`
   - 密码: `password`

2. **下载导入模板**
   - 导航: 产品管理 → 批量导入
   - 点击"下载模板"
   - 验证: 模板下载成功，包含必需列

3. **准备测试数据**
   - 在模板中填写一条**新产品**数据:
     - model: `TEST-UAT-001`
     - series: `TEST`
     - type: `DA`
     - maxTorque: `500`
     - price: `8000`
     - 其他必填字段...

4. **上传并导入**
   - 上传填写好的Excel文件
   - 点击"导入"
   - 等待处理

5. **验证导入结果** ⭐
   - **关键检查点**:
     - ✅ 系统显示"导入成功"消息
     - ✅ 显示导入统计: 新增1条，更新0条
     - ✅ 在产品目录中能搜索到 `TEST-UAT-001`
     - ✅ 产品信息完整且正确

6. **测试更新功能**
   - 修改模板中 `TEST-UAT-001` 的价格为 `8500`
   - 重新上传并导入
   - **关键检查点**:
     - ✅ 系统显示"导入成功"
     - ✅ 显示: 新增0条，更新1条
     - ✅ 产品价格已更新为 8500

#### 测试4.1.2: 产品数据导入 - 异常处理 ⭐⭐⭐

**测试目标**: 验证系统的健壮性和错误处理能力

**测试场景A: 缺少必需列**

1. 准备一个缺少 `model` 列的Excel文件
2. 尝试上传
3. **预期结果**:
   - ✅ 系统应拒绝上传
   - ✅ 显示清晰的错误提示: "文件缺少必需的列: model"
   - ✅ 系统**不应崩溃**
   - ✅ 数据库**不应有任何变更**

**测试场景B: 数据格式错误**

1. 准备一个 Excel 文件，其中 `maxTorque` 字段填写为 "abc" (非数字)
2. 尝试上传
3. **预期结果**:
   - ✅ 系统应识别错误
   - ✅ 显示: "第X行，maxTorque字段必须是数字"
   - ✅ 导入失败，或跳过错误行

**测试场景C: 空文件**

1. 上传一个空的Excel文件（只有表头，无数据行）
2. **预期结果**:
   - ✅ 系统提示: "文件无有效数据"
   - ✅ 不应崩溃

**测试场景D: 超大文件**

1. 准备一个包含 1000+ 行数据的文件
2. 上传
3. **预期结果**:
   - ✅ 系统能正常处理（或显示文件过大提示）
   - ✅ 显示导入进度
   - ✅ 不应超时或崩溃

#### 可能遇到的问题

| 问题 | 严重程度 | 处理方式 |
|------|---------|---------|
| 上传空文件导致系统崩溃 | **P0 致命** | 必须立即修复，加强输入验证 |
| 格式错误无提示 | P1 | 需要改进错误处理和用户提示 |
| 导入成功但数据错误 | **P0 致命** | 数据处理逻辑严重错误 |
| 更新功能不工作 | P1 | Upsert逻辑问题 |

---

### 4.2 用户管理 (扮演: 系统管理员) ⭐

#### 测试目标: 验证用户CRUD操作

1. **创建新用户**
   - 导航: 用户管理 → 创建用户
   - 填写信息:
     - 姓名: `测试用户UAT`
     - 手机号: `13900000099`
     - 角色: 技术工程师
     - 密码: `password`
   - 保存
   - 验证: 用户列表中出现新用户

2. **密码重置**
   - 找到刚创建的用户
   - 点击"重置密码"
   - 设置新密码: `newpassword`
   - 验证: 使用新密码能成功登录

3. **禁用用户**
   - 禁用 `测试用户UAT`
   - 尝试用该账号登录
   - **预期**: 登录失败，提示账号已禁用

4. **删除用户**
   - 删除 `测试用户UAT`
   - 验证: 用户列表中不再出现

---

### 4.3 售后服务 (扮演: 售后工程师) ⭐

#### 测试目标: 验证独立创建售后工单（不关联项目）

1. **创建独立工单**
   - 导航: 售后管理 → 创建工单
   - 工单类型: 产品咨询
   - 不关联任何项目
   - 填写客户信息和问题描述
   - 保存

2. **处理工单**
   - 添加处理记录
   - 状态: Open → Resolved

3. **关闭工单**
   - 填写解决方案
   - 状态: Resolved → Closed

4. **验证**
   - ✅ 工单能独立存在（不依赖项目）
   - ✅ 状态流转正常
   - ✅ 记录完整保存

---

## 5. 测试结果记录

### 5.1 测试统计

| 测试模块 | 总用例数 | 通过 | 失败 | 跳过 | 通过率 |
|---------|---------|------|------|------|--------|
| 项目发起 | 1 | - | - | - | - |
| 技术选型 | 1 | - | - | - | - |
| 商务报价 | 1 | - | - | - | - |
| 赢单&转生产 | 1 | - | - | - | - |
| 供应链协同 | 1 | - | - | - | - |
| 质量检验 | 1 | - | - | - | - |
| 物流发货 | 1 | - | - | - | - |
| 售后服务 | 1 | - | - | - | - |
| 数据管理 | 2 | - | - | - | - |
| 用户管理 | 1 | - | - | - | - |
| **总计** | **11** | - | - | - | - |

### 5.2 Bug汇总

在测试过程中发现的Bug，请记录到 `docs/7_BUG_TRACKING.md`

| Bug ID | 发现阶段 | 严重程度 | 状态 | 简述 |
|--------|---------|---------|------|------|
| - | - | - | - | - |

---

## 6. 发布决策标准

### 6.1 发布检查清单

- [ ] **核心业务流（第一至第五幕）100% 通过**
- [ ] **数据管理异常处理测试 100% 通过** ⭐
- [ ] **所有 P0 级别Bug已修复**
- [ ] **所有 P1 级别Bug已修复或降级**
- [ ] **测试环境与生产环境配置一致**
- [ ] **所有修复的Bug已回归测试**

### 6.2 发布决策

```
核心业务流全部通过？
    ├─ 是 → 数据管理测试通过？
    │       ├─ 是 → 所有P0 Bug已修复？
    │       │       ├─ 是 → ✅ 批准发布
    │       │       └─ 否 → ❌ 不得发布
    │       └─ 否 → ❌ 不得发布
    └─ 否 → ❌ 不得发布
```

### 6.3 发布签字确认

- **测试负责人**: ________________  日期: __________
- **技术负责人**: ________________  日期: __________
- **产品负责人**: ________________  日期: __________

---

## 7. 测试最佳实践

### DO ✅

- ✅ 每次测试前必须运行 `npm run seed:final`
- ✅ 严格按照剧本顺序执行
- ✅ 发现问题立即记录，不要等测试结束
- ✅ 关键操作要截图保存
- ✅ 重点测试异常场景和边界情况
- ✅ Bug修复后立即回归测试

### DON'T ❌

- ❌ 跳过任何测试步骤
- ❌ 在"脏"数据环境上测试
- ❌ 发现Bug但不记录
- ❌ P0 Bug未修复就继续测试
- ❌ 测试通过但文档未更新

---

## 8. 附录

### 8.1 测试数据速查

- 测试项目名: `[UAT] 华南石化紧急订单测试`
- 测试位号: `XV-501`
- 测试产品: `TEST-UAT-001`
- 测试用户: `测试用户UAT` / `13900000099`

### 8.2 关键测试点速查

| 功能 | 关键检查点 | 严重程度 |
|------|-----------|---------|
| 故障关选型 | 只推荐SR型号，后缀-STC | P0 |
| 尺寸数据 | 完整显示，无undefined | P1 |
| BOM展开 | 包含所有配件 | P1 |
| 价格计算 | 总价准确，实时更新 | P1 |
| 空文件上传 | 不应崩溃，清晰报错 | P0 |

### 8.3 相关文档

- `docs/5_MANUAL_TEST_CASES.md` - 手动测试用例清单
- `docs/6_QUALITY_ASSURANCE_SYSTEM.md` - 质量保证体系
- `docs/7_BUG_TRACKING.md` - Bug追踪记录
- `docs/3_CORE_LOGIC_AND_APIS.md` - 核心逻辑参考

---

**版本**: v1.2  
**更新日期**: 2025-10-30  
**维护者**: 测试团队  
**状态**: ✅ 已发布

---

> **重要提醒**: 本测试通过的行为，必须与线上部署后的行为完全一致。这是质量保证体系的核心承诺！

